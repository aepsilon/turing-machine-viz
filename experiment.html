<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>proving grounds</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  </head>
  <body>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- Dialog for Import -->
    <div id="importDialog" class="modal fade" tabindex="-1" role="dialog"
    aria-labelledby="importDialogHeader">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="importDialogHeader">Importing document</h4>
          </div>
          <div class="modal-body">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <button type="button" class="btn btn-default"
      data-toggle="modal" data-target="#importDialog">
        Open modal
      </button>

      <script src='lib/d3.js' charset='utf-8'></script>
      <script src='lib/lodash.js'></script>
      <script>
        var lodash = _;
      </script>
      <script src='lib/lodash.fp.js'></script>
      <script src='lib/js-yaml.min.js' charset='utf-8'></script>

      <script src='lib/ace-builds/src-min-noconflict/ace.js' charset='utf-8'></script>

      <script src="build/TMViz.bundle.js" charset="utf-8"></script>
      <script src="build/CheckboxTable.bundle.js" charset="utf-8"></script>

      <style>
        .checkbox-table tr > :first-child {
          text-align: right
        }
        .checkbox-table tr > :last-child {
          text-align: right;
        }
        .checkbox-table tbody tr, input[type="checkbox"] {
          cursor: pointer;
        }
        textarea {
          font-family: 'Source Code Pro', Consolas, Menlo, Courier New, monospace;
        }
      </style>
      <!-- Collapse Panel -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" href="#collapseOne">
              Show other files
            </a>
          </h4>
        </div>
        <div id="collapseOne" class="panel-collapse collapse in">
          <div class="panel-body">
            <q>readme.md</q>, <q>hello world.txt</q>
          </div>
        </div>
      </div>
      <!-- Collapse Disclosure Triangle -->
      <style>
        a.disclosure-triangle {
          cursor: pointer;
          text-decoration: none;
        }
        a.disclosure-triangle + div.collapse ,
        a.disclosure-triangle + div.collapsing {
          margin-top: 1em;
        }
        a.disclosure-triangle:before {
          content: '▸';
          transform: rotate(90deg);
          transform-origin: center;
          transition: transform 0.1s linear;
          display: inline-block;
          font-size: larger;
          margin-right: 0.2em;
        }
        a.disclosure-triangle.collapsed:before {
          transform: none;
        }
        /*.panel > .table {
          margin: 0 0.5em;
        }*/
        .modal-dialog td pre {
          white-space: pre-wrap;
          font-size: smaller;
        }
      </style>
      <a class="disclosure-triangle" role="button" data-toggle="collapse" href="#otherFiles2">
        Show other files
      </a>
      <div id="otherFiles2" class="panel-collapse collapse in">
        <div class="panel-body">
          <q>readme.md</q>, <q>hello world.txt</q>
        </div>
      </div>

      <a class="disclosure-triangle" role="button" data-toggle="collapse" href="#otherFiles3">
        Show other files
      </a>
      <div id="otherFiles3" class="collapse in">
        <div class="well">
          <q>readme.md</q>, <q>hello world.txt</q>
        </div>
      </div>

      <a class="disclosure-triangle" role="button" data-toggle="collapse" href="#otherFiles4">
        Show other files
      </a>
      <div id="otherFiles4" class="collapse in">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Not a valid document</h3>
          </div>
          <div class="panel-body">
            <table class="table">
              <thead>
                <tr> <th> Filename </th> <th> Reason </th> </tr>
              </thead>
              <tbody>
                <tr>
                  <td>palindrome.yaml</td><td>missing <code>source code:</code> value</td>
                </tr>
                <tr>
                  <td>match.yaml</td><td><code>source code:</code> value was not a string type</td>
                </tr>
              </tbody>
            </table>
            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">Not valid YAML</h3>
              </div>
              <div class="panel-body">
           <table class="table">
             <thead>
               <tr> <th> Filename </th> <th> Details </th> </tr>
             </thead>
             <tbody>
               <tr>
                 <td>powers of two.yaml</td>
                 <td>
                   <p>YAML syntax error</p>
               <pre>
can not read a block mapping entry; a multiline key may not be an implicit key at line 3, column 12:
start state: q0
          ^</pre>
                 </td>
               </tr>
               <tr>
                 <td>a very long filename says hello world.yaml</td>

                 <td>
<pre>
bad indentation of a mapping entry at line 7, column 6:
    1: {R: q1}
    ^</pre>
                </td>
               </tr>
             </tbody>
           </table>
                <div class="panel panel-default">
                  <div class="panel-heading">
                    <h3 class="panel-title">Different file extension (not <code>.yaml</code>/<code>.yml</code>)</h3>
                  </div>
                  <div class="panel-body">
                    <q>readme.md</q>, <q>hello world.txt</q>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- non-nested panels -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Not a valid document</h3>
        </div>
        <div class="panel-body">
          <table class="table">
            <thead>
              <tr> <th> Filename </th> <th> Reason </th> </tr>
            </thead>
            <tbody>
              <tr>
                <td>palindrome.yaml</td><td>missing <code>source code:</code> value</td>
              </tr>
              <tr>
                <td>match.yaml</td><td><code>source code:</code> value was not a string type</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Not valid YAML</h3>
        </div>
        <div class="panel-body">
         <table class="table">
           <thead>
             <tr> <th> Filename </th> <th> Details </th> </tr>
           </thead>
           <tbody>
             <tr>
               <td>powers of two.yaml</td>
               <td>
                 <p>YAML syntax error</p>
         <pre>
can not read a block mapping entry; a multiline key may not be an implicit key at line 3, column 12:
start state: q0
    ^</pre>
               </td>
             </tr>
             <tr>
               <td>a very long filename says hello world.yaml</td>

               <td>
<pre>
bad indentation of a mapping entry at line 7, column 6:
1: {R: q1}
^</pre>
              </td>
             </tr>
           </tbody>
         </table>

        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Different file extension (not <code>.yaml</code>/<code>.yml</code>)</h3>
        </div>
        <div class="panel-body">
          <q>readme.md</q>, <q>hello world.txt</q>
        </div>
      </div>
      <!-- non-nested panels w/ table integrated (no panel-body) -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Not a valid document</h3>
        </div>
        <div class="panel-body">
          These files were parsed as valid YAML but they can't be imported.
          They are probably intended for other applications.
        </div>
          <table class="table">
            <thead>
              <tr> <th> Filename </th> <th> Reason </th> </tr>
            </thead>
            <tbody>
              <tr>
                <td>palindrome.yaml</td><td>missing <code>source code:</code> value</td>
              </tr>
              <tr>
                <td>match.yaml</td><td><code>source code:</code> value was not a string type</td>
              </tr>
            </tbody>
          </table>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">Not valid YAML</h4>
        </div>
         <table class="table">
           <thead>
             <tr> <th> Filename </th> <th> Syntax error </th> </tr>
           </thead>
           <tbody>
             <tr>
               <td>powers of two.yaml</td>
               <td>
         <pre>
can not read a block mapping entry; a multiline key may not be an implicit key at line 3, column 12:
start state: q0
           ^</pre>
               </td>
             </tr>
             <tr>
               <td>a very long filename says hello world.yaml</td>

               <td>
<pre>
bad indentation of a mapping entry at line 7, column 6:
    1: {R: q1}
     ^</pre>
              </td>
             </tr>
           </tbody>
         </table>
        </div>
        <div class="panel panel-default file-extension-panel">
          <div class="panel-heading">
            <h5 class="panel-title">Different file extension (not <code>.yaml</code>/<code>.yml</code>)</h5>
          </div>
          <div class="panel-body">
            <ul class="list-inline">
              <li>readme.md</li>
              <li>hello world.txt</li>
            </ul>
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-body">
            <strong>Select documents to import from <a href="#"><q>Sample machines</q></a></strong>
            <br><strong>Select documents to import from <q><a href="#">Sample machines</a></q></strong>
            <br><strong>Select documents from <q><a href="#">Sample machines</a></q> to import</strong>
            <br><strong>Select documents from <a href="#">https://gist.github.com/12345678901234567890</a> to import</strong>
            <br><strong>Select documents to import from <a href="#">https://gist.github.com/12345678901234567890</a></strong>
            <br><strong>Select documents to import</strong> from <a href="#">gist 12345678901234567890</a>
          </div>
        </div>
      </div>

      <!-- Import dialog -->
      <div data-toggle="tooltip" data-placement="bottom" data-trigger="hover"
      title="Import">
        <button type="button" class="btn btn-default navbar-btn" aria-label="Import"
        data-toggle="modal" data-target="#importButtonDialog">
          <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span>
        </button>
      </div>
      <div id="importButtonDialog" class="modal fade" tabindex="-1" role="dialog"
      aria-labelledby="importButtonDialogHeader">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title" id="importButtonDialogHeader">Import</h4>
            </div>
            <div class="modal-body">
              <h5>From GitHub gist</h5>
              <p>
                Enter a gist ID to import any eligible files.
                Import previously exported documents from a GitHub gist.
                Multiple documents can be imported at once from a gist.
                <!-- More than one document can be imported at a time. -->
              </p>
              <form class="form-inline">
                <label for="basic-url">Import from GitHub gist</label>
                <div class="input-group">
                  <span class="input-group-addon">https://gist.github.com/</span>
                  <input type="text" class="form-control" id="basic-url"
                  placeholder="gist ID" spellcheck="false">
                </div>
                <button type="submit" class="btn btn-default">Import</button>
              </form>
              <hr>
              <h5>From files</h5>
              <p>
                Choose one or more documents to import&hellip;
              </p>
              <p>
                &hellip;or paste a document's contents below.
              </p>
              <textarea class="form-control" rows="8" cols="40"></textarea>
              <button type="button" class="btn btn-default">Import</button>
            </div>
          </div>
        </div>
      </div>

    <button type="button" class="btn btn-default navbar-btn" aria-label="Import"
    data-toggle="modal" data-target="#importButtonDialog2">
      <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span>
    </button>
    <div id="importButtonDialog2" class="modal fade" tabindex="-1" role="dialog"
    aria-labelledby="importButtonDialogHeader2">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="importButtonDialogHeader2">Import</h4>
          </div>
          <div class="modal-body">
            <div class="panel panel-default">
              <div class="panel-heading">
                <h5 class="panel-title">From GitHub gist</h5>
              </div>
              <div class="panel-body">
                <form class="form-inline">
                  <div class="input-group">
                    <span class="input-group-addon">https://gist.github.com/</span>
                    <input type="text" size="22" class="form-control"
                    placeholder="gist ID" spellcheck="false"
                    pattern="[\da-fA-F]+" title="Hex digits (0–9, a–f)">
                  </div>
                  <button type="submit" class="btn btn-default">Import</button>
                </form>
                <span class="help-block">
                  If the gist contains multiple documents, a dialog will appear for you to confirm.
                </span>
              </div>
            </div>
            <div class="panel panel-default">
              <div class="panel-heading">
                <h5 class="panel-title">From files</h5>
              </div>
              <div class="panel-body">
                <p>Choose one or more files to import</p>
                <!-- <div class="form-inline">
                  <div class="form-group">
                    <input type="file" name="files" multiple class="well">
                  </div>
                  <button type="button" class="btn btn-default">Import</button>
                </div> -->
                <!-- <input type="file" name="files" multiple class="well well-sm">
                <button type="button" class="btn btn-default">Import</button> -->
                <div class="input-group">
                  <input type="file" name="files" multiple class="form-control">
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default">Import</button>
                  </span>
                </div>
                <p>
                  &hellip;or paste a document's contents below.
                </p>
                <div class="form-group">
                  <textarea class="form-control" rows="8" cols="40"></textarea>
                </div>
                <button type="button" class="btn btn-default">Import</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


      <script type="text/javascript">
      $(function() {
        'use strict';
        // Dialog
        $('#importDialog').find('.modal-body').html(
          '<p><strong>No GitHub gist exists with that ID.</strong>'
          + '<br>It’s possible the ID is incorrect, or the gist was deleted.</p>'
          + '<br>Requested URL: ' + '<a href="#">https://gist.github.com/example</a>'
        );
        // Table
        function demo() {
          var demoheaders = ['Filename', 'Size'];
          var demodata = [
            ['div3.yaml', '342 KB'],
            ['match.yaml', '8 KB'],
            ['add.yaml', '3 KB'],
            ['multiply.yaml', '4 KB'],
            ['palindrome.yaml', '20 KB']
          ];

          var container = d3.select('div.container');
          var table = container.append('table')
              .attr('class', 'table table-hover checkbox-table');
          var button = container.append('button')
              .attr('class', 'btn btn-default')
              .text('Display in table')
              .on('click', function () {
                // var data = jsyaml.safeLoad(textarea.property('value'));
                var data = jsyaml.safeLoad(editor.getValue());
                if (!(data instanceof Array)) {
                  alert('Data needs to be an array');
                  return;
                }
                ctable.setData(data);
              });
          // var textarea = container.append('textarea')
          //     .attr({
          //       cols: 60
          //       // class: 'form-control'
          //     });
          // textarea.property('value', jsyaml.safeDump(demodata));
          var editor = ace.edit(container
            .append('div').attr('class', 'form-control').node()
          );
          editor.setValue(jsyaml.safeDump(demodata));
          editor.session.setOptions({
            mode: 'ace/mode/yaml',
            tabSize: 2,
            useSoftTabs: true
          });
          editor.setOptions({
            minLines: 15,
            maxLines: 50
          });

          var ctable = new CheckboxTable({
            table: table,
            headers: demoheaders,
            data: demodata
          });
        }
        demo();
      });
      </script>
    </div>
  </body>
</html>
