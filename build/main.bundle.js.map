{"version":3,"sources":["webpack:///main.bundle.js","webpack:///./src/main.js","webpack:///external \"jQuery\"","webpack:///./src/sharing/format.js","webpack:///./src/storage.js","webpack:///external \"Promise\"","webpack:///./src/TMDocument.js","webpack:///./src/examples.js","webpack:///./src/parser.js","webpack:///./src/sharing/gist.js","webpack:///./src/sharing/import.js","webpack:///external \"ace\"","webpack:///external \"jsyaml\"","webpack:///./src/examples/_template.yaml","webpack:///./src/examples/binaryAdd.yaml","webpack:///./src/examples/binaryIncrement.yaml","webpack:///./src/examples/binaryMult.yaml","webpack:///./src/examples/busyBeaver3.yaml","webpack:///./src/examples/busyBeaver4.yaml","webpack:///./src/examples/copy1s.yaml","webpack:///./src/examples/divisibleBy3.yaml","webpack:///./src/examples/divisibleBy3Base10.yaml","webpack:///./src/examples/lengthMult.yaml","webpack:///./src/examples/matchBinaryStrings.yaml","webpack:///./src/examples/matchThreeLengths.yaml","webpack:///./src/examples/palindrome.yaml","webpack:///./src/examples/powersOfTwo.yaml","webpack:///./src/examples/repeat01.yaml","webpack:///./src/examples/unaryMult.yaml","webpack:///./src/DocumentMenu.js","webpack:///./src/TMDocumentController.js","webpack:///./src/TMSimulator.js","webpack:///^\\.\\/.*\\.yaml$","webpack:///./src/kbdshortcuts.js","webpack:///./src/sharing/CheckboxTable.js","webpack:///./src/sharing/FileReaderPromise.js","webpack:///./src/sharing/export-panel.js","webpack:///./src/sharing/import-panel.js","webpack:///external \"Clipboard\""],"names":["main","webpackJsonp_name_","module","exports","__webpack_require__","getId","id","document","getElementById","addAlertPane","type","html","insertAdjacentHTML","importDocument","obj","menu","duplicate","select","TMDocumentController","DocumentMenu","examples","toDocFragment","ace","$","config","loadModule","canUseLocalStorage","isIEUnder11","Function","isIOS","test","navigator","userAgent","window","MSStream","prop","importArgs","dialogNode","runImport","$importPanel","one","init","$dialog","gistIDForm","exportPanel","getCurrentDocument","controller","save","currentDocument","getIsSynced","bind","gistContainer","downloadContainer","copyContentsButton","textarea","querySelector","docGroup","createElement","label","appendChild","exampleGroup","list","map","prototype","optionFromDocument","group","storagePrefix","firsttimeDocID","duplicateDocument","newBlankDocument","newDocument","editor","insertSnippet","blankTemplate","loadEditorSource","onChange","doc","opts","setBackingDocument","forceLoadDocument","openDocument","refreshEditMenu","renameExample","wasExample","renameLink","deleteLink","isExample","textContent","addEventListener","removeAttribute","setAttribute","removeEventListener","$renameDialog","callback","forEach","item","e","preventDefault","modal","keyboard","focus","deleteDocument","discardReset","saveReset","renameBox","on","value","currentOption","text","newName","rename","getButton","container","sim","ed","parentNode","simulator","editorAlerts","run","step","reset","load","revert","setTheme","commands","addCommand","name","bindKey","mac","win","exec","session","setUseWrapMode","ev","saveCurrentDocID","error","event","returnValue","isReloading","addOutsideChangeListener","docID","getDocument","setTimeout","jQuery","mapKeys","mapping","input","output","Object","keys","fromKey","toKey","checkData","sourceCode","InvalidDocumentError","_","isString","message","this","stack","Error","jsyaml","docToYaml","positionTable","editorSourceCode","yamlToDoc","invert","stringifyDocument","flow","omitBy","x","update","mapValues","pos","fixed","y","partialRight","safeDump","flowLevel","lineWidth","noRefs","noCompatMode","parseDocument","safeLoad","defaults","px","py","create","constructor","YAMLException","isBrowserIEorEdge","mod","localStorage","setItem","removeItem","RAMStorage","freeze","length","key","n","getItem","hasOwnProperty","call","val","String","clear","KeyValueStorage","s","fromOwnWindow","hasFocus","read","write","remove","addStorageListener","listener","storageArea","removeStorageListener","Promise","TMDocument","preset","get","defineProperties","prefix","useFallbackGet","set","enumerable","proto","getPrototypeOf","desc","getOwnPropertyDescriptor","util","coalesce","truncateCoords","decimalPlaces","truncate","Math","round","multiplier","pow","result","pick","path","join","stringProp","store","propDescriptors","applyMaybe","parsePositionTable","stringifyPositionTable","dataKeys","copyFrom","other","IDFromNameStorageKey","string","re","matches","JSON","parse","stringify","requireExample","isExampleID","fromPairs","examplePairs","pair","hasID","TMSpecError","reason","details","parseSpec","str","info","detailsForBlank","suggestion","blank","startState","checkTableType","table","synonyms","parseSynonyms","parseTable","problemValue","actionVal","parseInstruction","synonym","stateObj","state","symbol","makeInstruction","move","checkTarget","instruct","parseInstructionString","parseInstructionObject","moveLeft","moveRight","badKey","every","TM","MoveHead","left","L","right","R","writeStr","defineProperty","code","showLoc","header","location","sentences","filter","identity","splice","promisifyAjax","xhr","resolve","reject","onCancel","then","jqXHR","textStatus","errorThrown","status","abort","getGist","gistID","ajax","url","dataType","accepts","createGist","payload","data","cancellation","decodeFormURLComponent","decodeURIComponent","replace","queryParams","queryString","decode","split","ImportDialog","node","titleNode","bodyNode","footerNode","cancelButtonNode","d3","append","attr","class","data-dismiss","__onClose","appendPanel","div","titleHTML","panel","appendListPanel","emptySelection","title","selectAll","enter","appendTablePanel","headers","each","d","td","listNondocuments","dialogBody","nondocs","disclosureTitle","isEmptyNonDocs","collapseId","href","role","data-toggle","otherError","filename","errorString","classed","badDoc","badYAML","tooLarge","wrongType","parseFiles","sizelimit","files","docfiles","file","search","push","truncated","size","content","FileReaderPromise","readAsText","format","tuple","documentFiles","nonDocumentFiles","showSizeKB","ceil","toFixed","pickMultiple","args","citeNode","dialog","importDocuments","p","createTextNode","ctable","CheckboxTable","importButton","property","names","getCheckedValues","has","disabled","isCheckedEmpty","pickNone","citeLink","body","joinNodes","nodes","createDocumentFragment","wrapTag","tagName","tag","gistDescriptionLink","link","externalLink","description","target","importCommon","MAX_FILESIZE","filesPromise","setBodyChildNodes","values","toArray","show","promise","undefined","parsed","close","docs","concat","reverse","messageForError","waitForDialog","onClose","cancel","createElementHTML","innerHTML","element","statusText","pre","removeQuery","history","replaceState","pathname","params","substring","importGist","assign","empty","backdrop","isEmpty","importLocalFiles","TypeError","makeOption","__storagePrefix","doclist","DocumentList","render","selectDocID","getSavedCurrentDocID","self","option","newOption","storageKey","readList","findOptionByDocID","replaceChild","selected","datum","options","selectedIndex","opt","currentDocID","entry","exit","insert","__prepend","insertBefore","firstChild","index","didDeleteEntry","deleteIndex","newID","Date","now","add","__list","unshift","writeList","deleted","containers","buttons","TMSimulator","edit","setOptions","mode","tabSize","useSoftTabs","minLines","maxLines","$blockScrolling","Infinity","editorButtons","revertEditorSource","__document","writable","aceAnnotationFromYAMLException","row","mark","line","column","parser","UndoManager","require","keepUndoHistory","diagramSource","editorSource","setEditorValue","setUndoManager","isSynced","showCorruptDiagramAlert","hasValidDiagram","getValue","setValue","setAlertErrors","errors","alerts","annot","lineNum","gotoLine","setAnnotations","setLoadButtonSuccess","didSucceed","btn-success","btn-primary","Boolean","__isSynced","removeListener","enquote","revertName","trim","isNewDiagram","machine","isRunning","all","rebindStepRun","stepButton","runButton","runHTML","pauseHTML","onHaltedChange","isHalted","onRunningChange","watchInit","oldval","TMViz","__sourceCode","stateviz","force","stop","spec","posTable","__machine","rebindButtons","htmlForRunButton","htmlForPauseButton","enable","b","webpackContext","req","webpackContextResolve","./_template.yaml","./binaryAdd.yaml","./binaryIncrement.yaml","./binaryMult.yaml","./busyBeaver3.yaml","./busyBeaver4.yaml","./copy1s.yaml","./divisibleBy3.yaml","./divisibleBy3Base10.yaml","./lengthMult.yaml","./matchBinaryStrings.yaml","./matchThreeLengths.yaml","./palindrome.yaml","./powersOfTwo.yaml","./repeat01.yaml","./unaryMult.yaml","renderTable","tbody","tr","abbreviateKey","keylistToHTML","createGetKeylist","platform","altToOption","getKeylist","entries","head","array","headerRow","headerCheckbox","getCheckboxes","checked","box","refresh","setHeaders","setData","th","order","headerBox","indeterminate","boxes","total","arguments","reader","FileReader","apply","addSelectOnFocus","showTransientTooltip","$element","tooltip","showCopiedTooltip","placement","generateGist","button","contents","oldButtonText","public","response","showGeneratedGist","responseJSON","alert","urlInput","createGenerateGistButton","createDownloadLink","encodeURIComponent","download","canUseDownloadAttribute","className","setupDialog","gistPromise","$alert","prependTo","find","clipboard","Clipboard","trigger","clearSelection","destroy","addClass","canUseCopyCommand","cleanup","setSelectionRange","externalHost","queryCommandSupported","hideDialog","nextDialog","classList","contains","docimport","panelBody","fileInput","importFilesButton","importContentsButton","style","position","importDocumentContents","createCloseIcon","aria-label","showImportContentOutcome","showErrorDetails","detailsContainer","statusContainer","width","top","transform","statusSummary","transition","delay","duration"],"mappings":"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","file":"main.bundle.js","sourcesContent":["var main =\nwebpackJsonp_name_([1],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// main entry point for index.html.\n\t// important: make sure to coordinate variables and elements between the HTML and JS\n\t'use strict';\n\t\n\t/* eslint-env browser */\n\tvar TMDocumentController = __webpack_require__(38),\n\t    DocumentMenu = __webpack_require__(37),\n\t    examples = __webpack_require__(12),\n\t    toDocFragment = __webpack_require__(3).toDocFragment;\n\tvar ace = __webpack_require__(17);\n\tvar $ = __webpack_require__(4); // for Bootstrap modal dialog events\n\t\n\t// load up front so going offline doesn't break anything\n\t// (for snippet placeholders, used by \"New blank document\")\n\tace.config.loadModule('ace/ext/language_tools');\n\t\n\tfunction getId(id) { return document.getElementById(id); }\n\t\n\tfunction addAlertPane(type, html) {\n\t  getId('diagram-column').insertAdjacentHTML('afterbegin',\n\t    '<div class=\"alert alert-'+type+' alert-dismissible\" role=\"alert\">' +\n\t    '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">×</span></button>' +\n\t    html +\n\t    '</div>');\n\t}\n\t\n\t\n\t//////////////////////////\n\t// Compatibility Checks //\n\t//////////////////////////\n\t\n\t(function () {\n\t  // Warn when falling back to RAM-only storage\n\t  // NB. This mainly covers local storage errors and Safari's Private Browsing.\n\t  if (!__webpack_require__(7).canUseLocalStorage) {\n\t    addAlertPane('info', '<p>Local storage is unavailable. ' +\n\t      'Your browser could be in Private Browsing mode, or it might not support <a href=\"http://caniuse.com/#feat=namevalue-storage\" target=\"_blank\">local storage</a>.</p>' +\n\t      '<strong>Any changes will be lost after leaving the webpage.</strong>');\n\t  }\n\t\n\t  /*\n\t  Warn for IE 10 and under, which misbehave and lack certain features.\n\t  Examples:\n\t    • IE 9 and under don't support .classList.\n\t    • IE 10's \"storage event is fired even on the originating document where it occurred.\"\n\t      http://caniuse.com/#feat=namevalue-storage\n\t  */\n\t\n\t  // Detect IE 10 and under (http://stackoverflow.com/a/16135889)\n\t  var isIEUnder11 = new Function('/*@cc_on return @_jscript_version; @*/')() < 11;\n\t  if (isIEUnder11) {\n\t    addAlertPane('warning',\n\t      '<p><strong>Your <a href=\"http://whatbrowser.org\" target=\"_blank\">web browser</a> is out of date</strong> and does not support some features used by this program.<br>' +\n\t      '<em>The page may not work correctly, and data may be lost.</em></p>' +\n\t      'Please update your browser, or use another browser such as <a href=\"http://www.google.com/chrome/browser/\" target=\"_blank\">Chrome</a> or <a href=\"http://getfirefox.com\" target=\"_blank\">Firefox</a>.');\n\t  }\n\t\n\t  // Warn about iOS local storage volatility\n\t  $(function () {\n\t    // Detect iOS (http://stackoverflow.com/a/9039885)\n\t    var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\t    if (isIOS) {\n\t      getId('misc-tips-list').insertAdjacentHTML('afterbegin',\n\t        '<li><strong class=\"text-warning\">Important note for iOS</strong>: ' +\n\t        'iOS saves browser local storage in the cache folder, which is <strong>not backed up</strong>, and is ' +\n\t        '<q cite=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API#Browser_compatibility\"><strong>subject to occasional clean up</strong>, ' +\n\t        'at the behest of the OS, typically if space is short.</q></li>');\n\t    }\n\t  });\n\t}());\n\t\n\t\n\t/////////////////////\n\t// Import & Export //\n\t/////////////////////\n\t\n\tfunction importDocument(obj) {\n\t  // duplicate data into the menu, then open it.\n\t  menu.duplicate(obj, {select: true, type: 'open'});\n\t}\n\t\n\t$(function () {\n\t  // Enable buttons now that handlers are ready\n\t  $('.tm-needsready').prop('disabled', false);\n\t\n\t  // Run import from URL query (if any)\n\t  var importArgs = {\n\t    dialogNode: getId('importDialog'),\n\t    importDocument: importDocument\n\t  };\n\t  __webpack_require__(15).runImport(importArgs);\n\t  // Init import dialog\n\t  var $importPanel = $('#importPanel');\n\t  $importPanel.one('show.bs.modal', function () {\n\t    __webpack_require__(45).init({\n\t      $dialog: $importPanel,\n\t      gistIDForm: getId('gistIDForm'),\n\t      importArgs: importArgs\n\t    });\n\t  });\n\t  // Init export dialog\n\t  var exportPanel = getId('exportPanel');\n\t  __webpack_require__(44).init({\n\t    $dialog: $(exportPanel),\n\t    getCurrentDocument: function () {\n\t      controller.save(); // IMPORTANT: save changes, otherwise data model is out of date\n\t      return menu.currentDocument;\n\t    },\n\t    getIsSynced: controller.getIsSynced.bind(controller),\n\t    gistContainer: getId('shareGistContainer'),\n\t    downloadContainer: getId('exportDownloadContainer'),\n\t    copyContentsButton: getId('copyContentsButton'),\n\t    textarea: exportPanel.querySelector('textarea')\n\t  });\n\t});\n\t\n\t\n\t///////////////////\n\t// Document List //\n\t///////////////////\n\t\n\tvar menu = (function () {\n\t  var select = document.getElementById('tm-doc-menu');\n\t  // Group: Documents\n\t  var docGroup = document.createElement('optgroup');\n\t  docGroup.label = 'Documents';\n\t  select.appendChild(docGroup);\n\t  // Group: Examples\n\t  var exampleGroup = document.createElement('optgroup');\n\t  exampleGroup.label = 'Examples';\n\t  exampleGroup.appendChild(toDocFragment(examples.list.map(\n\t    DocumentMenu.prototype.optionFromDocument)));\n\t  select.appendChild(exampleGroup);\n\t\n\t  return new DocumentMenu({\n\t    menu: select,\n\t    group: docGroup,\n\t    storagePrefix: 'tm.docs',\n\t    firsttimeDocID: examples.firsttimeDocID\n\t  });\n\t})();\n\t\n\t\n\t/////////////////\n\t// \"Edit\" Menu //\n\t/////////////////\n\t\n\t(function () {\n\t  menu.onChange = function (doc, opts) {\n\t    switch (opts && opts.type) {\n\t      case 'duplicate':\n\t        controller.setBackingDocument(doc);\n\t        break;\n\t      case 'delete':\n\t        controller.forceLoadDocument(doc);\n\t        break;\n\t      default:\n\t        controller.openDocument(doc);\n\t    }\n\t    refreshEditMenu();\n\t  };\n\t\n\t  // Refresh the \"Edit\" menu items depending on document vs. example.\n\t  var refreshEditMenu = (function () {\n\t    var renameLink = document.querySelector('[data-target=\"#renameDialog\"]');\n\t    var deleteLink = document.querySelector('[data-target=\"#deleteDialog\"]');\n\t    var wasExample;\n\t    function renameExample() {\n\t      // duplicate, then rename the duplicate.\n\t      // how it works: switch to duplicate document ->\n\t      //   refreshEditMenu() enables rename dialog -> event bubbles up -> dialog opens.\n\t      // this might be the simplest way; Event.stopPropagation leaves the dropdown hanging.\n\t      duplicateDocument();\n\t    }\n\t\n\t    return function () {\n\t      var isExample = menu.currentDocument.isExample;\n\t      if (wasExample !== isExample) {\n\t        if (!isExample) {\n\t          renameLink.textContent = 'Rename…';\n\t          renameLink.removeEventListener('click', renameExample);\n\t          renameLink.setAttribute('data-toggle', 'modal');\n\t          deleteLink.textContent = 'Delete…';\n\t          deleteLink.setAttribute('data-target', '#deleteDialog');\n\t        } else {\n\t          renameLink.textContent = 'Rename a copy…';\n\t          renameLink.addEventListener('click', renameExample);\n\t          renameLink.removeAttribute('data-toggle');\n\t          deleteLink.textContent = 'Reset this example…';\n\t          deleteLink.setAttribute('data-target', '#resetExampleDialog');\n\t        }\n\t        wasExample = isExample;\n\t      }\n\t    };\n\t  }());\n\t  refreshEditMenu();\n\t\n\t  // only swap out the storage backing; don't affect views or undo history\n\t  function duplicateDocument() {\n\t    controller.save();\n\t    menu.duplicate(menu.currentDocument, {select: true});\n\t  }\n\t\n\t  function newBlankDocument() {\n\t    menu.newDocument({select: true});\n\t    // load up starter template\n\t    if (controller.editor.insertSnippet) { // async loaded\n\t      controller.editor.insertSnippet(examples.blankTemplate);\n\t      controller.loadEditorSource();\n\t    }\n\t  }\n\t\n\t  var $renameDialog = $(getId('renameDialog'));\n\t  [{id: 'tm-doc-action-duplicate', callback: duplicateDocument},\n\t  {id: 'tm-doc-action-newblank', callback: newBlankDocument}\n\t  ].forEach(function (item) {\n\t    document.getElementById(item.id).addEventListener('click', function (e) {\n\t      e.preventDefault();\n\t      item.callback(e);\n\t\n\t      $renameDialog.modal({keyboard: false})\n\t        .one('hidden.bs.modal', function () {\n\t          controller.editor.focus();\n\t        });\n\t    });\n\t  });\n\t}());\n\t\n\t\n\t/////////////\n\t// Dialogs //\n\t/////////////\n\t\n\t(function () {\n\t  // Rename\n\t  var $renameDialog = $(getId('renameDialog'));\n\t  var renameBox = getId('renameDialogInput');\n\t  $renameDialog\n\t    .on('show.bs.modal', function () {\n\t      renameBox.value = menu.currentOption.text;\n\t    })\n\t    .on('shown.bs.modal', function () {\n\t      renameBox.select();\n\t    })\n\t    // NB. remember data-keyboard=\"false\" on the triggering element,\n\t    // to prevent closing with Esc and causing a save.\n\t    // remark: an exception thrown on 'hide' prevents the dialog from closing,\n\t    // so save during 'hidden' instead.\n\t    .on('hidden.bs.modal', function () {\n\t      var newName = renameBox.value;\n\t      if (menu.currentOption.text !== newName) {\n\t        menu.rename(newName);\n\t      }\n\t      renameBox.value = '';\n\t    });\n\t  document.getElementById('renameDialogForm').addEventListener('submit', function (e) {\n\t    e.preventDefault();\n\t    $renameDialog.modal('hide');\n\t  });\n\t\n\t  // Delete\n\t  function deleteDocument() {\n\t    menu.delete();\n\t  }\n\t  document.getElementById('tm-doc-action-delete').addEventListener('click', deleteDocument);\n\t\n\t  // Reset Example\n\t  function discardReset() {\n\t    menu.delete();\n\t    // load manually since example stays and selection doesn't change\n\t    controller.forceLoadDocument(menu.currentDocument);\n\t  }\n\t  function saveReset() {\n\t    menu.duplicate(menu.currentDocument, {select: false});\n\t    discardReset();\n\t  }\n\t  document.getElementById('tm-doc-action-resetdiscard').addEventListener('click', discardReset);\n\t  document.getElementById('tm-doc-action-resetsave').addEventListener('click', saveReset);\n\t}());\n\t\n\t////////////////\n\t// Controller //\n\t////////////////\n\t\n\tvar controller = (function () {\n\t  function getButton(container, type) {\n\t    return container.querySelector('button.tm-' + type);\n\t  }\n\t  var editor = document.getElementById('editor-container');\n\t  // button containers\n\t  var sim = document.getElementById('controls-container');\n\t  var ed = editor.parentNode;\n\t\n\t  return new TMDocumentController({\n\t    simulator: document.getElementById('machine-container'),\n\t    editorAlerts: document.getElementById('editor-alerts-container'),\n\t    editor: editor\n\t  }, {\n\t    simulator: {\n\t      run: getButton(sim, 'run'),\n\t      step: getButton(sim, 'step'),\n\t      reset: getButton(sim, 'reset')\n\t    },\n\t    editor: {\n\t      load: getButton(ed, 'editor-load'),\n\t      revert: getButton(ed, 'editor-revert')\n\t    }\n\t  }, menu.currentDocument);\n\t}());\n\t\n\tcontroller.editor.setTheme('ace/theme/chrome');\n\tcontroller.editor.commands.addCommand({\n\t  name: 'save',\n\t  bindKey: { mac: 'Cmd-S', win: 'Ctrl-S' },\n\t  exec: function () {\n\t    controller.loadEditorSource();\n\t  }\n\t});\n\tcontroller.editor.session.setUseWrapMode(true);\n\t$(function () {\n\t  try {\n\t    __webpack_require__(41).main(controller.editor.commands,\n\t      getId('kbdShortcutTable')\n\t    );\n\t  } catch (e) {\n\t    /* */\n\t  }\n\t});\n\t\n\twindow.addEventListener('beforeunload', function (ev) {\n\t  try {\n\t    controller.save();\n\t    menu.saveCurrentDocID();\n\t  } catch (error) {\n\t    addAlertPane('warning',\n\t      '<h4>The current document could not be saved.</h4>'+\n\t      '<p>It’s likely that the <a href=\"https://en.wikipedia.org/wiki/Web_storage#Storage_size\" target=\"_blank\">local storage quota</a> was exceeded. ' +\n\t      'Try downloading a copy of this document, then deleting other documents to make space.</p>');\n\t    return (ev || window.event).returnValue =\n\t      'There is not enough space left to save the current document.';\n\t  }\n\t});\n\t\n\t// Keep the current document in sync across tabs/windows\n\twindow.addEventListener('blur', function () {\n\t  // One tab saves the data...\n\t  controller.save();\n\t});\n\t(function () {\n\t  // ...and the other tab loads it.\n\t  var isReloading = false;\n\t  __webpack_require__(9).addOutsideChangeListener(function (docID, prop) {\n\t    if (docID === controller.getDocument().id && prop !== 'name' && !isReloading) {\n\t      // Batch together property changes into one reload\n\t      isReloading = true;\n\t      setTimeout(function () {\n\t        isReloading = false;\n\t        // Preserve undo history\n\t        controller.forceLoadDocument(controller.getDocument(), true);\n\t\n\t      }, 100);\n\t    }\n\t  });\n\t}());\n\t\n\t// For interaction/debugging\n\texports.controller = controller;\n\n\n/***/ },\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = jQuery;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar jsyaml = __webpack_require__(18),\n\t    _ = __webpack_require__(1);\n\t\n\t// Document Serialization\n\t\n\tvar docToYaml = {\n\t  name: 'name',\n\t  sourceCode: 'source code',\n\t  positionTable: 'positions',\n\t  editorSourceCode: 'editor contents'\n\t};\n\tvar yamlToDoc = _.invert(docToYaml);\n\t\n\t// like _.mapKeys, but only using the keys specified in a mapping object.\n\t// {[key: string] -> string} -> ?Object -> Object\n\tfunction mapKeys(mapping) {\n\t  return function (input) {\n\t    var output = {};\n\t    if (input != null) {\n\t      Object.keys(mapping).forEach(function (fromKey) {\n\t        var toKey = mapping[fromKey];\n\t        output[toKey] = input[fromKey];\n\t      });\n\t    }\n\t    return output;\n\t  };\n\t}\n\t\n\t// we want parseDocument . stringifyDocument = identity, up to null == undefined.\n\t\n\t/**\n\t * Serialize a document.\n\t * For each state node position, only .x, .y, and .fixed are saved.\n\t * .fixed is omitted if true (its default value).\n\t * @param  {TMDocument} doc document to serialize\n\t * @return {string}\n\t */\n\tvar stringifyDocument = _.flow(\n\t  mapKeys(docToYaml),\n\t  _.omitBy(function (x) { return x == null; }),\n\t  _.update('positions', _.mapValues(function (pos) {\n\t    return pos.fixed\n\t      ? {x: pos.x, y: pos.y}\n\t      : {x: pos.x, y: pos.y, fixed: false};\n\t  })),\n\t  // NB. lodash/fp/partialRight takes an array of arguments.\n\t  _.partialRight(jsyaml.safeDump, [{\n\t    flowLevel: 2,       // positions: one state per line\n\t    lineWidth: -1,      // don't wrap lines\n\t    noRefs: true,       // no aliases/references are used\n\t    noCompatMode: true  // use y: instead of 'y':\n\t  }])\n\t);\n\t\n\t/**\n\t * Deserialize a document.\n\t * State positions' .px and .py are optional and default to .x and .y.\n\t * .fixed defaults to true.\n\t * @param  {string} str    serialized document\n\t * @return {Object}        data usable in TMDocument.copyFrom()\n\t * @throws {YAMLException} on YAML syntax error\n\t * @throws {TypeError}     when missing \"source code\" string property\n\t */\n\tvar parseDocument = _.flow(\n\t  jsyaml.safeLoad,\n\t  _.update('positions', _.mapValues(function (pos) {\n\t    // NB. lodash/fp/defaults is swapped: 2nd takes precedence\n\t    return _.defaults({px: pos.x, py: pos.y, fixed: true}, pos);\n\t  })),\n\t  mapKeys(yamlToDoc),\n\t  checkData\n\t);\n\t\n\t// throw if \"source code\" attribute is missing or not a string\n\tfunction checkData(obj) {\n\t  if (obj == null || obj.sourceCode == null) {\n\t    throw new InvalidDocumentError('The “source code:” value is missing');\n\t  } else if (!_.isString(obj.sourceCode)) {\n\t    throw new InvalidDocumentError('The “source code:” value needs to be of type string');\n\t  }\n\t  return obj;\n\t}\n\t\n\t// for valid YAML that is not valid as a document\n\tfunction InvalidDocumentError(message) {\n\t  this.name = 'InvalidDocumentError';\n\t  this.message = message || 'Invalid document';\n\t  this.stack = (new Error()).stack;\n\t}\n\tInvalidDocumentError.prototype = Object.create(Error.prototype);\n\tInvalidDocumentError.prototype.constructor = InvalidDocumentError;\n\t\n\texports.stringifyDocument = stringifyDocument;\n\texports.parseDocument = parseDocument;\n\texports.InvalidDocumentError = InvalidDocumentError;\n\t\n\t// Re-exports\n\texports.YAMLException = jsyaml.YAMLException;\n\n\n/***/ },\n/* 6 */,\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar isBrowserIEorEdge = __webpack_require__(3).isBrowserIEorEdge;\n\t/* global localStorage:false, window:false */\n\t\n\t///////////////////////\n\t// Key-Value Storage //\n\t///////////////////////\n\t\n\tvar canUseLocalStorage = (function () {\n\t  // from modernizr v3.3.1 (modernizr.com)\n\t  var mod = 'modernizr';\n\t  try {\n\t    localStorage.setItem(mod, mod);\n\t    localStorage.removeItem(mod);\n\t    return true;\n\t  } catch (e) {\n\t    return false;\n\t  }\n\t})();\n\t\n\t// RAM-only fallback\n\tvar RAMStorage = (function () {\n\t  var obj = {};\n\t  return Object.freeze({\n\t    get length() { return Object.keys(obj).length; },\n\t    key: function (n) { return (n in Object.keys(obj)) ? Object.keys(obj)[n] : null; },\n\t    getItem: function (key) { return {}.hasOwnProperty.call(obj, key) ? obj[key] : null; },\n\t    setItem: function (key, val) { obj[key] = String(val); },\n\t    removeItem: function (key) { delete obj[key]; },\n\t    clear: function () { obj = {}; }\n\t  });\n\t})();\n\t\n\tvar KeyValueStorage = (function () {\n\t  var s = canUseLocalStorage ? localStorage : RAMStorage;\n\t\n\t  // workaround IE/Edge firing events on its own window\n\t  var fromOwnWindow = isBrowserIEorEdge\n\t    ? function () { return window.document.hasFocus(); }\n\t    : function () { return false; };\n\t\n\t  return {\n\t    read  : s.getItem.bind(s),\n\t    write : s.setItem.bind(s),\n\t    remove: s.removeItem.bind(s),\n\t    // Registers a listener for StorageEvents from other tabs/windows.\n\t    addStorageListener: canUseLocalStorage\n\t      ? function (listener) {\n\t        window.addEventListener('storage', function (e) {\n\t          if (fromOwnWindow()) {\n\t            return;\n\t          }\n\t          if (e.storageArea === localStorage) {\n\t            listener(e);\n\t          }\n\t        });\n\t      }\n\t      : function () {},\n\t    removeStorageListener: canUseLocalStorage\n\t      ? window.removeEventListener.bind(window, 'storage')\n\t      : function () {}\n\t  };\n\t})();\n\t\n\t\n\texports.canUseLocalStorage = canUseLocalStorage;\n\texports.KeyValueStorage = KeyValueStorage;\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports = Promise;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar KeyValueStorage = __webpack_require__(7).KeyValueStorage,\n\t    examples = __webpack_require__(12),\n\t    util = __webpack_require__(3),\n\t    _ = __webpack_require__(1);\n\t\n\t/**\n\t * Document model (storage).\n\t * @param {string} docID Each document ID in a key-value store should be unique.\n\t *                       An ID is typically a timestamp. It should not contain '.'.\n\t */\n\tfunction TMDocument(docID) {\n\t  var preset = examples.get(docID);\n\t  Object.defineProperties(this, {\n\t    id:     { value: docID },\n\t    prefix: { value: 'doc.' + docID },\n\t    isExample: { value: preset ? true : false }\n\t  });\n\t  // fall back to reading presets for example documents\n\t  if (preset) {\n\t    Object.defineProperties(this, {\n\t      sourceCode: useFallbackGet(preset, this, 'sourceCode'),\n\t      // names are read-only\n\t      positionTable: useFallbackGet(preset, this, 'positionTable'),\n\t      name: {\n\t        get: function () { return preset.name; },\n\t        set: function () {}, // don't err when removing (set = null)\n\t        enumerable: true\n\t      }\n\t    });\n\t  }\n\t}\n\t\n\tfunction useFallbackGet(preset, obj, prop) {\n\t  var proto = Object.getPrototypeOf(obj);\n\t  var desc = Object.getOwnPropertyDescriptor(proto, prop);\n\t  var get = desc.get;\n\t  desc.get = function () {\n\t    return util.coalesce(get.call(obj), preset[prop]);\n\t  };\n\t  return desc;\n\t}\n\t\n\t// internal method.\n\tTMDocument.prototype.path = function (path) {\n\t  return [this.prefix, path].join('.');\n\t};\n\t\n\t(function () {\n\t  var store = KeyValueStorage;\n\t  var read = store.read.bind(store);\n\t  var write = function (key, val) {\n\t    if (val != null) {\n\t      store.write(key, val);\n\t    } else {\n\t      store.remove(key);\n\t    }\n\t  };\n\t  // var remove = store.remove.bind(store);\n\t  function stringProp(path) {\n\t    return {\n\t      get: function () { return read(this.path(path)); },\n\t      set: function (val) { write(this.path(path), val); },\n\t      enumerable: true\n\t    };\n\t  }\n\t\n\t  var propDescriptors = {\n\t    sourceCode: stringProp('diagram.sourceCode'),\n\t    positionTable: {\n\t      get: function () {\n\t        return util.applyMaybe(parsePositionTable,\n\t          read(this.path('diagram.positions')));\n\t      },\n\t      set: function (val) {\n\t        write(this.path('diagram.positions'),\n\t          util.applyMaybe(stringifyPositionTable, val));\n\t      },\n\t      enumerable: true\n\t    },\n\t    editorSourceCode: stringProp('editor.sourceCode'),\n\t    name: stringProp('name')\n\t  };\n\t  Object.defineProperties(TMDocument.prototype, propDescriptors);\n\t  TMDocument.prototype.dataKeys = Object.keys(propDescriptors);\n\t})();\n\t\n\t// IDEA: bypass extra parse & stringify cycle for positions\n\tTMDocument.prototype.copyFrom = function (other) {\n\t  this.dataKeys.forEach(function (key) {\n\t    this[key] = other[key];\n\t  }, this);\n\t  return this;\n\t};\n\t\n\tTMDocument.prototype.delete = function () {\n\t  this.copyFrom({});\n\t};\n\t\n\t// Cross-tab/window storage sync\n\t\n\t/**\n\t * Checks whether a storage key is for a document's name.\n\t * @return {?string} The document ID if true, otherwise null.\n\t */\n\tTMDocument.IDFromNameStorageKey = function (string) {\n\t  var result = /^doc\\.([^.]+)\\.name$/.exec(string);\n\t  return result && result[1];\n\t};\n\t\n\t/**\n\t * Registers a listener for document changes caused by other tabs/windows.\n\t * The listener receives the document ID and the property name that changed.\n\t * @param {Function} listener\n\t */\n\tTMDocument.addOutsideChangeListener = function (listener) {\n\t  var re = /^doc\\.([^.]+)\\.(.+)$/;\n\t\n\t  KeyValueStorage.addStorageListener(function (e) {\n\t    var matches = re.exec(e.key);\n\t    if (matches) {\n\t      listener(matches[1], matches[2]);\n\t    }\n\t  });\n\t};\n\t\n\t/////////////////////////\n\t// Position table JSON //\n\t/////////////////////////\n\t\n\t// JSON -> Object\n\tvar parsePositionTable = JSON.parse;\n\t\n\t// PositionTable -> JSON\n\tvar stringifyPositionTable = _.flow(\n\t  _.mapValues(truncateCoords(2)),\n\t  JSON.stringify\n\t);\n\t\n\t// Truncate .x .y .px .py to 2 decimal places, to save space.\n\tfunction truncateCoords(decimalPlaces) {\n\t  var multiplier = Math.pow(10, decimalPlaces);\n\t  function truncate(value) {\n\t    return Math.round(value * multiplier)/multiplier;\n\t  }\n\t\n\t  return function (val) {\n\t    var result =  _(val).pick(['x','y','px','py']).mapValues(truncate).value();\n\t    result.fixed = val.fixed;\n\t    return result;\n\t  };\n\t}\n\t\n\tmodule.exports = TMDocument;\n\n\n/***/ },\n/* 10 */,\n/* 11 */,\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar parseDocument = __webpack_require__(5).parseDocument;\n\tvar fromPairs = __webpack_require__(1).fromPairs;\n\t\n\t\n\tfunction requireExample(name) {\n\t  return __webpack_require__(40)(\"./\" + name + '.yaml');\n\t}\n\t\n\tvar examplePairs = [\n\t  'repeat01',\n\t  'binaryIncrement',\n\t  'divisibleBy3',\n\t  'copy1s',\n\t  'divisibleBy3Base10',\n\t  'matchThreeLengths',\n\t  'matchBinaryStrings',\n\t  'palindrome',\n\t  'busyBeaver3',\n\t  'busyBeaver4',\n\t  'powersOfTwo',\n\t  'lengthMult',\n\t  'binaryAdd',\n\t  'unaryMult',\n\t  'binaryMult'\n\t].map(function (id) {\n\t  // parse each string into a document\n\t  var doc = parseDocument(requireExample(id));\n\t  doc.id = id;\n\t\n\t  return [id, doc];\n\t});\n\tvar examples = Object.freeze(fromPairs(examplePairs));\n\t\n\t\n\tfunction isExampleID(docID) {\n\t  return {}.hasOwnProperty.call(examples, docID);\n\t}\n\t\n\tfunction get(docID) {\n\t  return isExampleID(docID) ? examples[docID] : null;\n\t}\n\t\n\tvar list = examplePairs.map(function (pair) { return pair[1]; });\n\t\n\t\n\texports.hasID = isExampleID;\n\texports.get = get;\n\texports.list = list;\n\texports.firsttimeDocID = 'binaryIncrement';\n\texports.blankTemplate = requireExample('_template');\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar TM = __webpack_require__(11),\n\t    jsyaml = __webpack_require__(18),\n\t    _ = __webpack_require__(6);\n\t\n\t/**\n\t * Thrown when parsing a string that is valid as YAML but invalid\n\t * as a machine specification.\n\t *\n\t * Examples: unrecognized synonym, no start state defined,\n\t * transitioning to an undeclared state.\n\t *\n\t * A readable message is generated based on the details (if any) provided.\n\t * @param {string} reason  A readable error code.\n\t *   As an error code, this should be relatively short and not include runtime values.\n\t * @param {?Object} details Optional details. Possible keys:\n\t *                          problemValue, state, key, synonym, info, suggestion\n\t */\n\tfunction TMSpecError(reason, details) {\n\t  this.name = 'TMSpecError';\n\t  this.stack = (new Error()).stack;\n\t\n\t  this.reason = reason;\n\t  this.details = details || {};\n\t}\n\tTMSpecError.prototype = Object.create(Error.prototype);\n\tTMSpecError.prototype.constructor = TMSpecError;\n\t\n\t// generate a formatted description in HTML\n\tObject.defineProperty(TMSpecError.prototype, 'message', {\n\t  get: function () {\n\t    var header = this.reason;\n\t    var details = this.details;\n\t\n\t    function code(str) { return '<code>' + str + '</code>'; }\n\t    function showLoc(state, symbol, synonym) {\n\t      if (state != null) {\n\t        if (symbol != null) {\n\t          return ' in the transition from state ' + code(state) + ' and symbol ' + code(symbol);\n\t        } else {\n\t          return ' for state ' + code(state);\n\t        }\n\t      } else if (synonym != null) {\n\t        return ' in the definition of synonym ' + code(synonym);\n\t      }\n\t      return '';\n\t    }\n\t    var problemValue = details.problemValue ? ' ' + code(details.problemValue) : '';\n\t    var location = showLoc(details.state, details.symbol, details.synonym);\n\t    var sentences = ['<strong>' + header + problemValue + '</strong>' + location\n\t      , details.info, details.suggestion]\n\t      .filter(_.identity)\n\t      .map(function (s) { return s + '.'; });\n\t    if (location) { sentences.splice(1, 0, '<br>'); }\n\t    return sentences.join(' ');\n\t  },\n\t  enumerable: true\n\t});\n\t\n\t// type TransitionTable = {[key: string]: ?{[key: string]: string} }\n\t// type TMSpec = {blank: string, start state: string, table: TransitionTable}\n\t\n\t// IDEA: check with flow (flowtype.org)\n\t// throws YAMLException on YAML syntax error\n\t// throws TMSpecError for an invalid spec (eg. no start state, transitioning to an undefined state)\n\t// string -> TMSpec\n\tfunction parseSpec(str) {\n\t  var obj = jsyaml.safeLoad(str);\n\t  // check for required object properties.\n\t  // auto-convert .blank and 'start state' to string, for convenience.\n\t  if (obj == null) { throw new TMSpecError('The document is empty',\n\t    {info: 'Every Turing machine requires a <code>blank</code> tape symbol,' +\n\t    ' a <code>start state</code>, and a transition <code>table</code>'}); }\n\t  var detailsForBlank = {suggestion:\n\t    'Examples: <code>blank: \\' \\'</code>, <code>blank: \\'0\\'</code>'};\n\t  if (obj.blank == null) {\n\t    throw new TMSpecError('No blank symbol was specified', detailsForBlank);\n\t  }\n\t  obj.blank = String(obj.blank);\n\t  if (obj.blank.length !== 1) {\n\t    throw new TMSpecError('The blank symbol must be a string of length 1', detailsForBlank);\n\t  }\n\t  obj.startState = obj['start state'];\n\t  delete obj['start state'];\n\t  if (obj.startState == null) {\n\t    throw new TMSpecError('No start state was specified',\n\t    {suggestion: 'Assign one using <code>start state: </code>'});\n\t  }\n\t  obj.startState = String(obj.startState);\n\t  // parse synonyms and transition table\n\t  checkTableType(obj.table); // parseSynonyms assumes a table object\n\t  var synonyms = parseSynonyms(obj.synonyms, obj.table);\n\t  obj.table = parseTable(synonyms, obj.table);\n\t  // check for references to non-existent states\n\t  if (!(obj.startState in obj.table)) {\n\t    throw new TMSpecError('The start state has to be declared in the transition table');\n\t  }\n\t\n\t  return obj;\n\t}\n\t\n\tfunction checkTableType(val) {\n\t  if (val == null) {\n\t    throw new TMSpecError('Missing transition table',\n\t    {suggestion: 'Specify one using <code>table:</code>'});\n\t  }\n\t  if (typeof val !== 'object') {\n\t    throw new TMSpecError('Transition table has an invalid type',\n\t    {problemValue: typeof val,\n\t    info: 'The transition table should be a nested mapping from states to symbols to instructions'});\n\t  }\n\t}\n\t\n\t// (any, Object) -> ?SynonymMap\n\tfunction parseSynonyms(val, table) {\n\t  if (val == null) {\n\t    return null;\n\t  }\n\t  if (typeof val !== 'object') {\n\t    throw new TMSpecError('Synonyms table has an invalid type',\n\t      {problemValue: typeof val,\n\t      info: 'Synonyms should be a mapping from string abbreviations to instructions'\n\t        + ' (e.g. <code>accept: {R: accept}</code>)'});\n\t  }\n\t  return _.mapValues(val, function (actionVal, key) {\n\t    try {\n\t      return parseInstruction(null, table, actionVal);\n\t    } catch (e) {\n\t      if (e instanceof TMSpecError) {\n\t        e.details.synonym = key;\n\t        if (e.reason === 'Unrecognized string') {\n\t          e.details.info = 'Note that a synonym cannot be defined using another synonym';\n\t        }\n\t      }\n\t      throw e;\n\t    }\n\t  });\n\t}\n\t\n\t// (?SynonymMap, {[key: string]: string}) -> TransitionTable\n\tfunction parseTable(synonyms, val) {\n\t  return _.mapValues(val, function (stateObj, state) {\n\t    if (stateObj == null) {\n\t      // case: halting state\n\t      return null;\n\t    }\n\t    if (typeof stateObj !== 'object') {\n\t      throw new TMSpecError('State entry has an invalid type',\n\t      {problemValue: typeof stateObj, state: state,\n\t      info: 'Each state should map symbols to instructions. An empty map signifies a halting state.'});\n\t    }\n\t    return _.mapValues(stateObj, function (actionVal, symbol) {\n\t      try {\n\t        return parseInstruction(synonyms, val, actionVal);\n\t      } catch (e) {\n\t        if (e instanceof TMSpecError) {\n\t          e.details.state = state;\n\t          e.details.symbol = symbol;\n\t        }\n\t        throw e;\n\t      }\n\t    });\n\t  });\n\t}\n\t\n\t// omits null/undefined properties\n\t// (?string, direction, ?string) -> {symbol?: string, move: direction, state?: string}\n\tfunction makeInstruction(symbol, move, state) {\n\t  return Object.freeze(_.omitBy({symbol: symbol, move: move, state: state},\n\t    function (x) { return x == null; }));\n\t}\n\t\n\tfunction checkTarget(table, instruct) {\n\t  if (instruct.state != null && !(instruct.state in table)) {\n\t    throw new TMSpecError('Undeclared state', {problemValue: instruct.state,\n\t    suggestion: 'Make sure to list all states in the transition table and define their transitions (if any)'});\n\t  }\n\t  return instruct;\n\t}\n\t\n\t// throws if the target state is undeclared (not in the table)\n\t// type SynonymMap = {[key: string]: TMAction}\n\t// (SynonymMap?, Object, string | Object) -> TMAction\n\tfunction parseInstruction(synonyms, table, val) {\n\t  return checkTarget(table, function () {\n\t    switch (typeof val) {\n\t      case 'string': return parseInstructionString(synonyms, val);\n\t      case 'object': return parseInstructionObject(val);\n\t      default: throw new TMSpecError('Invalid instruction type',\n\t        {problemValue: typeof val,\n\t          info: 'An instruction can be a string (a direction <code>L</code>/<code>R</code> or a synonym)'\n\t            + ' or a mapping (examples: <code>{R: accept}</code>, <code>{write: \\' \\', L: start}</code>)'});\n\t    }\n\t  }());\n\t}\n\t\n\tvar moveLeft = Object.freeze({move: TM.MoveHead.left});\n\tvar moveRight = Object.freeze({move: TM.MoveHead.right});\n\t\n\t// case: direction or synonym\n\tfunction parseInstructionString(synonyms, val) {\n\t  if (val === 'L') {\n\t    return moveLeft;\n\t  } else if (val === 'R') {\n\t    return moveRight;\n\t  }\n\t  // note: this order prevents overriding L/R in synonyms, as that would\n\t  // allow inconsistent notation, e.g. 'R' and {R: ..} being different.\n\t  if (synonyms && synonyms[val]) { return synonyms[val]; }\n\t  throw new TMSpecError('Unrecognized string',\n\t    {problemValue: val,\n\t    info: 'An instruction can be a string if it\\'s a synonym or a direction'});\n\t}\n\t\n\t// type ActionObj = {write?: any, L: ?string} | {write?: any, R: ?string}\n\t// case: ActionObj\n\tfunction parseInstructionObject(val) {\n\t  var symbol, move, state;\n\t  if (val == null) { throw new TMSpecError('Missing instruction'); }\n\t  // prevent typos: check for unrecognized keys\n\t  (function () {\n\t    var badKey;\n\t    if (!Object.keys(val).every(function (key) {\n\t      badKey = key;\n\t      return key === 'L' || key === 'R' || key === 'write';\n\t    })) {\n\t      throw new TMSpecError('Unrecognized key',\n\t      {problemValue: badKey,\n\t      info: 'An instruction always has a tape movement <code>L</code> or <code>R</code>, '\n\t        + 'and optionally can <code>write</code> a symbol'});\n\t    }\n\t  })();\n\t  // one L/R key is required, with optional state value\n\t  if ('L' in val && 'R' in val) {\n\t    throw new TMSpecError('Conflicting tape movements',\n\t    {info: 'Each instruction needs exactly one movement direction, but two were found'});\n\t  }\n\t  if ('L' in val) {\n\t    move = TM.MoveHead.left;\n\t    state = val.L;\n\t  } else if ('R' in val) {\n\t    move = TM.MoveHead.right;\n\t    state = val.R;\n\t  } else {\n\t    throw new TMSpecError('Missing movement direction');\n\t  }\n\t  // write key is optional, but must contain a char value if present\n\t  if ('write' in val) {\n\t    var writeStr = String(val.write);\n\t    if (writeStr.length === 1) {\n\t      symbol = writeStr;\n\t    } else {\n\t      throw new TMSpecError('Write requires a string of length 1');\n\t    }\n\t  }\n\t  return makeInstruction(symbol, move, state);\n\t}\n\t\n\texports.TMSpecError = TMSpecError;\n\texports.parseSpec = parseSpec;\n\t// re-exports\n\texports.YAMLException = jsyaml.YAMLException;\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar $ = __webpack_require__(4);\n\tvar Promise = __webpack_require__(8); // eslint-disable-line no-shadow\n\t\n\tPromise.config({\n\t  cancellation: true\n\t});\n\t\n\t// On success, 'resolve' is called with the response data.\n\t// On failure, 'reject' is called with {xhr: jqXHR, status: string, error: string}.\n\t// To abort the request, use .cancel (from bluebird). Neither is called in that case.\n\t// jqXHR -> Promise\n\tfunction promisifyAjax(xhr) {\n\t  return new Promise(function (resolve, reject, onCancel) {\n\t    xhr.then(resolve, function (jqXHR, textStatus, errorThrown) {\n\t      reject({xhr: jqXHR, status: textStatus, error: errorThrown});\n\t    });\n\t    onCancel && onCancel(function () {\n\t      try { xhr.abort(); } catch (e) {/* */}\n\t    });\n\t  });\n\t}\n\t\n\t// GistID -> Promise\n\t// @see promisifyAjax\n\tfunction getGist(gistID) {\n\t  return promisifyAjax($.ajax({\n\t    url: 'https://api.github.com/gists/' + gistID,\n\t    type: 'GET',\n\t    dataType: 'json',\n\t    accepts: 'application/vnd.github.v3+json' // specify API version for stability\n\t  }));\n\t}\n\t\n\t// https://developer.github.com/v3/gists/#create-a-gist\n\t// @see promisifyAjax\n\t// {files: {[filename: string]: {content: string}},\n\t//  description?: string, public?: boolean} -> Promise\n\tfunction createGist(payload) {\n\t  // return Promise.delay(1000, {id: 'offlinetesting'});\n\t  return promisifyAjax($.ajax({\n\t    url: 'https://api.github.com/gists',\n\t    type: 'POST',\n\t    data: JSON.stringify(payload),\n\t    // headers: {Authorization: 'token DEVTOKEN'},\n\t    dataType: 'json', // response datatype\n\t    accepts: 'application/vnd.github.v3+json' // specify API version for stability\n\t  }));\n\t}\n\t\n\texports.getGist = getGist;\n\texports.createGist = createGist;\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/* eslint-env browser */\n\tvar CheckboxTable = __webpack_require__(42);\n\tvar FileReaderPromise = __webpack_require__(43);\n\tvar format = __webpack_require__(5);\n\tvar getGist = __webpack_require__(14).getGist;\n\t\n\tvar $ = __webpack_require__(4);\n\tvar _ = __webpack_require__(1);\n\tvar d3 = __webpack_require__(2);\n\tvar Promise = __webpack_require__(8);  // eslint-disable-line no-shadow\n\t\n\t\n\tfunction decodeFormURLComponent(str) {\n\t  return decodeURIComponent(str.replace('+', ' '));\n\t}\n\t\n\t/**\n\t * https://url.spec.whatwg.org/#urlencoded-parsing\n\t */\n\tfunction queryParams(queryString) {\n\t  function decode(str) {\n\t    return str ? decodeFormURLComponent(str) : '';\n\t  }\n\t  var result = {};\n\t  queryString.split('&').forEach(function (str) {\n\t    var pair = str.split('=');\n\t    result[decode(pair[0])] = decode(pair[1]);\n\t  });\n\t  return result;\n\t}\n\t\n\t///////////////////\n\t// Import Dialog //\n\t///////////////////\n\t\n\t// requires an existing dialog in the DOM\n\tfunction ImportDialog(dialogNode) {\n\t  this.node = dialogNode;\n\t  this.titleNode = dialogNode.querySelector('.modal-header .modal-title');\n\t  this.bodyNode = dialogNode.querySelector('.modal-body');\n\t  this.footerNode = dialogNode.querySelector('.modal-footer');\n\t  this.cancelButtonNode = d3.select(this.footerNode).text('')\n\t    .append('button')\n\t      .attr({type: 'button', class: 'btn btn-default', 'data-dismiss': 'modal'})\n\t      .text('Cancel')\n\t    .node();\n\t  this.$dialog = $(dialogNode)\n\t    .one('hide.bs.modal', this.__onClose.bind(this));\n\t}\n\t\n\t// internal event handler.\n\tImportDialog.prototype.__onClose = function () {\n\t  this.onClose();\n\t  // use .empty to clean up $.on used in CheckboxTable\n\t  $(this.bodyNode).empty();\n\t  $(this.footerNode).empty();\n\t};\n\t\n\t// configurable\n\tImportDialog.prototype.onClose = function () {\n\t};\n\t\n\tImportDialog.prototype.show = function () {\n\t  this.$dialog.modal({backdrop: 'static', keyboard: false});\n\t};\n\t\n\tImportDialog.prototype.close = function () {\n\t  this.$dialog.modal('hide');\n\t};\n\t\n\tImportDialog.prototype.setBodyChildNodes = function (nodes) {\n\t  this.bodyNode.textContent = '';\n\t  this.bodyNode.appendChild(joinNodes(nodes));\n\t};\n\t\n\tfunction appendPanel(div, titleHTML) {\n\t  var panel = div.append('div')\n\t      .attr('class', 'panel panel-default');\n\t  panel.append('div')\n\t      .attr('class', 'panel-heading')\n\t    .append('h5')\n\t      .attr('class', 'panel-title')\n\t      .html(titleHTML);\n\t  return panel;\n\t}\n\t\n\tvar emptySelection = Object.freeze(d3.selectAll([]));\n\t\n\t// (D3Selection, {title: string, data: [string]}) -> void\n\tfunction appendListPanel(container, data) {\n\t  var panel = emptySelection;\n\t  if (data.data && data.data.length) {\n\t    panel = appendPanel(container, data.title);\n\t    panel.append('div')\n\t        .attr('class', 'panel-body')\n\t      .append('ul')\n\t        .attr('class', 'list-inline')\n\t      .selectAll('li')\n\t        .data(data.data)\n\t      .enter().append('li')\n\t        .text(_.identity);\n\t  }\n\t  return panel;\n\t}\n\t\n\t// ( D3Selection, {title: string, headers: [string],\n\t//  data: [[string | (D3Selection -> void)]]} ) -> void\n\tfunction appendTablePanel(container, data) {\n\t  var panel = emptySelection;\n\t  if (data.data && data.data.length) {\n\t    panel = appendPanel(container, data.title);\n\t    panel.append('table')\n\t        .attr('class', 'table')\n\t        .call(function (table) {\n\t          // headers\n\t          table.append('thead')\n\t            .append('tr').selectAll('th').data(data.headers)\n\t            .enter().append('th').text(_.identity);\n\t          // contents\n\t          table.append('tbody').selectAll('tr')\n\t              .data(data.data)\n\t            .enter().append('tr').selectAll('td')\n\t              .data(_.identity)\n\t            .enter().append('td').each(/* @this td */ function (d) {\n\t              var td = d3.select(this);\n\t              if (typeof d === 'function') {\n\t                d(td);\n\t              } else {\n\t                td.text(d);\n\t              }\n\t            });\n\t        });\n\t  }\n\t  return panel;\n\t}\n\t\n\t// NonDocumentFiles -> boolean\n\tvar isEmptyNonDocs = _.every(_.isEmpty);\n\t\n\t// (D3Selection, NonDocumentFiles, ?string) -> void\n\tfunction listNondocuments(dialogBody, nondocs, disclosureTitle) {\n\t  if (isEmptyNonDocs(nondocs)) {\n\t    return;\n\t  }\n\t  // Disclosure triangle\n\t  var collapseId = 'nondocument-files';\n\t  dialogBody.append('a')\n\t      .attr({\n\t        href: '#'+collapseId,\n\t        class: 'disclosure-triangle collapsed',\n\t        role: 'button',\n\t        'data-toggle': 'collapse'\n\t      })\n\t      .text(disclosureTitle ? disclosureTitle : 'Show other files');\n\t  var container = dialogBody.append('div')\n\t      .attr({\n\t        id: collapseId,\n\t        class: 'collapse'\n\t      });\n\t  // Errors by type, most important first\n\t  appendTablePanel(container, {\n\t    title: 'Unexpected error',\n\t    headers: ['Filename', 'Error'],\n\t    data: nondocs.otherError.map(function functionName(d) {\n\t      return [d.filename, errorString(d.error) ];\n\t    })\n\t  }).classed('panel-danger', true);\n\t  appendTablePanel(container, {\n\t    title: 'Not suitable for import',\n\t    headers: ['Filename', 'Reason'],\n\t    data: nondocs.badDoc.map(function (d) {\n\t      return [d.filename, d.error.message];\n\t    })\n\t  });\n\t  appendTablePanel(container, {\n\t    title: 'Not valid as YAML',\n\t    headers: ['Filename', 'Syntax error'],\n\t    data: nondocs.badYAML.map(function (d) {\n\t      return [d.filename,\n\t        function (td) { td.append('pre').text(d.error.message); } ];\n\t    })\n\t  });\n\t  // TODO: document largest allowed filesize; limit export likewise\n\t  appendListPanel(container, {\n\t    title: 'File is too large',\n\t    data: nondocs.tooLarge\n\t  });\n\t  appendListPanel(container, {\n\t    title: 'Different file extension (not <code>.yaml</code>/<code>.yml</code>)',\n\t    data: nondocs.wrongType\n\t  });\n\t}\n\t\n\t// deal with objects like DOMError (whose .toString gives \"[object FileError]\")\n\tfunction errorString(reason) {\n\t  return reason instanceof Error\n\t    ? String(reason)\n\t    : reason.message || reason.name || String(reason);\n\t}\n\t\n\t//////////////////////\n\t// Document Parsing //\n\t//////////////////////\n\t\n\t/* Interface for Document Parsing\n\t  type GistFile = {\n\t    filename: string,\n\t    size: number,\n\t    truncated: boolean,\n\t    content: string\n\t  };\n\t  type TMData = {source code: string};\n\t  type DocFile = {filename: string, size: number, document: TMData};\n\t\n\t  type Filename = string;\n\t  type ErrorTuple = {filename: Filename, error: Error | YAMLException};\n\t  type NonDocumentFiles = {\n\t    wrongType:  [Filename],\n\t    tooLarge:   [Filename],\n\t    badYAML:    [ErrorTuple],\n\t    badDoc:     [ErrorTuple],\n\t    otherError: [ErrorTuple]\n\t  };\n\t  type ParseResult = {documentFiles: [DocFile], nonDocumentFiles: NonDocumentFiles};\n\t */\n\t\n\t// Parse each file into a document or a categorized error.\n\t// Local files are read only if they have the right extension and size.\n\t// NB. make sure to convert FileList to an actual Array.\n\t// The promise resolves with ParseResult.\n\t// (number, [GistFile | File]) -> Promise\n\tfunction parseFiles(sizelimit, files) {\n\t  var docfiles = [];\n\t  var nondocs = {wrongType: [], tooLarge: [], badYAML: [], badDoc: [], otherError: []};\n\t\n\t  return Promise.each(files, function (file) {\n\t    var name = file.filename || file.name; // eslint-disable-line no-shadow\n\t    if (name.search(/\\.ya?ml$/) === -1) {\n\t      nondocs.wrongType.push(name);\n\t    } else if (file.truncated || file.size > sizelimit) {\n\t      nondocs.tooLarge.push(name);\n\t    } else {\n\t      return Promise.resolve(file.content != null ? file.content\n\t        : FileReaderPromise.readAsText(file))\n\t      .then(function (content) {\n\t        docfiles.push({\n\t          filename: name,\n\t          size: file.size,\n\t          document: format.parseDocument(content)\n\t        });\n\t      }).catch(function (e) {\n\t        var tuple = {filename: name, error: e};\n\t        if (e instanceof format.YAMLException) {\n\t          nondocs.badYAML.push(tuple);\n\t        } else if (e instanceof format.InvalidDocumentError) {\n\t          nondocs.badDoc.push(tuple);\n\t        } else {\n\t          nondocs.otherError.push(tuple);\n\t        }\n\t      });\n\t    }\n\t  }).return({documentFiles: docfiles, nonDocumentFiles: nondocs});\n\t}\n\t\n\t/////////////////////\n\t// Document Import //\n\t/////////////////////\n\t\n\tfunction showSizeKB(n) {\n\t  // example: 12.0 KB\n\t  return (Math.ceil(10*n/1024)/10).toFixed(1) + ' KB';\n\t}\n\t\n\t// {docFiles: [DocFile], nonDocumentFiles: NonDocumentFiles,\n\t//  dialog: ImportDialog, citeNode?: Node, importDocuments: [TMData] -> void} -> void\n\tfunction pickMultiple(args) {\n\t  var docfiles = args.documentFiles,\n\t      nondocs = args.nonDocumentFiles,\n\t      citeNode = args.citeNode,\n\t      dialog = args.dialog,\n\t      importDocuments = args.importDocuments;\n\t  // Dialog body\n\t  var dialogBody = d3.select(dialog.bodyNode).text('');\n\t  dialogBody.append('p').call(function (p) {\n\t    p.append('strong').text('Select documents to import');\n\t    if (citeNode) {\n\t      p.node().appendChild(document.createTextNode(' from '));\n\t      p.node().appendChild(citeNode);\n\t    }\n\t  });\n\t  var ctable = new CheckboxTable({\n\t    table: dialogBody.append('table')\n\t      .attr({class: 'table table-hover checkbox-table'}),\n\t    headers: ['Filename', 'Size'],\n\t    data: docfiles.map(function (doc) {\n\t      return [doc.filename, showSizeKB(doc.size)];\n\t    })\n\t  });\n\t  listNondocuments(dialogBody, nondocs);\n\t  // Dialog footer\n\t  var importButton = d3.select(dialog.footerNode).append('button')\n\t      .attr({type: 'button', class: 'btn btn-primary', 'data-dismiss': 'modal'})\n\t      .property('disabled', true)\n\t      .text('Import')\n\t      .on('click', /* @this button */ function () {\n\t        d3.select(this).on('click', null); // prevent double import; like .one()\n\t        var names = d3.set(ctable.getCheckedValues());\n\t        importDocuments(docfiles\n\t          .filter(function (file) { return names.has(file.filename); })\n\t          .map(_.property('document'))\n\t        );\n\t      })\n\t    .node();\n\t  ctable.onChange = function () {\n\t    importButton.disabled = ctable.isCheckedEmpty();\n\t  };\n\t}\n\t\n\t// {nonDocumentFiles: NonDocumentFiles, dialog: ImportDialog, citeLink?: Node} -> void\n\tfunction pickNone(args) {\n\t  var nondocs = args.nonDocumentFiles,\n\t      dialog = args.dialog,\n\t      citeLink = args.citeLink;\n\t\n\t  d3.select(dialog.bodyNode).text('').call(function (body) {\n\t    body.append('p').append('strong').text(!isEmptyNonDocs(nondocs)\n\t        ? 'None of the files are suitable for import.'\n\t        : 'No files were selected.');\n\t    if (citeLink) {\n\t      body.append('p').text('Requested URL: ').node().appendChild(citeLink);\n\t    }\n\t    listNondocuments(body, nondocs, 'Show details');\n\t  });\n\t  dialog.cancelButtonNode.textContent = 'Close';\n\t}\n\t\n\t// Intermingle text and nodes.\n\t// [Node | string] -> DocumentFragment\n\tfunction joinNodes(nodes) {\n\t  var result = document.createDocumentFragment();\n\t  nodes.forEach(function (node) {\n\t    if (typeof node === 'string') {\n\t      result.appendChild(document.createTextNode(node));\n\t    } else {\n\t      result.appendChild(node);\n\t    }\n\t  });\n\t  return result;\n\t}\n\t\n\tfunction wrapTag(tagName, node) {\n\t  var tag = document.createElement(tagName);\n\t  tag.appendChild(node);\n\t  return tag;\n\t}\n\t\n\t// Create a link with text <q>`gist description`</q> if given, otherwise gist `gistID`.\n\t// {gistID: string, description?: string} -> HTMLAnchorElement | HTMLQuoteElement\n\tfunction gistDescriptionLink(args) {\n\t  var link = externalLink({\n\t    href: 'https://gist.github.com/' + args.gistID,\n\t    textContent: args.description || ('gist ' + args.gistID)\n\t  });\n\t  return args.description ? wrapTag('q', link) : link;\n\t}\n\t\n\t// {href: string, textContent?: string} -> HTMLAnchorElement\n\tfunction externalLink(args) {\n\t  var link = document.createElement('a');\n\t  link.href = args.href;\n\t  link.target = '_blank';\n\t  link.textContent = args.textContent || args.href;\n\t  return link;\n\t}\n\t\n\t// The returned promise resolves/cancels when the dialog is closed:\n\t// • resolves if loading (before import) finished and the user cancelled anyway\n\t// • cancels if files were still loading and not yet displayed (eg. fetch, parse)\n\t// ({gistID: string, dialogNode: Node, importDocument: TMData -> void} |\n\t// {files: FileList, dialogNode: Node, importDocument: TMData -> void}) -> Promise\n\tfunction importCommon(args) {\n\t  var gistID = args.gistID,\n\t      dialogNode = args.dialogNode,\n\t      importDocument = args.importDocument;\n\t\n\t  var dialog = new ImportDialog(dialogNode);\n\t  var citeLink;\n\t  var citeNode;\n\t  // prevent accidentally exceeding quota\n\t  var MAX_FILESIZE = 400 * 1024;\n\t  // Start fetch, show dialog\n\t  var filesPromise = (function () {\n\t    if (gistID != null) {\n\t      dialog.titleNode.textContent = 'Import from GitHub gist';\n\t      citeLink = externalLink({href: 'https://gist.github.com/' + gistID});\n\t      dialog.setBodyChildNodes(['Retrieving ', citeLink, '…']);\n\t      return getGist(gistID).then(function (data) {\n\t        citeNode = gistDescriptionLink({\n\t          gistID: gistID,\n\t          description: data.description\n\t        });\n\t        dialog.setBodyChildNodes(['Processing ', citeLink, '…']);\n\t        return _.values(data.files);\n\t      });\n\t    } else {\n\t      dialog.titleNode.textContent = 'Import from files';\n\t      dialog.setBodyChildNodes(['Processing files…']);\n\t      return Promise.resolve(_.toArray(args.files));\n\t    }\n\t  }());\n\t  dialog.show();\n\t  // Parse, pick, import\n\t  var promise = filesPromise\n\t  .then(parseFiles.bind(undefined, MAX_FILESIZE))\n\t  .then(function (parsed) {\n\t    var docfiles = parsed.documentFiles;\n\t    switch (docfiles.length) {\n\t      case 0:\n\t        pickNone({\n\t          nonDocumentFiles: parsed.nonDocumentFiles,\n\t          dialog: dialog,\n\t          citeLink: citeLink\n\t        });\n\t        return;\n\t      case 1:\n\t        importDocument(docfiles[0].document);\n\t        dialog.close();\n\t        return;\n\t      default:\n\t        pickMultiple({\n\t          documentFiles: docfiles,\n\t          nonDocumentFiles: parsed.nonDocumentFiles,\n\t          dialog: dialog,\n\t          citeNode: citeNode,\n\t          importDocuments: function importDocuments(docs) {\n\t            docs.concat().reverse().map(importDocument);\n\t          }\n\t        });\n\t    }\n\t  })\n\t  .catch(function (reason) {\n\t    dialog.setBodyChildNodes([messageForError(reason)]\n\t      .concat(citeLink ? ['Requested URL: ', citeLink] : [])\n\t    );\n\t    dialog.cancelButtonNode.textContent = 'Close';\n\t  });\n\t  var waitForDialog = new Promise(function (resolve) {\n\t    dialog.onClose = function () {\n\t      promise.cancel();\n\t      resolve();\n\t    };\n\t  });\n\t  return promise.return(waitForDialog);\n\t}\n\t\n\t// {gistID: string, dialogNode: Node, importDocument: TMData -> void} -> Promise\n\tvar importGist = importCommon;\n\t\n\t// {files: FileList, dialogNode: Node, importDocument: TMData -> void} -> Promise\n\tvar importLocalFiles = importCommon;\n\t\n\tfunction createElementHTML(tagName, innerHTML) {\n\t  var element = document.createElement(tagName);\n\t  element.innerHTML = innerHTML;\n\t  return element;\n\t}\n\t\n\t// ({xhr: jqXHR} | Error) -> Node\n\tfunction messageForError(reason) {\n\t  var xhr = reason.xhr;\n\t  if (xhr) {\n\t    // case: couldn't fetch\n\t    return createElementHTML('p', (function () {\n\t      switch (reason.status) {\n\t        case 'abort':\n\t          return [''];\n\t        case 'timeout':\n\t          return [\n\t            '<strong>The request timed out.</strong>',\n\t            'You can check your connection and try again.'\n\t          ];\n\t        default:\n\t        // case: HTTP error\n\t          if (xhr.status === 404) {\n\t            return [\n\t              '<strong>No GitHub gist exists with that ID.</strong>',\n\t              'It’s possible the ID is incorrect, or the gist was deleted.'\n\t            ];\n\t          } else if (xhr.status === 0) {\n\t            return ['GitHub could not be reached. Your Internet connection may be offline.'];\n\t          } else {\n\t            return [\n\t              'The import failed because of a <strong>connection error</strong>.',\n\t              'HTTP status code: ' + xhr.status + ' ' + xhr.statusText\n\t            ];\n\t          }\n\t      }\n\t    }()).join('<br>'));\n\t  } else {\n\t    // case: other error\n\t    var pre = document.createElement('pre');\n\t    pre.textContent = errorString(reason);\n\t    return joinNodes([\n\t      createElementHTML('p', 'An unexpected error occurred:'), pre]);\n\t  }\n\t}\n\t\n\t// Import a gist via ?import-gist=gistID and remove the query string from the URL.\n\t// Call this once the DOM is ready (document.readyState === 'interactive').\n\t// {dialogNode: Node, importDocument: TMData -> void} -> void\n\tfunction runImport(args) {\n\t  function removeQuery() {\n\t    try {\n\t      history.replaceState(null, null, location.pathname);\n\t    } catch (e) {\n\t      // ignore\n\t    }\n\t  }\n\t\n\t  var params = queryParams(location.search.substring(1));\n\t  var gistID = params['import-gist'];\n\t  if (gistID) {\n\t    importGist(_.assign({gistID: gistID}, args))\n\t    .finally(removeQuery);\n\t  }\n\t}\n\t\n\texports.importGist = importGist;\n\texports.importLocalFiles = importLocalFiles;\n\texports.runImport = runImport;\n\n\n/***/ },\n/* 16 */,\n/* 17 */\n/***/ function(module, exports) {\n\n\tmodule.exports = ace;\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = jsyaml;\n\n/***/ },\n/* 19 */,\n/* 20 */,\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"input: '${2}'\\nblank: '${3: }'\\nstart state: ${4:start}\\ntable:\\n  ${4}:\\n    ${5}\\n\"\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: binary addition\\nsource code: |\\n  # Adds two binary numbers together.\\n\\n  # Format: Given input a+b where a and b are binary numbers,\\n  # leaves c b on the tape, where c = a+b.\\n  # Example: '11+1' => '100 1'.\\n  input: '1011+11001'\\n  blank: ' '\\n  start state: right\\n  table:\\n    # Start at the second number's rightmost digit.\\n    right:\\n      [0,1,+]: R\\n      ' ': {L: read}\\n\\n    # Add each digit from right to left:\\n    # read the current digit of the second number,\\n    read:\\n      0: {write: c, L: have0}\\n      1: {write: c, L: have1}\\n      +: {write: ' ', L: rewrite}\\n    # and add it to the next place of the first number,\\n    # marking the place (using O or I) as already added.\\n    have0: {[0,1]: L, +: {L: add0}}\\n    have1: {[0,1]: L, +: {L: add1}}\\n    add0:\\n      [0,' ']: {write: O, R: back0}\\n      1      : {write: I, R: back0}\\n      [O,I]  : L\\n    add1:\\n      [0,' ']: {write: I, R: back1}\\n      1      : {write: O, L: carry}\\n      [O,I]  : L\\n    carry:\\n      [0,' ']: {write: 1, R: back1}\\n      1      : {write: 0, L}\\n    # Then, restore the current digit, and repeat with the next digit.\\n    back0:\\n      [0,1,O,I,+]: R\\n      c: {write: 0, L: read}\\n    back1:\\n      [0,1,O,I,+]: R\\n      c: {write: 1, L: read}\\n\\n    # Finish: rewrite place markers back to 0s and 1s.\\n    rewrite:\\n      O: {write: 0, L}\\n      I: {write: 1, L}\\n      [0,1]: L\\n      ' ': {R: done}\\n    done:\\n\\n\\n  # Exercise:\\n\\n  # • Generate the Fibonacci sequence in binary, listed from right to left:\\n  #   ...1101 1000 101 11 10 1 1 0\\n  #   Hint: prefix the current number with a +, copy the previous number\\n  #   and place it left of the +, run the adder, and repeat.\\n  #   Example: '1 0' => '+1 0' => '0+1 0' => '1 1 0' => '+1 1 0' => ...\\npositions:\\n  right:   {x: 300, y: 130}\\n  rewrite: {x: 500, y: 130}\\n  done:    {x: 620, y: 130}\\n\\n  back0:  {x: 250, y: 250}\\n  read:   {x: 400, y: 250}\\n  back1:  {x: 550, y: 250}\\n  carry:  {x: 650, y: 250}\\n\\n  add0:   {x: 150, y: 400}\\n  have0:  {x: 300, y: 400}\\n  have1:  {x: 500, y: 400}\\n  add1:   {x: 650, y: 400}\\n\"\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: binary increment\\nsource code: |\\n  # Adds 1 to a binary number.\\n  input: '1011'\\n  blank: ' '\\n  start state: right\\n  table:\\n    # scan to the rightmost digit\\n    right:\\n      [1,0]: R\\n      ' '  : {L: carry}\\n    # then carry the 1\\n    carry:\\n      1      : {write: 0, L}\\n      [0,' ']: {write: 1, L: done}\\n    done:\\n\\n\\n  # Exercises:\\n\\n  # • Modify the machine to always halt on the leftmost digit\\n  #   (regardless of the number's length).\\n  #   Hint: add a state between carry and done.\\n\\n  # • Make a machine that adds 2 instead of 1.\\n  #   Hint: 2 is '10' in binary, so the last digit is unaffected.\\n  #   Alternative hint: chain together two copies of the machine from\\n  #   the first exercise (renaming the states of the second copy).\\n\\n  # • Make a machine to subtract 1.\\n  #   To simplify things, assume the input is always greater than 0.\\npositions:\\n  right: {x: 230, y: 250}\\n  carry: {x: 400, y: 250}\\n  done: {x: 570, y: 250}\\n\"\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: binary multiplication\\nsource code: |\\n  # Multiplies two binary numbers together.\\n\\n  # Examples: '11*11' => '1001', '111*110' => '101010'.\\n  input: '11*101' # 3*5 = 15 (1111 in binary)\\n  blank: ' '\\n  start state: start\\n  table:\\n    # Prefix the input with a '+', and go to the rightmost digit.\\n    start:\\n      [0,1]: {L: init}\\n    init:\\n      ' ': {write: '+', R: right}\\n    right:\\n      [0,1,'*']: R\\n      ' ': {L: readB}\\n\\n    # Read and erase the last digit of the multiplier.\\n    # If it's 1, add the current multiplicand.\\n    # In any case, double the multiplicand afterwards.\\n    readB:\\n      0: {write: ' ', L: doubleL}\\n      1: {write: ' ', L: addA}\\n    addA:\\n      [0,1]: L\\n      '*': {L: read} # enter adder\\n    # Double the multiplicand by appending a 0.\\n    doubleL:\\n      [0,1]: L\\n      '*': {write: 0, R: shift}\\n    double: # return from adder\\n      [0,1,+]: R\\n      '*': {write: 0, R: shift}\\n    # Make room by shifting the multiplier right 1 cell.\\n    shift:\\n      0: {write: '*', R: shift0}\\n      1: {write: '*', R: shift1}\\n      ' ': {L: tidy} # base case: multiplier = 0\\n    shift0:\\n      0:   {R: shift0}\\n      1:   {write: 0, R: shift1}\\n      ' ': {write: 0, R: right}\\n    shift1:\\n      0:   {write: 1, R: shift0}\\n      1:   {R: shift1}\\n      ' ': {write: 1, R: right}\\n\\n    tidy:\\n      [0,1]: {write: ' ', L}\\n      +: {write: ' ', L: done}\\n    done:\\n\\n  # This is the 'binary addition' machine almost verbatim.\\n  # It's adjusted to keep the '+'\\n  # and to lead to another state instead of halting.\\n    read:\\n      0: {write: c, L: have0}\\n      1: {write: c, L: have1}\\n      +: {L: rewrite} # keep the +\\n    have0: {[0,1]: L, +: {L: add0}}\\n    have1: {[0,1]: L, +: {L: add1}}\\n    add0:\\n      [0,' ']: {write: O, R: back0}\\n      1      : {write: I, R: back0}\\n      [O,I]  : L\\n    add1:\\n      [0,' ']: {write: I, R: back1}\\n      1      : {write: O, L: carry}\\n      [O,I]  : L\\n    carry:\\n      [0,' ']: {write: 1, R: back1}\\n      1      : {write: 0, L}\\n    back0:\\n      [0,1,O,I,+]: R\\n      c: {write: 0, L: read}\\n    back1:\\n      [0,1,O,I,+]: R\\n      c: {write: 1, L: read}\\n    rewrite:\\n      O: {write: 0, L}\\n      I: {write: 1, L}\\n      [0,1]: L\\n      ' ': {R: double} # when done, go to the 'double' state\\n\\n\\n  # Remark:\\n  # We can view the machine as expressing a recursive function:\\n\\n  #   multiply(a, b) = mult(0, a, b)\\n\\n  #   mult(acc, a, 0     ) = acc\\n  #   mult(acc, a, 2k + 0) = mult(acc    , 2a, k)   where k ≠ 0\\n  #   mult(acc, a, 2k + 1) = mult(acc + a, 2a, k)\\n\\n  # where a, b, and k are natural numbers.\\n\\n  # Each reduction maintains the invariant\\n  #   mult(acc, a, b) = acc + a * b\\n  # Note that mult's third argument (b) is always decreasing,\\n  # so mult is guaranteed to halt.\\n  # Eventually b reaches 0 and the result is simply the accumulator.\\npositions:\\n  start:  {x: 80 , y: 70}\\n  init:   {x: 190, y: 70}\\n  tidy:   {x: 730, y: 70}\\n  done:   {x: 730, y: 180}\\n\\n  right:  {x: 300, y: 115}\\n  shift:  {x: 600, y: 115}\\n  shift1: {x: 450, y: 70}\\n  shift0: {x: 450, y: 160}\\n\\n  readB:  {x: 300, y: 215}\\n  addA:   {x: 160, y: 215}\\n  doubleL: {x: 550, y: 215}\\n\\n  rewrite: {x: 363, y: 300}\\n  double: {x: 650, y: 300}\\n\\n  back0:  {x: 160, y: 370}\\n  read:   {x: 300, y: 370}\\n  back1:  {x: 440, y: 370}\\n  carry:  {x: 540, y: 370}\\n\\n  add0:   {x:  60, y: 470}\\n  have0:  {x: 200, y: 470}\\n  have1:  {x: 400, y: 470}\\n  add1:   {x: 540, y: 470}\\n\"\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: 3-state busy beaver\\nsource code: |\\n  # A 3-state 2-symbol busy beaver for most non-blank symbols.\\n  # It takes 13 steps and leaves 6 non-blank symbols on the tape.\\n\\n  # What's a \\\"busy beaver\\\"?\\n  #   Suppose every possible Turing machine with n states and k symbols\\n  #   (for instance, 3 states and 2 symbols) were started on\\n  #   a blank tape with no input.\\n  #   Some of the machines would never halt. Out of the ones that do halt,\\n  #   a machine that leaves the most non-blank symbols on the tape\\n  #   is called a busy beaver.\\n  blank: '0'\\n  start state: A\\n  table:\\n    A:\\n      0: {write: 1, R: B}\\n      1: {L: C}\\n    B:\\n      0: {write: 1, L: A}\\n      1: R\\n    C:\\n      0: {write: 1, L: B}\\n      1: {R: H}\\n    H:\\n\\n  # An alternative criterion is halting after the most steps.\\n  # This busy beaver takes the most steps (21) but only prints 5 1's:\\n    # A:\\n    #   0: {write: 1, R: B}\\n    #   1: {R: H}\\n    # B:\\n    #   0: {write: 1, L: B}\\n    #   1: {write: 0, R: C}\\n    # C:\\n    #   0: {write: 1, L}\\n    #   1: {L: A}\\n    # H:\\n\\n\\n  # Exercise:\\n\\n  # • Consider Turing machines that have n states and k symbols.\\n  #   Instead of a missing instruction, halting is denoted by\\n  #   a transition to a special \\\"halt\\\" state (for a total of n+1 states).\\n  #   How many different transition functions are possible?\\n\\n  #   Hint: Each instruction writes a symbol, moves left or right,\\n  #   and goes to a state.\\n  #   There is one instruction per combination of non-halt state & symbol.\\n\\n\\n\\n  #   Answer: (2k(n+1))^(nk)\\npositions:\\n  A: {x: 320, y: 296.188}\\n  B: {x: 400, y: 157.624}\\n  C: {x: 480, y: 296.188}\\n  H: {x: 400, y: 376.188}\\n\"\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: 4-state busy beaver\\nsource code: |\\n  # A 4-state 2-symbol busy beaver\\n  # that halts after 107 steps, leaving 13 1's on the tape.\\n  # It takes the most steps *and* prints the most 1's.\\n  blank: 0\\n  start state: A\\n  table:\\n    A: {0: {write: 1, R: B}, 1:           {L: B}}\\n    B: {0: {write: 1, L: A}, 1: {write: 0, L: C}}\\n    C: {0: {write: 1, R: H}, 1:           {L: D}}\\n    D: {0: {write: 1, R   }, 1: {write: 0, R: A}}\\n    H:\\n\\n\\n  # Finding a busy beaver requires considering every n-state k-symbol\\n  # machine and proving either that it halts with no more non-blank symbols\\n  # or that it never halts at all.\\n\\n  # Even with strategies to reduce the search space—\\n  # including normalization, accelerated simulation, and automated proofs—\\n  # there are still machines that show surprising complexity\\n  # and require individual analysis.\\n\\n  # This 4-state busy beaver was proven by Allen Brady in 1983.\\n  # Busy beavers for 5 states and above are as yet unknown.\\n  # At the time of writing, the current 5-state 2-symbol contender\\n  # takes 47,176,870 steps to halt, and the 6-state contender\\n  # takes over 7.4 * 10^36534 steps\\n  # (http://www.logique.jussieu.fr/~michel/bbc.html).\\n  # \\\"Given that 5-state 2-symbol halting Turing machines can compute\\n  # Collatz-like congruential functions, it may be very hard to find\\n  # [the next busy beaver]\\\" (https://oeis.org/A060843).\\n\\n\\n  # An entertaining read on busy beavers and their profoundness:\\n\\n  # • \\\"Who Can Name the Bigger Number?\\\"\\n  #   http://www.scottaaronson.com/writings/bignumbers.html\\npositions:\\n  # square with side length 160\\n  A: {x: 320, y: 170}\\n  B: {x: 480, y: 170}\\n\\n  C: {x: 480, y: 330}\\n  D: {x: 320, y: 330}\\n  H: {x: 620, y: 330}\\n\"\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: copy 1s\\nsource code: |\\n  # Copies a string of consecutive 1s.\\n  input: '111'\\n  blank: 0\\n  start state: each\\n  table:\\n    # mark the current 1 by erasing it\\n    each:\\n      0: {R: H}\\n      1: {write: 0, R: sep}\\n    # skip to the separator\\n    sep:\\n      0: {R: add}\\n      1: R\\n    # skip to the end of the copy and write a 1\\n    add:\\n      0: {write: 1, L: sepL}\\n      1: R\\n    # return to the separator\\n    sepL:\\n      0: {L: next}\\n      1: L\\n    # return to the erased 1, restore it, and then advance to the next 1\\n    next:\\n      0: {write: 1, R: each}\\n      1: L\\n    H:\\n\\n\\n  # Exercises:\\n\\n  # • Edit the machine to copy the string indefinitely,\\n  #   i.e. given the input '11', produce 11011011011...\\n  #   Hint: this can be done by modifying only one transition.\\n\\n  # • Make a machine to output the endless sequence 1011011101111011111...\\npositions:\\n  each: {x: 400   , y: 100}\\n  sep:  {x: 400.01, y: 250}\\n  add:  {x: 400.02, y: 400}\\n  sepL: {x: 250   , y: 250}\\n  next: {x: 250.01, y: 100}\\n  H:    {x: 550   , y: 100}\\n\"\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: divisible by 3\\nsource code: |\\n  # Checks if a binary number is divisible by 3.\\n  input: '1001' # try '1111' (15), '10100' (20), '111001' (57)\\n  blank: ' '\\n  # How it works:\\n\\n  # Consider reading a binary number, say 10011 (19),\\n  # from left to right one digit at a time.\\n  # Each time a digit is read, the new value equals the new digit\\n  # plus the old value shifted left one place (multiplied by 2).\\n\\n  # Digits  Value\\n  # -------------\\n  #         0\\n  # 1       1\\n  # 10      2\\n  # 100     4\\n  # 1001    9\\n  # 10011   19\\n\\n  # Now instead of tracking the entire number, just track the remainder.\\n  # It works the same way.\\n  start state: q0\\n  table:\\n    q0:\\n      0: R       # 2*0 + 0 = 0\\n      1: {R: q1} # 2*0 + 1 = 1\\n      ' ': {R: accept}\\n    q1:\\n      0: {R: q2} # 2*1 + 0 = 2\\n      1: {R: q0} # 2*1 + 1 = 3\\n    q2:\\n      0: {R: q1} # 2*2 + 0 = 4\\n      1: {R: q2} # 2*2 + 1 = 5\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Modify the machine to check if n-1 is divisible by 3,\\n  #   where n is the input. That is, accept the binary of 1, 4, 7, 10, ...\\n  #   Hint: this can be done without modifying the tape (no 'write').\\n\\n  # • Round the number up to the nearest multiple of 3.\\n  #   Hint: do one pass right to find the remainder, then another pass left\\n  #   to add. See the 'binary increment' example for how to add.\\n\\n  # • Round the number down to the nearest multiple of 3.\\npositions:\\n  q0: {x: 230, y: 250}\\n  q1: {x: 400, y: 250}\\n  q2: {x: 570, y: 250}\\n  accept: {x: 230.01, y: 380}\\n\"\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: divisible by 3 (base 10)\\nsource code: |\\n  # Checks if a base 10 number is divisible by 3.\\n  input: 4728 # try 42, 57, 1337, 5328, 7521, 314159265\\n  blank: ' '\\n  # This uses the same idea as the base 2 version.\\n  #\\n  # To make things more interesting, we derive the step relation:\\n  # Let x be the number left of the tape head,\\n  #     d the digit under the head, and\\n  #     x' the number up to and including the head.\\n  # Then\\n  #   x' = 10x + d .\\n  # Notice 10 ≡ 1 (mod 3). Therefore\\n  #   x' ≡ x + d (mod 3) .\\n  # Each step simply adds the new digit's remainder mod 3.\\n  start state: q0\\n  table:\\n    q0:\\n      [0,3,6,9]: R     # 0 + 0 ≡ 0 (mod 3)\\n      [1,4,7]: {R: q1} # 0 + 1 ≡ 1\\n      [2,5,8]: {R: q2} # 0 + 2 ≡ 2\\n      ' ': {R: accept}\\n    q1:\\n      [0,3,6,9]: R     # 1 + 0 ≡ 1\\n      [1,4,7]: {R: q2} # 1 + 1 ≡ 2\\n      [2,5,8]: {R: q0} # 1 + 2 ≡ 0\\n    q2:\\n      [0,3,6,9]: R     # 2 + 0 ≡ 2\\n      [1,4,7]: {R: q0} # 2 + 1 ≡ 0\\n      [2,5,8]: {R: q1} # 2 + 2 ≡ 1\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Check for divisibility by 5.\\n  #   Hint: only 2 states (besides accept) are required.\\n\\n  # • Check for divisibility by 4.\\n  #   Hint: use 4 states (besides accept).\\npositions:\\n  # centered equilateral triangle with side length 250\\n  q0: {x: 275, y: 322.1688}\\n  q1: {x: 400, y: 105.6624}\\n  q2: {x: 525, y: 322.1688}\\n  accept: {x: 275.01, y: 430}\\n\"\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: multiplied lengths\\nsource code: |\\n  # Decides the language { a^(i)b^(j)c^(k) | i*j = k and i,j,k ≥ 1 }.\\n  # (a's followed by b's then c's,\\n  # where the number of a's multiplied by the number of b's\\n  # equals the number of c's.)\\n  input: aabbbcccccc # try abc, b, aabcbc, aabcc, aabbbbcccccccc\\n  blank: ' '\\n  start state: start\\n\\n  table:\\n    # Check for the form a^(i)b^(j)c^(k) where i,j,k ≥ 1.\\n    start:  {        a: {R: a+}}\\n    a+:     {a: R,   b: {R: b+}}\\n    b+:     {b: R,   c: {R: c+}}\\n    c+:     {c: R, ' ': {L: left}}\\n    left:\\n      [a,b,c]: L\\n      ' ': {R: eachA}\\n    # Then check that i*j = k.\\n    #   The approach is two nested loops:\\n    #   For each 'a':\\n    #     For each 'b':\\n    #       Mark one 'c'\\n    #   At the end, check that all c's are marked.\\n    eachA:\\n      a: {write: ' ', R: eachB}\\n      b: {R: scan}\\n    eachB:\\n      a: R\\n      b: {write: B, R: markC}\\n      C: {L: nextA}\\n    markC:\\n      [b,C]: R\\n      c: {write: C, L: nextB}\\n    nextB:\\n      [b,C]: L\\n      B: {R: eachB}\\n    nextA:\\n      a: L\\n      B: {write: b, L}\\n      ' ': {R: eachA}\\n\\n    scan:\\n      [b,C]: R\\n      ' ': {R: accept}\\n    accept:\\npositions:\\n  start:  {x: 180, y: 40}\\n  a+:     {x: 180, y: 180}\\n  b+:     {x: 180, y: 320}\\n  c+:     {x: 180, y: 460}\\n  left:   {x: 290, y: 320}\\n\\n  accept: {x: 400, y: 40}\\n  eachA:  {x: 400, y: 180}\\n  eachB:  {x: 400, y: 320}\\n  markC:  {x: 400, y: 460}\\n\\n  scan:   {x: 560, y: 180}\\n  nextA:  {x: 560, y: 320}\\n  nextB:  {x: 560, y: 460}\\n\"\n\n/***/ },\n/* 31 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: equal strings\\nsource code: |\\n  # Decides the language { w#w | w ∈ {0,1}* }\\n  # (two equal binary strings separated by '#')\\n  input: '01001#01001' # try '#', '1#10', '10#1', '10#10'\\n  blank: ' '\\n  # Two strings are equal if they are both the empty string,\\n  # or they start with the same symbol and are equal thereafter.\\n  start state: start\\n  table:\\n    start:\\n      # Inductive case: start with the same symbol.\\n      0: {write: ' ', R: have0}\\n      1: {write: ' ', R: have1}\\n      # Base case: empty string.\\n      '#': {R: check}\\n    have0:\\n      [0,1]: R\\n      '#': {R: match0}\\n    have1:\\n      [0,1]: R\\n      '#': {R: match1}\\n    match0:\\n      x: R\\n      0: {write: x, L: back}\\n    match1:\\n      x: R\\n      1: {write: x, L: back}\\n    back:\\n      [0,1,'#',x]: L\\n      ' ': {R: start}\\n    check:\\n      x: R\\n      ' ': {R: accept}\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Accept if the second string is the bitwise complement\\n  #   (1s and 0s swapped) of the first, e.g. accept '1101#0010'.\\n\\n  # • Check that a binary string has the same number of 0s and 1s;\\n  #   eg., accept '001110' but reject '10010'.\\n\\n  # • Check if two strings are different.\\n  #   Example: accept '00#001' and '0101#0111', but reject '1001#1001'.\\npositions:\\n  accept: {x: 80 , y: 250}\\n  check:  {x: 190, y: 250}\\n  # regular hexagon with side length 150\\n  start:  {x: 300, y: 250}\\n  back:   {x: 600, y: 250}\\n  have1:  {x: 375, y: 120.10}\\n  match1: {x: 525, y: 120.10}\\n  have0:  {x: 375, y: 379.90}\\n  match0: {x: 525, y: 379.90}\\n\"\n\n/***/ },\n/* 32 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: three equal lengths\\nsource code: |\\n  # Decides the language { aⁿbⁿcⁿ | n ≥ 1 }, that is,\\n  # accepts a's followed by b's then c's of the same length.\\n  input: aabbcc # try bac, aabc, aabcc, aabcbc\\n  blank: ' '\\n  # Mark the first a, b, and c on each pass (by capitalizing them).\\n  # All a's must precede all b's, which must precede all c's.\\n  # When there are no more a's,\\n  # all input symbols should have been marked.\\n  start state: qA\\n  table:\\n    qA:\\n      a: {write: A, R: qB}\\n      B: {R: scan}\\n    qB:\\n      [a,B]: R\\n      b: {write: B, R: qC}\\n    qC:\\n      [b,C]: R\\n      c: {write: C, L: back}\\n    back:\\n      [a,B,b,C]: L\\n      A: {R: qA}\\n    scan:\\n      [B,C]: R\\n      ' ': {R: accept}\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Suppose a ledger starts from 0 and gains one dollar for each +\\n  #   and loses one for each -. Reading left to right,\\n  #   check that the account never goes into the negative.\\n  #   Examples: accept '+-++' and '++-+--', reject '-++' and '++---+'.\\n\\n  # • Check parentheses for proper nesting,\\n  #   e.g. accept '()(()()())' but reject '(()))(' and '(()('.\\npositions:\\n  qA: {x: 240, y: 250}\\n  qB: {x: 400, y: 250}\\n  qC: {x: 560, y: 250}\\n  back:   {x: 400, y: 370}\\n  scan:   {x: 320, y: 150}\\n  accept: {x: 480, y: 150}\\n\"\n\n/***/ },\n/* 33 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: palindrome\\nsource code: |\\n  # Accepts palindromes made of the symbols 'a' and 'b'\\n  input: 'abba' # try a, ab, bb, babab\\n  blank: ' '\\n  start state: start\\n  synonyms:\\n    accept: {R: accept}\\n    reject: {R: reject}\\n  # A palindrome is either the empty string, a single symbol,\\n  # or a (shorter) palindrome with the same symbol added to both ends.\\n  table:\\n    start:\\n      a: {write: ' ', R: haveA}\\n      b: {write: ' ', R: haveB}\\n      ' ': accept # empty string\\n    haveA:\\n      [a,b]: R\\n      ' ': {L: matchA}\\n    haveB:\\n      [a,b]: R\\n      ' ': {L: matchB}\\n    matchA:\\n      a: {write: ' ', L: back} # same symbol at both ends\\n      b: reject\\n      ' ': accept # single symbol\\n    matchB:\\n      a: reject\\n      b: {write: ' ', L: back} # same symbol at both ends\\n      ' ': accept # single symbol\\n    back:\\n      [a,b]: L\\n      ' ': {R: start}\\n    accept:\\n    reject:\\n\\n\\n  # Exercise:\\n\\n  # • Modify the machine to include 'c' in the symbol alphabet,\\n  #   so it also works for strings like 'cabbac'.\\npositions:\\n  haveA:  {x: 240, y: 185}\\n  start:  {x: 400, y: 185}\\n  haveB:  {x: 560, y: 185}\\n\\n  matchA: {x: 240, y: 315}\\n  back:   {x: 400, y: 315}\\n  matchB: {x: 560, y: 315}\\n\\n  accept: {x: 400, y: 55}\\n  reject: {x: 400, y: 445}\\n\"\n\n/***/ },\n/* 34 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: powers of two\\nsource code: |\\n  # Matches strings of 0s whose length is a power of two.\\n\\n  # This example comes from the textbook\\n  #   \\\"Introduction to the Theory of Computation\\\" (3rd edition, 2012)\\n  #   by Michael Sipser\\n  # The states have been renamed (from q1, q2, etc.)\\n  # to make it easier to understand.\\n  input: '0000' # try '0', '000', '00000000'\\n  blank: ' '\\n  start state: zero\\n  synonyms:\\n    accept: {R: accept}\\n    reject: {R: reject}\\n  # The idea: divide the length by 2 repeatedly until it reaches 1.\\n\\n  # To do this, cross off every other 0, one pass at a time.\\n  # If any pass reads an odd number of 0s (a remainder), reject right away.\\n  # Otherwise if every pass halves the length cleanly,\\n  # the length must be a power of two (1*2^n for n ≥ 0).\\n\\n  # Note that since the first 0 is never crossed off, we can simply\\n  # erase it on the first pass and start the count from 1 from then on.\\n  table:\\n    zero:\\n      0  : {write: ' ', R: one}\\n      ' ': reject\\n    # Base case: accept length of 1 = 2^0.\\n    one:\\n      0  : {write: x, R: even}\\n      ' ': accept\\n      x  : R\\n    # Inductive case: divide by 2 and check for no remainder.\\n    even:\\n      0  : {R: odd}\\n      ' ': {L: back} # return for another pass\\n      x  : R\\n    odd: # odd and > 1\\n      0  : {write: x, R: even}\\n      ' ': reject # odd number of 0s on this pass\\n      x  : R\\n    back:\\n      ' ': {R: one}\\n      [0,x]: L\\n    accept:\\n    reject:\\npositions:\\n  zero:   {x: 200, y: 200}\\n  one:    {x: 400, y: 200}\\n  even:   {x: 600, y: 200}\\n\\n  odd:    {x: 600, y: 385}\\n  back:   {x: 500, y: 125}\\n  accept: {x: 400, y: 300}\\n  reject: {x: 200, y: 385}\\n\"\n\n/***/ },\n/* 35 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: repeat 0 1\\nsource code: |\\n  # This is the first example machine given by Alan Turing in his 1936 paper\\n  #   \\\"On Computable Numbers, with an Application to\\n  #    the Entscheidungsproblem\\\".\\n  # It simply writes the endless sequence 0 1 0 1 0 1...\\n  blank: ' '\\n  start state: b\\n  table:\\n    b:\\n      ' ': {write: 0, R: c}\\n    c:\\n      ' ':           {R: e}\\n    e:\\n      ' ': {write: 1, R: f}\\n    f:\\n      ' ':           {R: b}\\n\\n\\n  # (Turing uses the convention of leaving a gap after each output cell,\\n  # reserving it for marking the cell. For instance, on a tape that\\n  # contains '0 1x0 0 1 1y1y0y', x marks the leftmost 1 and y marks 110.)\\npositions:\\n  b: {x: 300, y: 200, fixed: false}\\n  c: {x: 450, y: 150, fixed: false}\\n  e: {x: 500, y: 300, fixed: false}\\n  f: {x: 350, y: 350, fixed: false}\\n\"\n\n/***/ },\n/* 36 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"name: unary multiplication\\nsource code: |\\n  # Multiplies together two unary numbers separated by a '*'.\\n  # (Unary is like tallying. Here '||*|||' means 2 times 3.)\\n  input: '||*|||' # try '*', '|*|||', '||||*||'\\n  blank: ' '\\n\\n  # The idea:\\n  #   multiply(0, b) = 0\\n  #   multiply(a, b) = b + multiply(a-1, b)   when a > 0\\n  start state: eachA\\n  table:\\n    # For each 1 in a, add a copy of b.\\n    eachA:\\n      '|': {write: ' ', R: toB}  # Inductive case: a > 0.\\n      '*': {R: skip}             # Base case:      a = 0.\\n    toB:\\n      '|': R\\n      '*': {R: eachB} # enter copier\\n    nextA: # return from copier\\n      ' ': {write: '|', R: eachA}\\n      ['|','*']: L\\n\\n    skip:\\n      '|': R\\n      ' ': {R: done}\\n    done:\\n\\n    # This is the 'copy 1s' machine, with ' ' as 0 and '|' as 1.\\n    eachB:\\n      ' ': {L: nextA}\\n      '|': {write: ' ', R: sep}\\n    sep:\\n      ' ': {R: add}\\n      '|': R\\n    add:\\n      ' ': {write: '|', L: sepL}\\n      '|': R\\n    sepL:\\n      ' ': {L: nextB}\\n      '|': L\\n    nextB:\\n      ' ': {write: '|', R: eachB}\\n      '|': L\\n\\npositions:\\n  eachA:  {x: 400, y:  50}\\n  toB:    {x: 400, y: 150}\\n  eachB:  {x: 400, y: 250}\\n  sep:   {x: 400, y: 350}\\n  add:   {x: 400, y: 450}\\n\\n  sepL:  {x: 280, y: 350}\\n  nextB:  {x: 280, y: 250}\\n\\n  nextA:  {x: 280, y: 90}\\n  skip:   {x: 520, y: 90}\\n  done:   {x: 520, y: 190}\\n\"\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/* global document */\n\tvar KeyValueStorage = __webpack_require__(7).KeyValueStorage;\n\tvar TMDocument = __webpack_require__(9);\n\tvar d3 = __webpack_require__(2);\n\tvar defaults = __webpack_require__(1).defaults; // NB. 2nd arg takes precedence\n\t\n\t/**\n\t * Document menu controller.\n\t *\n\t * The view is fully determined by a 3-tuple: ([ID], ID -> Name, currentID).\n\t * @constructor\n\t * @param {Object}  args                  argument object\n\t * @param {HTMLSelectElement}\n\t *                  args.menu\n\t * @param {?Node}  [args.group=args.menu] Node to add documents to.\n\t * @param {string}  args.storagePrefix\n\t * @param {?(TMDocument -> HTMLOptionElement)}\n\t *                  args.makeOption       Customize rendering for each document entry.\n\t * @param {?string} args.firsttimeDocID   Document to open on the first visit.\n\t */\n\tfunction DocumentMenu(args) {\n\t  var menu = args.menu,\n\t      group = args.group || menu,\n\t      storagePrefix = args.storagePrefix,\n\t      firsttimeDocID = args.firsttimeDocID;\n\t\n\t  if (!menu) {\n\t    throw new TypeError('DocumentMenu: missing parameter: menu element');\n\t  } else if (!storagePrefix) {\n\t    throw new TypeError('DocumentMenu: missing parameter: storage prefix');\n\t  }\n\t  if (args.makeOption) {\n\t    this.optionFromDocument = args.makeOption;\n\t  }\n\t  this.menu = menu;\n\t  this.group = group;\n\t  this.group.innerHTML = '';\n\t  this.__storagePrefix = storagePrefix;\n\t\n\t  // Load document entries (non-examples)\n\t  this.doclist = new DocumentList(storagePrefix + '.list');\n\t  this.render();\n\t  // Re-open last-opened document\n\t  this.selectDocID(this.getSavedCurrentDocID() || firsttimeDocID);\n\t\n\t  // Listen for selection changes\n\t  var self = this;\n\t  this.menu.addEventListener('change', function () {\n\t    self.onChange(self.currentDocument, {type: 'open'});\n\t  });\n\t\n\t  // Listen for storage changes in other tabs/windows\n\t  KeyValueStorage.addStorageListener(function (e) {\n\t    var docID;\n\t    var option, newOption;\n\t\n\t    if (e.key === self.doclist.storageKey) {\n\t      // case: [ID] list changed\n\t      self.doclist.readList();\n\t      self.render();\n\t    } else if ( (docID = TMDocument.IDFromNameStorageKey(e.key)) ) {\n\t      // case: single document renamed: (ID -> Name) changed\n\t      option = self.findOptionByDocID(docID);\n\t      if (option) {\n\t        // replace the whole <option>, to be consistent with .optionFromDocument\n\t        option.parentNode.replaceChild(\n\t          newOption = self.optionFromDocument(new TMDocument(docID)),\n\t          option\n\t        );\n\t        newOption.selected = option.selected;\n\t        d3.select(newOption).datum( d3.select(option).datum() );\n\t      }\n\t    }\n\t  });\n\t}\n\t\n\tObject.defineProperties(DocumentMenu.prototype, {\n\t  currentOption: {\n\t    get: function () {\n\t      return this.menu.options[this.menu.selectedIndex];\n\t    },\n\t    enumerable: true\n\t  },\n\t  currentDocument: {\n\t    get: function () {\n\t      var opt = this.currentOption;\n\t      return opt ? new TMDocument(opt.value) : null;\n\t    },\n\t    enumerable: true\n\t  }\n\t});\n\t\n\tDocumentMenu.prototype.render = function () {\n\t  var currentDocID = this.currentOption ? this.currentOption.value : null;\n\t\n\t  var option = d3.select(this.group).selectAll('option')\n\t    .data(this.doclist.list, function (entry) { return entry.id; });\n\t\n\t  option.exit().remove();\n\t\n\t  var self = this;\n\t  option.enter().insert(function (entry) {\n\t    return self.optionFromDocument(new TMDocument(entry.id));\n\t  });\n\t\n\t  // If current document was deleted, switch to another document\n\t  if (this.currentOption.value !== currentDocID) {\n\t    // fallback 1: saved current docID\n\t    if (!this.selectDocID(this.getSavedCurrentDocID(), {type: 'delete'})) {\n\t      // fallback 2: whatever is now selected\n\t      this.onChange(this.currentDocument, {type: 'delete'});\n\t    }\n\t  }\n\t};\n\t\n\t// Returns the <option> whose 'value' attribute is docID.\n\tDocumentMenu.prototype.findOptionByDocID = function (docID) {\n\t  return this.menu.querySelector('option[value=\"' + docID.replace(/\"/g, '\\\\\"') + '\"]');\n\t};\n\t\n\t// Selects (switches the active item to) the given docID. Returns true on success.\n\tDocumentMenu.prototype.selectDocID = function (docID, opts) {\n\t  try {\n\t    this.findOptionByDocID(docID).selected = true;\n\t  } catch (e) {\n\t    return false;\n\t  }\n\t  this.onChange(this.currentDocument, opts);\n\t  return true;\n\t};\n\t\n\t// Saves the current (selected) docID to storage.\n\tDocumentMenu.prototype.saveCurrentDocID = function () {\n\t  var docID = this.currentOption && this.currentOption.value;\n\t  if (docID) {\n\t    KeyValueStorage.write(this.__storagePrefix + '.currentDocID', docID);\n\t  }\n\t};\n\t\n\t// Returns the saved current docID, otherwise null.\n\tDocumentMenu.prototype.getSavedCurrentDocID = function () {\n\t  return KeyValueStorage.read(this.__storagePrefix + '.currentDocID');\n\t};\n\t\n\t// Configurable methods\n\t\n\tDocumentMenu.prototype.optionFromDocument = function (doc) {\n\t  var option = document.createElement('option');\n\t  option.value = doc.id;\n\t  option.text = doc.name || 'untitled';\n\t  return option;\n\t};\n\t\n\t// Called when the current document ID changes\n\t// through user action (<select>) or this class's API.\n\t// The callback receives the new value of .currentDocument,\n\t// along with the options object (whose .type\n\t// is 'duplicate', 'delete', or 'open').\n\tDocumentMenu.prototype.onChange = function () {\n\t};\n\t\n\t// Internal Helpers\n\t\n\t// prepend then select\n\tDocumentMenu.prototype.__prepend = function (doc, opts) {\n\t  var option = this.optionFromDocument(doc);\n\t  this.group.insertBefore(option, this.group.firstChild);\n\t  if (opts && opts.select) {\n\t    this.menu.selectedIndex = option.index;\n\t    this.onChange(doc, opts);\n\t  }\n\t  return doc;\n\t};\n\t\n\t// Methods not about Current Document\n\t\n\tDocumentMenu.prototype.newDocument = function (opts) {\n\t  return this.__prepend(this.doclist.newDocument(), defaults({type: 'open'}, opts));\n\t};\n\t\n\t// Methods about Current Document\n\t\n\tDocumentMenu.prototype.duplicate = function (doc, opts) {\n\t  return this.__prepend(this.doclist.duplicate(doc), defaults({type: 'duplicate'}, opts));\n\t};\n\t\n\tDocumentMenu.prototype.rename = function (name) {\n\t  this.currentDocument.name = name;\n\t  this.currentOption.text = name;\n\t};\n\t\n\t// required invariant: one option is always selected.\n\t// returns true if the current entry was removed from the list.\n\tDocumentMenu.prototype.delete = function (opts) {\n\t  this.currentDocument.delete();\n\t  var index = this.menu.selectedIndex;\n\t  var didDeleteEntry = this.doclist.deleteIndex(index);\n\t  if (didDeleteEntry) {\n\t    this.currentOption.remove();\n\t    this.menu.selectedIndex = index;\n\t    this.onChange(this.currentDocument, defaults({type: 'delete'}, opts));\n\t  }\n\t  return didDeleteEntry;\n\t};\n\t\n\t/////////////////////\n\t// Document List   //\n\t// (model/storage) //\n\t/////////////////////\n\t\n\t\n\t// for custom documents.\n\tfunction DocumentList(storageKey) {\n\t  this.storageKey = storageKey;\n\t  this.readList();\n\t}\n\t\n\t// () -> string\n\tDocumentList.newID = function () {\n\t  return String(Date.now());\n\t};\n\t\n\t// internal methods.\n\tDocumentList.prototype.add = function (docID) {\n\t  this.__list.unshift({id: docID});\n\t  this.writeList();\n\t};\n\tDocumentList.prototype.readList = function () {\n\t  this.__list = JSON.parse(KeyValueStorage.read(this.storageKey)) || [];\n\t};\n\tDocumentList.prototype.writeList = function () {\n\t  KeyValueStorage.write(this.storageKey, JSON.stringify(this.__list));\n\t};\n\t\n\tDocumentList.prototype.newDocument = function () {\n\t  var newID = DocumentList.newID();\n\t  this.add(newID);\n\t  return new TMDocument(newID);\n\t};\n\t\n\tDocumentList.prototype.duplicate = function (doc) {\n\t  return this.newDocument().copyFrom(doc);\n\t};\n\t\n\t/**\n\t * Behaves like list.splice(index, 1).\n\t * @param  {number} index index of the element to delete\n\t * @return {boolean} true if an element was removed, false otherwise (index out of bounds)\n\t */\n\tDocumentList.prototype.deleteIndex = function (index) {\n\t  var deleted = this.__list.splice(index, 1);\n\t  this.writeList();\n\t  return (deleted.length > 0);\n\t};\n\t\n\tObject.defineProperties(DocumentList.prototype, {\n\t  list: {\n\t    get: function () { return this.__list; },\n\t    enumerable: true\n\t  }\n\t});\n\t\n\tmodule.exports = DocumentMenu;\n\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar TMSimulator = __webpack_require__(39),\n\t    parser = __webpack_require__(13),\n\t    util = __webpack_require__(3),\n\t    ace = __webpack_require__(17),\n\t    d3 = __webpack_require__(2);\n\tvar TMSpecError = parser.TMSpecError;\n\tvar YAMLException = parser.YAMLException;\n\tvar UndoManager = ace.require('ace/undomanager').UndoManager;\n\t\n\t/**\n\t * For editing and displaying a TMDocument.\n\t * The controller coordinates the interactions between\n\t *   1. simulator\n\t *   2. code editor\n\t *   3. storage\n\t *\n\t * All container and button params are required.\n\t * @param {Object} containers\n\t *   Empty containers to use (contents will likely be replaced).\n\t * @param {HTMLDivElement} containers.simulator\n\t * @param {HTMLDivElement} containers.editorAlerts\n\t * @param {HTMLDivElement} containers.editor\n\t * @param {Object} buttons Buttons to use.\n\t * @param {HTMLButtonElement} buttons.simulator.run\n\t * @param {HTMLButtonElement} buttons.simulator.step\n\t * @param {HTMLButtonElement} buttons.simulator.reset\n\t * @param {HTMLButtonElement} buttons.editor.load For loading the editor source\n\t * @param {HTMLButtonElement} buttons.editor.revert For reverting the editor source\n\t * @param {TMDocument} document The document to load from and save to.\n\t */\n\tfunction TMDocumentController(containers, buttons, document) {\n\t  this.simulator = new TMSimulator(containers.simulator, buttons.simulator);\n\t\n\t  // Set up ace editor //\n\t  var editor = ace.edit(containers.editor);\n\t  editor.session.setOptions({\n\t    mode: 'ace/mode/yaml',\n\t    tabSize: 2,\n\t    useSoftTabs: true\n\t  });\n\t  editor.setOptions({\n\t    minLines: 15,\n\t    maxLines: 50\n\t  });\n\t  // suppress warning about\n\t  // \"Automatically scrolling cursor into view after selection change\"\n\t  editor.$blockScrolling = Infinity;\n\t\n\t  var editorButtons = buttons.editor;\n\t  var self = this;\n\t  editorButtons.load\n\t      .addEventListener('click', function () {\n\t        self.loadEditorSource();\n\t        // save whenever \"Load\" is pressed\n\t        self.save();\n\t        self.editor.focus();\n\t      });\n\t  editorButtons.revert\n\t      .addEventListener('click', function () {\n\t        self.revertEditorSource();\n\t        self.editor.focus();\n\t      });\n\t\n\t  Object.defineProperties(this, {\n\t    __document: {\n\t      value: {editor: {}}, // dummy document that gets replaced\n\t      writable: true\n\t    },\n\t    buttons   : { value: buttons },\n\t    containers: { value: containers },\n\t    editor    : { value: editor, enumerable: true }\n\t  });\n\t  this.openDocument(document);\n\t}\n\t\n\tTMDocumentController.prototype.getDocument = function () {\n\t  return this.__document;\n\t};\n\t\n\t// set the backing document, without saving/loading or affecting the views.\n\tTMDocumentController.prototype.setBackingDocument = function (doc) {\n\t  this.__document = doc;\n\t};\n\t\n\t// save the current document, then open another one.\n\t// does nothing if the document ID is the same.\n\tTMDocumentController.prototype.openDocument = function (doc) {\n\t  if (this.getDocument().id === doc.id) { return; } // same document\n\t  this.save();\n\t  return this.forceLoadDocument(doc);\n\t};\n\t\n\t// (low-level) load the document. current data is discarded without saving.\n\t// this can be used to switch from a deleted document or reload a document.\n\tTMDocumentController.prototype.forceLoadDocument = function (doc, keepUndoHistory) {\n\t  this.setBackingDocument(doc);\n\t  var diagramSource = doc.sourceCode;\n\t  var editorSource = doc.editorSourceCode;\n\t  // init //\n\t  this.simulator.clear();\n\t  this.setEditorValue(editorSource == null ? diagramSource : editorSource);\n\t  // prevent undo-ing to the previous document. note: .reset() doesn't work\n\t  if (!keepUndoHistory) {\n\t    this.editor.session.setUndoManager(new UndoManager());\n\t  }\n\t\n\t  if (editorSource == null) {\n\t    // case: synced: load straight from editor.\n\t    this.loadEditorSource();\n\t  } else {\n\t    // case: not synced: editor has separate contents.\n\t    this.isSynced = false;\n\t    try {\n\t      this.simulator.sourceCode = diagramSource;\n\t      this.simulator.positionTable = doc.positionTable;\n\t    } catch (e) {\n\t      this.showCorruptDiagramAlert(true);\n\t    }\n\t  }\n\t};\n\t\n\tTMDocumentController.prototype.save = function () {\n\t  var doc = this.getDocument();\n\t  if (this.hasValidDiagram) {\n\t    // sidenote: deleting first can allow saving when space would otherwise be full\n\t    doc.editorSourceCode = this.isSynced ? undefined : this.editor.getValue();\n\t    doc.sourceCode = this.simulator.sourceCode;\n\t    doc.positionTable = this.simulator.positionTable;\n\t  } else {\n\t    if (doc.editorSourceCode == null) {\n\t      // case 1: editor was synced with the diagram.\n\t      //  only edit doc.sourceCode until it's fixed;\n\t      //  don't worsen the problem to case 2.\n\t      doc.sourceCode = this.editor.getValue();\n\t    } else {\n\t      // case 2: editor has separate contents.\n\t      //  this is more confusing, as there are two \"source code\" values to contend with.\n\t      doc.editorSourceCode = this.editor.getValue();\n\t    }\n\t  }\n\t};\n\t\n\t/**\n\t * Set the editor contents.\n\t * • Converts null to '', since editor.setValue(null) crashes.\n\t * • Clears the editor alerts.\n\t * @param {?string} str\n\t */\n\tTMDocumentController.prototype.setEditorValue = function (str) {\n\t  this.editor.setValue(util.coalesce(str, ''), -1 /* put cursor at start */);\n\t  this.setAlertErrors([]);\n\t};\n\t\n\t/////////////////////////\n\t// Error/Alert Display //\n\t/////////////////////////\n\t\n\tfunction aceAnnotationFromYAMLException(e) {\n\t  return {\n\t    row: e.mark.line,\n\t    column: e.mark.column,\n\t    text: 'Not valid YAML (possibly caused by a typo):\\n' + e.message,\n\t    type: 'error'\n\t  };\n\t}\n\t\n\tTMDocumentController.prototype.setAlertErrors = function (errors) {\n\t  var self = this;\n\t  var alerts = d3.select(self.containers.editorAlerts).selectAll('.alert')\n\t    .data(errors, function (e) { return String(e); }); // key by error description\n\t\n\t  alerts.exit().remove();\n\t\n\t  alerts.enter()\n\t    .append('div')\n\t      .attr('class', 'alert alert-danger')\n\t      .attr('role', 'alert')\n\t      .each(/** @this div */ function (e) {\n\t        var div = d3.select(this);\n\t        if (e instanceof YAMLException) {\n\t          var annot = aceAnnotationFromYAMLException(e);\n\t          var lineNum = annot.row + 1; // annotation lines start at 0; editor starts at 1\n\t          var column = annot.column;\n\t          div.append('strong')\n\t              .text('Syntax error on ')\n\t            .append('a')\n\t              .text('line ' + lineNum)\n\t              .on('click', function () {\n\t                self.editor.gotoLine(lineNum, column, true);\n\t                self.editor.focus();\n\t                // prevent scrolling, especially href=\"#\" scrolling to the top\n\t                d3.event.preventDefault();\n\t              })\n\t              .attr('href', '#' + self.containers.editor.id);\n\t          div.append('br');\n\t          // aside: text nodes aren't elements so they need to be wrapped (e.g. in span)\n\t          // https://github.com/mbostock/d3/issues/94\n\t          div.append('span').text('Possible reason: ' + e.reason);\n\t        } else if (e instanceof TMSpecError) {\n\t          div.html(e.message);\n\t        } else {\n\t          div.html('<strong>Unexpected error</strong>: ' + e);\n\t        }\n\t      });\n\t  self.editor.session.setAnnotations(\n\t    errors\n\t    .map(function (e) {\n\t      return (e instanceof YAMLException) ? aceAnnotationFromYAMLException(e) : null;\n\t    })\n\t    .filter(function (x) { return x; })\n\t  );\n\t};\n\t\n\t\n\t//////////////////////////////\n\t// Syncing diagram & editor //\n\t//////////////////////////////\n\t\n\t// Sync Status\n\t\n\t// This method can be overridden as necessary.\n\t// The default implementation toggles Bootstrap 3 classes.\n\tTMDocumentController.prototype.setLoadButtonSuccess = function (didSucceed) {\n\t  d3.select(this.buttons.editor.load)\n\t      .classed({\n\t        'btn-success': didSucceed,\n\t        'btn-primary': !didSucceed\n\t      });\n\t};\n\t\n\t// internal. whether the editor and diagram source code are in sync, and the diagram is valid.\n\t// Updates \"Load machine\" button display.\n\t// for future reference: .isSynced cannot be moved to TMDocument because it requires knowledge from the simulator.\n\tObject.defineProperty(TMDocumentController.prototype, 'isSynced', {\n\t  set: function (isSynced) {\n\t    isSynced = Boolean(isSynced);\n\t    if (this.__isSynced !== isSynced) {\n\t      this.__isSynced = isSynced;\n\t      this.setLoadButtonSuccess(isSynced);\n\t      if (isSynced) {\n\t        // changes cause desync\n\t        var onChange = function () {\n\t          this.isSynced = false;\n\t          this.editor.removeListener('change', onChange);\n\t        }.bind(this);\n\t        this.editor.on('change', onChange);\n\t      }\n\t    }\n\t  },\n\t  get: function () { return this.__isSynced; }\n\t});\n\t\n\t// public API for isSynced\n\tTMDocumentController.prototype.getIsSynced = function () {\n\t  return Boolean(this.isSynced);\n\t};\n\t\n\t// Load & Revert\n\t\n\t// internal. used to detect when an imported document is corrupted.\n\tObject.defineProperty(TMDocumentController.prototype, 'hasValidDiagram', {\n\t  get: function () {\n\t    return Boolean(this.simulator.sourceCode);\n\t  }\n\t});\n\t\n\t/**\n\t * Show/hide the notice that the diagram's source code is invalid;\n\t * use this when the editor has contents of its own (so it can't display the diagram's source).\n\t *\n\t * This happens for imported documents that were corrupted.\n\t * It can also happen if the value in storage is tampered with.\n\t * @param  {boolean} show true to display immediately, false to hide.\n\t */\n\tTMDocumentController.prototype.showCorruptDiagramAlert = function (show) {\n\t  function enquote(s) { return '<q>' + s + '</q>'; }\n\t  var div = d3.select(this.simulator.container);\n\t  if (show) {\n\t    var revertName = this.buttons.editor.revert.textContent.trim();\n\t    div.html('')\n\t      .append('div')\n\t        .attr('class', 'alert alert-danger')\n\t        .html('<h4>This imported document has an error</h4>' +\n\t          [ 'The diagram was not valid and could not be displayed.'\n\t          , 'You can either load a new diagram from the editor, or attempt to recover this one'\n\t          , 'using ' + enquote(revertName) + ' (which will replace the current editor contents).'\n\t          ].join('<br>')\n\t        );\n\t  } else {\n\t    div.selectAll('.alert').remove();\n\t  }\n\t};\n\t\n\t// Sync from editor to diagram\n\tTMDocumentController.prototype.loadEditorSource = function () {\n\t  // load to diagram, and report any errors\n\t  var errors = (function () {\n\t    try {\n\t      var isNewDiagram = !this.hasValidDiagram;\n\t      this.simulator.sourceCode = this.editor.getValue();\n\t      if (isNewDiagram) {\n\t        // loaded new, or recovery succeeded => close error notice, restore positions\n\t        this.showCorruptDiagramAlert(false);\n\t        this.simulator.positionTable = this.getDocument().positionTable;\n\t      }\n\t      // .toJSON() is the only known way to preserve the cursor/selection(s)\n\t      // this.__loadedEditorSelection = this.editor.session.selection.toJSON();\n\t      return [];\n\t    } catch (e) {\n\t      return [e];\n\t    }\n\t  }.call(this));\n\t  this.isSynced = (errors.length === 0);\n\t  this.setAlertErrors(errors);\n\t};\n\t\n\t// Sync from diagram to editor\n\tTMDocumentController.prototype.revertEditorSource = function () {\n\t  this.setEditorValue(this.hasValidDiagram\n\t    ? this.simulator.sourceCode\n\t    : this.getDocument().sourceCode);\n\t\n\t  if (this.hasValidDiagram) {\n\t    this.isSynced = true;\n\t  } else {\n\t    // show errors when reverting to a corrupted diagram\n\t    this.loadEditorSource();\n\t  }\n\t  // if (this.__loadedEditorSelection) {\n\t  //   this.editor.session.selection.fromJSON(this.__loadedEditorSelection);\n\t  // }\n\t};\n\t\n\tmodule.exports = TMDocumentController;\n\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar parseSpec = __webpack_require__(13).parseSpec,\n\t    TMViz = __webpack_require__(10),\n\t    watchInit = __webpack_require__(16).watchInit,\n\t    values = __webpack_require__(6).values;\n\t\n\t/**\n\t * Turing machine simulator component.\n\t *\n\t * Contains a state diagram, tape diagram, and button controls.\n\t * @param {[type]} container [description]\n\t * @param {[type]} buttons   [description]\n\t */\n\tfunction TMSimulator(container, buttons) {\n\t  this.container = container;\n\t  this.buttons = buttons;\n\t\n\t  var self = this;\n\t  buttons.step\n\t      .addEventListener('click', function () {\n\t        self.machine.isRunning = false;\n\t        self.machine.step(); // each step click corresponds to 1 machine step\n\t      });\n\t  buttons.run\n\t      .addEventListener('click', function () {\n\t        self.machine.isRunning = !self.machine.isRunning;\n\t      });\n\t  buttons.reset\n\t      .addEventListener('click', function () {\n\t        self.machine.reset();\n\t      });\n\t  buttons.all = values(buttons);\n\t\n\t  this.clear();\n\t}\n\t\n\tTMSimulator.prototype.clear = function () {\n\t  this.sourceCode = null;\n\t};\n\t\n\tObject.defineProperties(TMSimulator.prototype, {\n\t  /**\n\t   * The machine's source code.\n\t   * • Setting a new source code will attempt to persist the state node positions.\n\t   * • To set a new machine, first call .clear(), then set the source code.\n\t   */\n\t  sourceCode: {\n\t    get: function () {\n\t      return this.__sourceCode;\n\t    },\n\t    // throws if sourceCode has errors\n\t    set: function (sourceCode) {\n\t      if (this.machine) {\n\t        this.machine.isRunning = false; // important\n\t        this.machine.stateviz.force.stop();\n\t      }\n\t      if (sourceCode == null) {\n\t        // clear display\n\t        this.machine = null;\n\t        this.container.innerHTML = '';\n\t      } else {\n\t        // parse & check, then set\n\t        var spec = parseSpec(sourceCode);\n\t        if (this.machine) {\n\t          // case: update\n\t          // copy & restore positions, clear & load contents\n\t          var posTable = this.machine.positionTable;\n\t          this.clear();\n\t          this.machine = new TMViz(this.container, spec, posTable);\n\t        } else {\n\t          // case: load new\n\t          this.machine = new TMViz(this.container, spec);\n\t        }\n\t      }\n\t      this.__sourceCode = sourceCode;\n\t    },\n\t    enumerable: true\n\t  },\n\t  positionTable: {\n\t    get: function () {\n\t      return this.machine && this.machine.positionTable;\n\t    },\n\t    set: function (posTable) {\n\t      if (this.machine && posTable) {\n\t        this.machine.positionTable = posTable;\n\t      }\n\t    },\n\t    enumerable: true\n\t  },\n\t  machine: {\n\t    get: function () {\n\t      return this.__machine;\n\t    },\n\t    set: function (machine) {\n\t      this.__machine = machine;\n\t      this.rebindButtons();\n\t    }\n\t  }\n\t});\n\t\n\t/////////////\n\t// Buttons //\n\t/////////////\n\t\n\t/**\n\t * The innerHTML for the \"Run\" button.\n\t * The default value can be overridden.\n\t * @type {string}\n\t */\n\tTMSimulator.prototype.htmlForRunButton =\n\t  '<span class=\"glyphicon glyphicon-play\" aria-hidden=\"true\"></span><br>Run';\n\tTMSimulator.prototype.htmlForPauseButton =\n\t  '<span class=\"glyphicon glyphicon-pause\" aria-hidden=\"true\"></span><br>Pause';\n\t\n\t// bind: .disabled for Step and Run, and .innerHTML (Run/Pause) for Run\n\tfunction rebindStepRun(stepButton, runButton, runHTML, pauseHTML, machine) {\n\t  function onHaltedChange(isHalted) {\n\t    stepButton.disabled = isHalted;\n\t    runButton.disabled = isHalted;\n\t  }\n\t  function onRunningChange(isRunning) {\n\t    runButton.innerHTML = isRunning ? pauseHTML : runHTML;\n\t  }\n\t  watchInit(machine, 'isHalted', function (prop, oldval, isHalted) {\n\t    onHaltedChange(isHalted);\n\t    return isHalted;\n\t  });\n\t  watchInit(machine, 'isRunning', function (prop, oldval, isRunning) {\n\t    onRunningChange(isRunning);\n\t    return isRunning;\n\t  });\n\t}\n\t\n\t// internal method.\n\tTMSimulator.prototype.rebindButtons = function () {\n\t  var buttons = this.buttons;\n\t  var enable = (this.machine != null);\n\t  if (enable) {\n\t    rebindStepRun(buttons.step, buttons.run,\n\t      this.htmlForRunButton, this.htmlForPauseButton, this.machine);\n\t  }\n\t  buttons.all.forEach(function (b) { b.disabled = !enable; });\n\t};\n\t\n\tmodule.exports = TMSimulator;\n\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar map = {\n\t\t\"./_template.yaml\": 21,\n\t\t\"./binaryAdd.yaml\": 22,\n\t\t\"./binaryIncrement.yaml\": 23,\n\t\t\"./binaryMult.yaml\": 24,\n\t\t\"./busyBeaver3.yaml\": 25,\n\t\t\"./busyBeaver4.yaml\": 26,\n\t\t\"./copy1s.yaml\": 27,\n\t\t\"./divisibleBy3.yaml\": 28,\n\t\t\"./divisibleBy3Base10.yaml\": 29,\n\t\t\"./lengthMult.yaml\": 30,\n\t\t\"./matchBinaryStrings.yaml\": 31,\n\t\t\"./matchThreeLengths.yaml\": 32,\n\t\t\"./palindrome.yaml\": 33,\n\t\t\"./powersOfTwo.yaml\": 34,\n\t\t\"./repeat01.yaml\": 35,\n\t\t\"./unaryMult.yaml\": 36\n\t};\n\tfunction webpackContext(req) {\n\t\treturn __webpack_require__(webpackContextResolve(req));\n\t};\n\tfunction webpackContextResolve(req) {\n\t\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n\t};\n\twebpackContext.keys = function webpackContextKeys() {\n\t\treturn Object.keys(map);\n\t};\n\twebpackContext.resolve = webpackContextResolve;\n\tmodule.exports = webpackContext;\n\twebpackContext.id = 40;\n\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t/**\n\t * Displays a table of keyboard shortcuts.\n\t */\n\t\n\tvar d3 = __webpack_require__(2);\n\t\n\tfunction identity(x) { return x; }\n\t\n\t/**\n\t * Renders a table, using three layers of list nesting: tbody, tr, td.\n\t * @param  {[ [[HTML]] ]}     data\n\t * @param  {HTMLTableElement} table\n\t * @return {D3Selection}            D3 selection of the <tbody> elements\n\t */\n\tfunction renderTable(data, table) {\n\t  var tbody = d3.select(table).selectAll('tbody')\n\t      .data(data)\n\t    .enter().append('tbody');\n\t\n\t  var tr = tbody.selectAll('tr')\n\t      .data(identity)\n\t    .enter().append('tr');\n\t\n\t  tr.selectAll('td')\n\t      .data(identity)\n\t    .enter().append('td')\n\t      .html(identity);\n\t\n\t  return tbody;\n\t}\n\t\n\t\n\t// type Key = string;\n\t// type KeyList = [Key];\n\t\n\t// Key -> Key\n\tfunction abbreviateKey(key) {\n\t  switch (key) {\n\t    case 'Command': return 'Cmd';\n\t    case 'Option':  return 'Opt';\n\t    case 'Up':      return '↑';\n\t    case 'Down':    return '↓';\n\t    case 'Left':    return '←';\n\t    case 'Right':   return '→';\n\t    default:        return key;\n\t  }\n\t}\n\t\n\t// KeyList -> HTML\n\tfunction keylistToHTML(keys) {\n\t  return keys.map(function (key) {\n\t    return '<kbd>' + key + '</kbd>';\n\t  }).join('-');\n\t}\n\t\n\t// Commands -> String -> KeyList\n\tfunction createGetKeylist(commands) {\n\t  var platform = commands.platform;\n\t  // workaround: some ace keybindings for Mac use Alt instead of Option\n\t  var altToOption = platform !== 'mac' ? identity : function (key) {\n\t    return (key === 'Alt') ? 'Option' : key;\n\t  };\n\t\n\t  return function getKeylist(name) {\n\t    return commands.commands[name].bindKey[platform].split('-').map(altToOption);\n\t  };\n\t}\n\t\n\t\n\t// Fills a <table> with some default keyboard shortcuts.\n\tfunction main(commands, table) {\n\t  var getKeylist = createGetKeylist(commands);\n\t\n\t  return renderTable(entries.map(function (group) {\n\t    return group.map(function (d) {\n\t      return [\n\t        keylistToHTML(getKeylist(d.name).map(abbreviateKey)),\n\t        d.desc\n\t      ];\n\t    });\n\t  }), table);\n\t}\n\t\n\tvar entries = [\n\t  [\n\t    { name: 'save', desc: 'Load machine<br> <small>Save changes and load the machine.</small>' }\n\t  ], [\n\t    { name: 'togglecomment', desc: 'Toggle comment' },\n\t    { name: 'indent', desc: 'Indent selection' },\n\t    { name: 'outdent', desc: 'Unindent selection' }\n\t  ], [\n\t    { name: 'movelinesup', desc: 'Move line up' },\n\t    { name: 'movelinesdown', desc: 'Move line down' },\n\t    { name: 'duplicateSelection', desc: 'Duplicate line/selection' }\n\t  ], [\n\t    { name: 'selectMoreAfter', desc: 'Add next occurrence to selection<br> <small>Like a quick “find”. Useful for renaming things.</small>' },\n\t    { name: 'find', desc: 'Find' },\n\t    { name: 'replace', desc: 'Find and Replace' }\n\t  ]\n\t];\n\t\n\t\n\texports.main = main;\n\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// var d3 = require('d3');\n\tvar $ = __webpack_require__(4); // for event delegation\n\t\n\tfunction identity(x) { return x; }\n\tfunction head(array) { return array[0]; }\n\t\n\t/**\n\t * A <table> that includes a checkbox in front of each row,\n\t * and a header checkbox to (de)select all rows.\n\t * @param {D3Selection<HTMLTableElement>} args.table empty table to use\n\t * @param {[string]}    [args.headers] column headers\n\t * @param {[[string]]}  [args.data]    table data\n\t */\n\tfunction CheckboxTable(args) {\n\t  this.table = args.table;\n\t  this.headerRow = this.table.append('thead').append('tr');\n\t  this.tbody = this.table.append('tbody');\n\t  // header checkbox (selects/deselects all checkboxes)\n\t  var self = this;\n\t  this.headerCheckbox = this.headerRow\n\t    .append('th')\n\t      .attr('class', 'checkbox-cell')\n\t    .append('input')\n\t      .attr('type', 'checkbox')\n\t      .on('click', /* @this checkbox */ function () {\n\t        self.getCheckboxes().property('checked', this.checked);\n\t        self.onChange();\n\t      });\n\t  $(this.tbody.node()).on('click', 'tr', /* @this tr */ function (e) {\n\t    // treat whole <tr> as click zone\n\t    if (e.target.tagName !== 'INPUT') {\n\t      var box = this.querySelector('input[type=\"checkbox\"]');\n\t      box.checked = !box.checked;\n\t    }\n\t    // update header checkbox\n\t    self.refresh();\n\t    self.onChange();\n\t  });\n\t  // content\n\t  args.headers && this.setHeaders(args.headers);\n\t  args.data && this.setData(args.data);\n\t}\n\t\n\t/**\n\t * Set the column headers.\n\t * @param {[string]} headers\n\t */\n\tCheckboxTable.prototype.setHeaders = function (headers) {\n\t  var th = this.headerRow\n\t    .selectAll('th:not(.checkbox-cell)')\n\t      .data(headers);\n\t  th.exit().remove();\n\t  th.enter().append('th');\n\t  th.text(identity);\n\t};\n\t\n\t/**\n\t * Set the table body data.\n\t *\n\t * Each row begins with a checkbox whose .value is the first cell.\n\t * Rows are keyed by the first cell when updating data.\n\t * @param {[[string]]} data\n\t * @return this\n\t */\n\tCheckboxTable.prototype.setData = function (data) {\n\t  var tr = this.tbody.selectAll('tr')\n\t      .data(data, head);\n\t  tr.exit().remove();\n\t  tr.enter()\n\t    .append('tr')\n\t  // checkbox at the start of each row\n\t    .append('td')\n\t      .attr('class', 'checkbox-cell')\n\t    .append('input')\n\t      .attr({\n\t        type: 'checkbox',\n\t        value: head\n\t      });\n\t  tr.order();\n\t  // row cells\n\t  var td = tr.selectAll('td:not(.checkbox-cell)')\n\t      .data(identity);\n\t  td.exit().remove();\n\t  td.enter().append('td');\n\t  td.text(identity);\n\t\n\t  return this;\n\t};\n\t\n\tCheckboxTable.prototype.getCheckboxes = function () {\n\t  return this.tbody.selectAll('input[type=\"checkbox\"]');\n\t};\n\t\n\tCheckboxTable.prototype.getCheckedValues = function () {\n\t  return this.tbody.selectAll('input[type=\"checkbox\"]:checked')[0]\n\t    .map(function (x) { return x.value; });\n\t};\n\t\n\tCheckboxTable.prototype.isCheckedEmpty = function () {\n\t  var headerBox = this.headerCheckbox.node();\n\t  return !(headerBox.checked || headerBox.indeterminate);\n\t};\n\t\n\t/**\n\t * Refresh the header checkbox (called after a row checkbox is toggled).\n\t */\n\tCheckboxTable.prototype.refresh = function () {\n\t  var headerBox = this.headerCheckbox.node();\n\t  var boxes = this.getCheckboxes();\n\t\n\t  var total = boxes.size();\n\t  var checked = boxes.filter(':checked').size();\n\t  if (checked === 0) {\n\t    headerBox.checked = false;\n\t  } else if (checked === total) {\n\t    headerBox.checked = true;\n\t  }\n\t  headerBox.indeterminate = (0 < checked && checked < total);\n\t};\n\t\n\t// configurable. called after a click toggles a row or header checkbox.\n\tCheckboxTable.prototype.onChange = function () {\n\t};\n\t\n\tmodule.exports = CheckboxTable;\n\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/* global FileReader:false */\n\tvar Promise = __webpack_require__(8); // eslint-disable-line no-shadow\n\t\n\t// arguments are forwarded to FileReader.readAsText\n\t// (Blob, ?encoding) -> Promise\n\tfunction readAsText() {\n\t  var args = arguments;\n\t  return new Promise(function (resolve, reject, onCancel) {\n\t    var reader = new FileReader();\n\t    reader.addEventListener('load', function () {\n\t      resolve(reader.result);\n\t    });\n\t    reader.addEventListener('error', function () {\n\t      reject(reader.error);\n\t    });\n\t    onCancel && onCancel(function () {\n\t      try { reader.abort(); } catch (e) {/* */}\n\t    });\n\t\n\t    reader.readAsText.apply(reader, args);\n\t  });\n\t}\n\t\n\texports.readAsText = readAsText;\n\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/* eslint-env browser */\n\tvar format = __webpack_require__(5);\n\tvar createGist = __webpack_require__(14).createGist;\n\tvar Clipboard = __webpack_require__(50);\n\tvar $ = __webpack_require__(4); // for bootstrap tooltip\n\t\n\t// https://github.com/Modernizr/Modernizr/blob/master/feature-detects/a/download.js\n\tvar canUseDownloadAttribute =\n\t  !window.externalHost && 'download' in document.createElement('a');\n\t\n\t// can copy to clipboard programmatically?\n\tvar canUseCopyCommand = (function () {\n\t  try {\n\t    return document.queryCommandSupported('copy');\n\t  } catch (e) {\n\t    return false;\n\t  }\n\t}());\n\t\n\t// Add event handlers to select an HTMLInputElement's text on focus.\n\tfunction addSelectOnFocus(element) {\n\t  element.addEventListener('focus', function selectAll(e) {\n\t    e.target.select();\n\t  });\n\t  // Safari workaround\n\t  element.addEventListener('mouseup', function (e) {\n\t    e.preventDefault();\n\t  });\n\t}\n\t\n\t// Show a one-time tooltip.\n\t// NB. an existing title attribute overrides the tooltip options.\n\tfunction showTransientTooltip($element, options) {\n\t  $element.tooltip(options)\n\t    .tooltip('show')\n\t    .one('hidden.bs.tooltip', function () {\n\t      $element.tooltip('destroy');\n\t    });\n\t}\n\t\n\tfunction showCopiedTooltip(element) {\n\t  showTransientTooltip($(element), {title: 'Copied!', placement: 'bottom'});\n\t}\n\t\n\t\n\t///////////////////////\n\t// Share with GitHub //\n\t///////////////////////\n\t\n\t/**\n\t * Generate a new gist and display a shareable link.\n\t * @param  {HTMLElement} container  Container to use for displaying the link.\n\t * @param  {HTMLButtonElement} button\n\t * @param  {string} filename\n\t * @param  {string} contents  The file contents.\n\t * @return {Promise}          Cancellable promise to create the gist.\n\t */\n\tfunction generateGist(container, button, filename, contents) {\n\t  var oldButtonText = button.textContent;\n\t  button.textContent = 'Loading…';\n\t  button.disabled = true;\n\t\n\t  var payload = {\n\t    files: {},\n\t    description: 'Turing machine for http://turingmachine.io',\n\t    public: true\n\t  };\n\t  payload.files[filename] = {content: contents};\n\t\n\t  return createGist(payload).then(function (response) {\n\t    // Show link on success\n\t    var id = response.id;\n\t    showGeneratedGist(container, 'http://turingmachine.io/?import-gist=' + id);\n\t  }).catch(function (reason) {\n\t    // Alert error on failure\n\t    var message = (function () {\n\t      var xhr = reason.xhr;\n\t      try {\n\t        return 'Response from GitHub: “' + xhr.responseJSON.message + '”';\n\t      } catch (e) {\n\t        if (xhr.status > 0) {\n\t          return 'HTTP status code: ' + xhr.status + ' ' + xhr.statusText;\n\t        } else {\n\t          return 'GitHub could not be reached.\\nYour Internet connection may be offline.';\n\t        }\n\t      }\n\t    }());\n\t    alert('Could not create new gist.\\n\\n' + message);\n\t\n\t    button.disabled = false;\n\t    button.textContent = oldButtonText;\n\t  });\n\t}\n\t\n\tfunction showGeneratedGist(container, url) {\n\t  container.innerHTML =\n\t    '<input id=\"sharedPermalink\" type=\"url\" class=\"form-control\" readonly>' +\n\t    '<button type=\"button\" class=\"btn btn-default\" data-clipboard-target=\"#sharedPermalink\">' +\n\t    '<span class=\"glyphicon glyphicon-copy\" aria-hidden=\"true\"></span>' +\n\t    '</button>';\n\t  var urlInput = container.querySelector('input');\n\t  urlInput.value = url;\n\t  urlInput.size = url.length + 2;\n\t  addSelectOnFocus(urlInput);\n\t  urlInput.focus();\n\t}\n\t\n\tfunction createGenerateGistButton(container) {\n\t  container.innerHTML =\n\t  '<button type=\"button\" class=\"btn btn-default\">Create permalink</button>' +\n\t  '<p class=\"help-block\">This will create and link to a new' +\n\t    ' <a href=\"https://help.github.com/articles/creating-gists/#creating-an-anonymous-gist\"' +\n\t    ' target=\"_blank\">read-only</a> GitHub gist.' +\n\t  '</p>';\n\t  return container.querySelector('button');\n\t}\n\t\n\t\n\t///////////////////\n\t// Download file //\n\t///////////////////\n\t\n\t// Create a link button if canUseDownloadAttribute, otherwise a link with instructions.\n\tfunction createDownloadLink(filename, contents) {\n\t  var link = document.createElement('a');\n\t  link.href = 'data:text/x-yaml;charset=utf-8,' + encodeURIComponent(contents);\n\t  link.target = '_blank';\n\t  link.download = filename;\n\t\n\t  if (canUseDownloadAttribute) {\n\t    link.textContent = 'Download document';\n\t    link.className = 'btn btn-primary';\n\t    return link;\n\t  } else {\n\t    link.textContent = 'Right-click here and choose “Save target as…” or “Download Linked File As…”';\n\t    var p = document.createElement('p');\n\t    p.innerHTML = ', <br>then name the file to end with <code>.yaml</code>';\n\t    p.insertBefore(link, p.firstChild);\n\t    return p;\n\t  }\n\t}\n\t\n\t\n\t////////////\n\t// Common //\n\t////////////\n\t\n\tfunction init(args) {\n\t  var $dialog = args.$dialog,\n\t      getCurrentDocument = args.getCurrentDocument,\n\t      getIsSynced = args.getIsSynced,\n\t      gistContainer = args.gistContainer,\n\t      downloadContainer = args.downloadContainer,\n\t      textarea = args.textarea;\n\t\n\t  if (canUseDownloadAttribute) {\n\t    $dialog.addClass('download-attr');\n\t  }\n\t  if (!canUseCopyCommand) {\n\t    $dialog.addClass('no-copycommand');\n\t  }\n\t  gistContainer.className = 'form-group form-inline';\n\t  addSelectOnFocus(textarea);\n\t\n\t  function setupDialog() {\n\t    var doc = getCurrentDocument();\n\t    var filename = doc.name + '.yaml';\n\t    var contents = format.stringifyDocument(doc);\n\t    var gistPromise;\n\t\n\t    // warn about unsynced changes\n\t    var $alert;\n\t    if (!getIsSynced()) {\n\t      $alert = $(\n\t        '<div class=\"alert alert-warning\" role=\"alert\">' +\n\t        'The code editor has <strong>unsynced changes</strong> and might not correspond with the diagram.<br>' +\n\t        'Click <q>Load machine</q> to try to sync them. Otherwise, two sets of code will be exported.' +\n\t        '</div>'\n\t      ).prependTo($dialog.find('.modal-body'));\n\t    }\n\t\n\t    createGenerateGistButton(gistContainer).addEventListener('click', function (e) {\n\t      gistPromise = generateGist(gistContainer, e.target, filename, contents);\n\t    });\n\t\n\t    // \"Download document\" button link\n\t    downloadContainer.appendChild(createDownloadLink(filename, contents));\n\t    // <textarea> for document contents\n\t    textarea.value = contents;\n\t\n\t    var clipboard = new Clipboard('[data-clipboard-target]');\n\t    clipboard.on('success', function (e) {\n\t      showCopiedTooltip(e.trigger);\n\t      e.clearSelection();\n\t    });\n\t\n\t    // return cleanup function\n\t    return function () {\n\t      if (gistPromise) {\n\t        try { gistPromise.cancel(); } catch (e) {/* */}\n\t      }\n\t      if ($alert) { $alert.remove(); }\n\t      gistContainer.textContent = '';\n\t      downloadContainer.textContent = '';\n\t      textarea.value = '';\n\t      clipboard.destroy();\n\t    };\n\t  }\n\t\n\t  $dialog.on('show.bs.modal', function () {\n\t    var cleanup = setupDialog();\n\t    $dialog.one('hidden.bs.modal', cleanup);\n\t  });\n\t  $dialog.on('shown.bs.modal', function () {\n\t    // workaround \"Copy to clipboard\" .focus() scrolling down to <textarea>\n\t    // note: doesn't work when <textarea> is completely out of view\n\t    textarea.setSelectionRange(0,0);\n\t  });\n\t}\n\t\n\texports.init = init;\n\n\n/***/ },\n/* 45 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/* global document: false */\n\tvar docimport = __webpack_require__(15);\n\tvar format = __webpack_require__(5);\n\tvar _ = __webpack_require__(1);\n\tvar d3 = __webpack_require__(2);\n\t\n\t// Init the import panel and attach event handlers\n\t// {$dialog: jQuery, gistIDForm: HTMLFormElement, importArgs: Object} -> void\n\tfunction init(args) {\n\t  var $dialog = args.$dialog,\n\t      gistIDForm = args.gistIDForm,\n\t      importArgs = args.importArgs;\n\t\n\t  function hideDialog() {\n\t    $dialog.modal('hide');\n\t    // Workaround needed for opening another modal before a modal is done hiding.\n\t    // Without this, the <body> scrolls instead of the modal:\n\t    // modal2.show locks body scroll => modal1.hidden unlocks body scroll\n\t    // while modal2 is still open.\n\t    var nextDialog = importArgs.dialogNode;\n\t    $dialog.one('hidden.bs.modal', function () {\n\t      if (nextDialog.classList.contains('in')) {\n\t        document.body.classList.add('modal-open');\n\t      }\n\t    });\n\t  }\n\t\n\t  // Panel: From GitHub gist\n\t  gistIDForm.addEventListener('submit', function (e) {\n\t    e.preventDefault();\n\t    hideDialog();\n\t\n\t    var gistID = gistIDForm.querySelector('input[type=\"text\"]').value;\n\t    docimport.importGist(_.assign({gistID: gistID}, importArgs));\n\t  });\n\t\n\t  // Panel: From files\n\t  (function () {\n\t    // TODO: factor out element IDs and containers into interface\n\t    var panelBody = document.querySelector('#importFilesPanel > .panel-body');\n\t    // <input type=\"file\">\n\t    var fileInput = panelBody.querySelector('input[type=\"file\"]');\n\t    var importFilesButton = document.getElementById('importFilesButton');\n\t    importFilesButton.addEventListener('click', function () {\n\t      hideDialog();\n\t      docimport.importLocalFiles(_.assign({files: fileInput.files}, importArgs));\n\t    });\n\t    // <textarea>\n\t    var textarea = panelBody.querySelector('textarea');\n\t    var importContentsButton = document.getElementById('importContentsButton');\n\t    importContentsButton.parentNode.style.position = 'relative';\n\t    importContentsButton.addEventListener('click', function (e) {\n\t      if (importDocumentContents(\n\t        { containers: {status: e.target.parentNode, details: panelBody },\n\t          importDocument: importArgs.importDocument },\n\t        textarea.value\n\t      )) {\n\t        textarea.select();\n\t      }\n\t    });\n\t  }());\n\t}\n\t\n\t///////////////////////////////\n\t// Import from pasted string //\n\t///////////////////////////////\n\t\n\t// () -> HTMLButtonElement\n\tfunction createCloseIcon() {\n\t  return d3.select(document.createElement('button'))\n\t      .attr({class: 'close', 'aria-label': 'Close'})\n\t      .html('<span aria-hidden=\"true\">&times;</span>')\n\t    .node();\n\t}\n\t\n\t// Show import outcome (success/failure) and error (if any)\n\t// ({status: HTMLElement, details: HTMLElement}, ?Error) -> void\n\tfunction showImportContentOutcome(containers, error) {\n\t  var statusContainer = d3.select(containers.status),\n\t      detailsContainer = d3.select(containers.details);\n\t  statusContainer.selectAll('[role=\"alert\"]').remove();\n\t  detailsContainer.selectAll('.alert').remove();\n\t  var status = statusContainer.append('span')\n\t      .attr({role: 'alert'})\n\t      .style({\n\t        position: 'absolute', left: 0, width: '40%', // center between left and button\n\t        top: '50%', transform: 'translateY(-60%)' // center vertically\n\t      });\n\t\n\t  // () -> string\n\t  function showErrorDetails() {\n\t    var details = detailsContainer.append('div')\n\t        .attr({role: 'alert', class: 'alert alert-danger'})\n\t        .style('margin-top', '1em');\n\t    details.append(createCloseIcon)\n\t        .attr('data-dismiss', 'alert')\n\t        .on('click', function () {\n\t          status.remove(); // dismiss details => also dismiss status\n\t        });\n\t    if (error instanceof format.YAMLException) {\n\t      details.append('h4').text('Not valid YAML'); // only \".alert h4\" has margin-top: 0\n\t      details.append('pre').text(error.message);\n\t    } else if (error instanceof format.InvalidDocumentError) {\n\t      details.append('span')\n\t          .text(error.message.replace(/\\.?$/, '.')); // add period if missing\n\t    } else {\n\t      details.append('h4').text('Unexpected error');\n\t      details.append('pre').text(String(error));\n\t      return 'Import failed';\n\t    }\n\t    return 'Not a valid document';\n\t  }\n\t\n\t  if (error) {\n\t    var statusSummary = showErrorDetails();\n\t    status.attr({class: 'text-danger'})\n\t        .html('<span class=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span> '\n\t                + statusSummary);\n\t  } else {\n\t    status.attr({class: 'text-success'})\n\t        .html('<span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span> '\n\t                + 'Import succeeded')\n\t      .transition()\n\t        .delay(2500)\n\t        .duration(2000)\n\t        .style('opacity', 0)\n\t        .remove();\n\t  }\n\t}\n\t\n\t// returns true if import succeeded\n\tfunction importDocumentContents(opts, content) {\n\t  var containers = opts.containers,\n\t      importDocument = opts.importDocument;\n\t\n\t  var error = (function () {\n\t    try {\n\t      importDocument(format.parseDocument(content));\n\t    } catch (e) {\n\t      return e;\n\t    }\n\t  }());\n\t  showImportContentOutcome(containers, error);\n\t  return (error == null);\n\t}\n\t\n\texports.init = init;\n\n\n/***/ },\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */,\n/* 50 */\n/***/ function(module, exports) {\n\n\tmodule.exports = Clipboard;\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** main.bundle.js\n **/","// main entry point for index.html.\n// important: make sure to coordinate variables and elements between the HTML and JS\n'use strict';\n\n/* eslint-env browser */\nvar TMDocumentController = require('./TMDocumentController'),\n    DocumentMenu = require('./DocumentMenu'),\n    examples = require('./examples'),\n    toDocFragment = require('./util').toDocFragment;\nvar ace = require('ace-builds/src-min-noconflict');\nvar $ = require('jquery'); // for Bootstrap modal dialog events\n\n// load up front so going offline doesn't break anything\n// (for snippet placeholders, used by \"New blank document\")\nace.config.loadModule('ace/ext/language_tools');\n\nfunction getId(id) { return document.getElementById(id); }\n\nfunction addAlertPane(type, html) {\n  getId('diagram-column').insertAdjacentHTML('afterbegin',\n    '<div class=\"alert alert-'+type+' alert-dismissible\" role=\"alert\">' +\n    '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">×</span></button>' +\n    html +\n    '</div>');\n}\n\n\n//////////////////////////\n// Compatibility Checks //\n//////////////////////////\n\n(function () {\n  // Warn when falling back to RAM-only storage\n  // NB. This mainly covers local storage errors and Safari's Private Browsing.\n  if (!require('./storage').canUseLocalStorage) {\n    addAlertPane('info', '<p>Local storage is unavailable. ' +\n      'Your browser could be in Private Browsing mode, or it might not support <a href=\"http://caniuse.com/#feat=namevalue-storage\" target=\"_blank\">local storage</a>.</p>' +\n      '<strong>Any changes will be lost after leaving the webpage.</strong>');\n  }\n\n  /*\n  Warn for IE 10 and under, which misbehave and lack certain features.\n  Examples:\n    • IE 9 and under don't support .classList.\n    • IE 10's \"storage event is fired even on the originating document where it occurred.\"\n      http://caniuse.com/#feat=namevalue-storage\n  */\n\n  // Detect IE 10 and under (http://stackoverflow.com/a/16135889)\n  var isIEUnder11 = new Function('/*@cc_on return @_jscript_version; @*/')() < 11;\n  if (isIEUnder11) {\n    addAlertPane('warning',\n      '<p><strong>Your <a href=\"http://whatbrowser.org\" target=\"_blank\">web browser</a> is out of date</strong> and does not support some features used by this program.<br>' +\n      '<em>The page may not work correctly, and data may be lost.</em></p>' +\n      'Please update your browser, or use another browser such as <a href=\"http://www.google.com/chrome/browser/\" target=\"_blank\">Chrome</a> or <a href=\"http://getfirefox.com\" target=\"_blank\">Firefox</a>.');\n  }\n\n  // Warn about iOS local storage volatility\n  $(function () {\n    // Detect iOS (http://stackoverflow.com/a/9039885)\n    var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n    if (isIOS) {\n      getId('misc-tips-list').insertAdjacentHTML('afterbegin',\n        '<li><strong class=\"text-warning\">Important note for iOS</strong>: ' +\n        'iOS saves browser local storage in the cache folder, which is <strong>not backed up</strong>, and is ' +\n        '<q cite=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API#Browser_compatibility\"><strong>subject to occasional clean up</strong>, ' +\n        'at the behest of the OS, typically if space is short.</q></li>');\n    }\n  });\n}());\n\n\n/////////////////////\n// Import & Export //\n/////////////////////\n\nfunction importDocument(obj) {\n  // duplicate data into the menu, then open it.\n  menu.duplicate(obj, {select: true, type: 'open'});\n}\n\n$(function () {\n  // Enable buttons now that handlers are ready\n  $('.tm-needsready').prop('disabled', false);\n\n  // Run import from URL query (if any)\n  var importArgs = {\n    dialogNode: getId('importDialog'),\n    importDocument: importDocument\n  };\n  require('./sharing/import').runImport(importArgs);\n  // Init import dialog\n  var $importPanel = $('#importPanel');\n  $importPanel.one('show.bs.modal', function () {\n    require('./sharing/import-panel').init({\n      $dialog: $importPanel,\n      gistIDForm: getId('gistIDForm'),\n      importArgs: importArgs\n    });\n  });\n  // Init export dialog\n  var exportPanel = getId('exportPanel');\n  require('./sharing/export-panel').init({\n    $dialog: $(exportPanel),\n    getCurrentDocument: function () {\n      controller.save(); // IMPORTANT: save changes, otherwise data model is out of date\n      return menu.currentDocument;\n    },\n    getIsSynced: controller.getIsSynced.bind(controller),\n    gistContainer: getId('shareGistContainer'),\n    downloadContainer: getId('exportDownloadContainer'),\n    copyContentsButton: getId('copyContentsButton'),\n    textarea: exportPanel.querySelector('textarea')\n  });\n});\n\n\n///////////////////\n// Document List //\n///////////////////\n\nvar menu = (function () {\n  var select = document.getElementById('tm-doc-menu');\n  // Group: Documents\n  var docGroup = document.createElement('optgroup');\n  docGroup.label = 'Documents';\n  select.appendChild(docGroup);\n  // Group: Examples\n  var exampleGroup = document.createElement('optgroup');\n  exampleGroup.label = 'Examples';\n  exampleGroup.appendChild(toDocFragment(examples.list.map(\n    DocumentMenu.prototype.optionFromDocument)));\n  select.appendChild(exampleGroup);\n\n  return new DocumentMenu({\n    menu: select,\n    group: docGroup,\n    storagePrefix: 'tm.docs',\n    firsttimeDocID: examples.firsttimeDocID\n  });\n})();\n\n\n/////////////////\n// \"Edit\" Menu //\n/////////////////\n\n(function () {\n  menu.onChange = function (doc, opts) {\n    switch (opts && opts.type) {\n      case 'duplicate':\n        controller.setBackingDocument(doc);\n        break;\n      case 'delete':\n        controller.forceLoadDocument(doc);\n        break;\n      default:\n        controller.openDocument(doc);\n    }\n    refreshEditMenu();\n  };\n\n  // Refresh the \"Edit\" menu items depending on document vs. example.\n  var refreshEditMenu = (function () {\n    var renameLink = document.querySelector('[data-target=\"#renameDialog\"]');\n    var deleteLink = document.querySelector('[data-target=\"#deleteDialog\"]');\n    var wasExample;\n    function renameExample() {\n      // duplicate, then rename the duplicate.\n      // how it works: switch to duplicate document ->\n      //   refreshEditMenu() enables rename dialog -> event bubbles up -> dialog opens.\n      // this might be the simplest way; Event.stopPropagation leaves the dropdown hanging.\n      duplicateDocument();\n    }\n\n    return function () {\n      var isExample = menu.currentDocument.isExample;\n      if (wasExample !== isExample) {\n        if (!isExample) {\n          renameLink.textContent = 'Rename…';\n          renameLink.removeEventListener('click', renameExample);\n          renameLink.setAttribute('data-toggle', 'modal');\n          deleteLink.textContent = 'Delete…';\n          deleteLink.setAttribute('data-target', '#deleteDialog');\n        } else {\n          renameLink.textContent = 'Rename a copy…';\n          renameLink.addEventListener('click', renameExample);\n          renameLink.removeAttribute('data-toggle');\n          deleteLink.textContent = 'Reset this example…';\n          deleteLink.setAttribute('data-target', '#resetExampleDialog');\n        }\n        wasExample = isExample;\n      }\n    };\n  }());\n  refreshEditMenu();\n\n  // only swap out the storage backing; don't affect views or undo history\n  function duplicateDocument() {\n    controller.save();\n    menu.duplicate(menu.currentDocument, {select: true});\n  }\n\n  function newBlankDocument() {\n    menu.newDocument({select: true});\n    // load up starter template\n    if (controller.editor.insertSnippet) { // async loaded\n      controller.editor.insertSnippet(examples.blankTemplate);\n      controller.loadEditorSource();\n    }\n  }\n\n  var $renameDialog = $(getId('renameDialog'));\n  [{id: 'tm-doc-action-duplicate', callback: duplicateDocument},\n  {id: 'tm-doc-action-newblank', callback: newBlankDocument}\n  ].forEach(function (item) {\n    document.getElementById(item.id).addEventListener('click', function (e) {\n      e.preventDefault();\n      item.callback(e);\n\n      $renameDialog.modal({keyboard: false})\n        .one('hidden.bs.modal', function () {\n          controller.editor.focus();\n        });\n    });\n  });\n}());\n\n\n/////////////\n// Dialogs //\n/////////////\n\n(function () {\n  // Rename\n  var $renameDialog = $(getId('renameDialog'));\n  var renameBox = getId('renameDialogInput');\n  $renameDialog\n    .on('show.bs.modal', function () {\n      renameBox.value = menu.currentOption.text;\n    })\n    .on('shown.bs.modal', function () {\n      renameBox.select();\n    })\n    // NB. remember data-keyboard=\"false\" on the triggering element,\n    // to prevent closing with Esc and causing a save.\n    // remark: an exception thrown on 'hide' prevents the dialog from closing,\n    // so save during 'hidden' instead.\n    .on('hidden.bs.modal', function () {\n      var newName = renameBox.value;\n      if (menu.currentOption.text !== newName) {\n        menu.rename(newName);\n      }\n      renameBox.value = '';\n    });\n  document.getElementById('renameDialogForm').addEventListener('submit', function (e) {\n    e.preventDefault();\n    $renameDialog.modal('hide');\n  });\n\n  // Delete\n  function deleteDocument() {\n    menu.delete();\n  }\n  document.getElementById('tm-doc-action-delete').addEventListener('click', deleteDocument);\n\n  // Reset Example\n  function discardReset() {\n    menu.delete();\n    // load manually since example stays and selection doesn't change\n    controller.forceLoadDocument(menu.currentDocument);\n  }\n  function saveReset() {\n    menu.duplicate(menu.currentDocument, {select: false});\n    discardReset();\n  }\n  document.getElementById('tm-doc-action-resetdiscard').addEventListener('click', discardReset);\n  document.getElementById('tm-doc-action-resetsave').addEventListener('click', saveReset);\n}());\n\n////////////////\n// Controller //\n////////////////\n\nvar controller = (function () {\n  function getButton(container, type) {\n    return container.querySelector('button.tm-' + type);\n  }\n  var editor = document.getElementById('editor-container');\n  // button containers\n  var sim = document.getElementById('controls-container');\n  var ed = editor.parentNode;\n\n  return new TMDocumentController({\n    simulator: document.getElementById('machine-container'),\n    editorAlerts: document.getElementById('editor-alerts-container'),\n    editor: editor\n  }, {\n    simulator: {\n      run: getButton(sim, 'run'),\n      step: getButton(sim, 'step'),\n      reset: getButton(sim, 'reset')\n    },\n    editor: {\n      load: getButton(ed, 'editor-load'),\n      revert: getButton(ed, 'editor-revert')\n    }\n  }, menu.currentDocument);\n}());\n\ncontroller.editor.setTheme('ace/theme/chrome');\ncontroller.editor.commands.addCommand({\n  name: 'save',\n  bindKey: { mac: 'Cmd-S', win: 'Ctrl-S' },\n  exec: function () {\n    controller.loadEditorSource();\n  }\n});\ncontroller.editor.session.setUseWrapMode(true);\n$(function () {\n  try {\n    require('./kbdshortcuts').main(controller.editor.commands,\n      getId('kbdShortcutTable')\n    );\n  } catch (e) {\n    /* */\n  }\n});\n\nwindow.addEventListener('beforeunload', function (ev) {\n  try {\n    controller.save();\n    menu.saveCurrentDocID();\n  } catch (error) {\n    addAlertPane('warning',\n      '<h4>The current document could not be saved.</h4>'+\n      '<p>It’s likely that the <a href=\"https://en.wikipedia.org/wiki/Web_storage#Storage_size\" target=\"_blank\">local storage quota</a> was exceeded. ' +\n      'Try downloading a copy of this document, then deleting other documents to make space.</p>');\n    return (ev || window.event).returnValue =\n      'There is not enough space left to save the current document.';\n  }\n});\n\n// Keep the current document in sync across tabs/windows\nwindow.addEventListener('blur', function () {\n  // One tab saves the data...\n  controller.save();\n});\n(function () {\n  // ...and the other tab loads it.\n  var isReloading = false;\n  require('./TMDocument').addOutsideChangeListener(function (docID, prop) {\n    if (docID === controller.getDocument().id && prop !== 'name' && !isReloading) {\n      // Batch together property changes into one reload\n      isReloading = true;\n      setTimeout(function () {\n        isReloading = false;\n        // Preserve undo history\n        controller.forceLoadDocument(controller.getDocument(), true);\n\n      }, 100);\n    }\n  });\n}());\n\n// For interaction/debugging\nexports.controller = controller;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/main.js\n ** module id = 0\n ** module chunks = 1\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 4\n ** module chunks = 1\n **/","'use strict';\n\nvar jsyaml = require('js-yaml'),\n    _ = require('lodash/fp');\n\n// Document Serialization\n\nvar docToYaml = {\n  name: 'name',\n  sourceCode: 'source code',\n  positionTable: 'positions',\n  editorSourceCode: 'editor contents'\n};\nvar yamlToDoc = _.invert(docToYaml);\n\n// like _.mapKeys, but only using the keys specified in a mapping object.\n// {[key: string] -> string} -> ?Object -> Object\nfunction mapKeys(mapping) {\n  return function (input) {\n    var output = {};\n    if (input != null) {\n      Object.keys(mapping).forEach(function (fromKey) {\n        var toKey = mapping[fromKey];\n        output[toKey] = input[fromKey];\n      });\n    }\n    return output;\n  };\n}\n\n// we want parseDocument . stringifyDocument = identity, up to null == undefined.\n\n/**\n * Serialize a document.\n * For each state node position, only .x, .y, and .fixed are saved.\n * .fixed is omitted if true (its default value).\n * @param  {TMDocument} doc document to serialize\n * @return {string}\n */\nvar stringifyDocument = _.flow(\n  mapKeys(docToYaml),\n  _.omitBy(function (x) { return x == null; }),\n  _.update('positions', _.mapValues(function (pos) {\n    return pos.fixed\n      ? {x: pos.x, y: pos.y}\n      : {x: pos.x, y: pos.y, fixed: false};\n  })),\n  // NB. lodash/fp/partialRight takes an array of arguments.\n  _.partialRight(jsyaml.safeDump, [{\n    flowLevel: 2,       // positions: one state per line\n    lineWidth: -1,      // don't wrap lines\n    noRefs: true,       // no aliases/references are used\n    noCompatMode: true  // use y: instead of 'y':\n  }])\n);\n\n/**\n * Deserialize a document.\n * State positions' .px and .py are optional and default to .x and .y.\n * .fixed defaults to true.\n * @param  {string} str    serialized document\n * @return {Object}        data usable in TMDocument.copyFrom()\n * @throws {YAMLException} on YAML syntax error\n * @throws {TypeError}     when missing \"source code\" string property\n */\nvar parseDocument = _.flow(\n  jsyaml.safeLoad,\n  _.update('positions', _.mapValues(function (pos) {\n    // NB. lodash/fp/defaults is swapped: 2nd takes precedence\n    return _.defaults({px: pos.x, py: pos.y, fixed: true}, pos);\n  })),\n  mapKeys(yamlToDoc),\n  checkData\n);\n\n// throw if \"source code\" attribute is missing or not a string\nfunction checkData(obj) {\n  if (obj == null || obj.sourceCode == null) {\n    throw new InvalidDocumentError('The “source code:” value is missing');\n  } else if (!_.isString(obj.sourceCode)) {\n    throw new InvalidDocumentError('The “source code:” value needs to be of type string');\n  }\n  return obj;\n}\n\n// for valid YAML that is not valid as a document\nfunction InvalidDocumentError(message) {\n  this.name = 'InvalidDocumentError';\n  this.message = message || 'Invalid document';\n  this.stack = (new Error()).stack;\n}\nInvalidDocumentError.prototype = Object.create(Error.prototype);\nInvalidDocumentError.prototype.constructor = InvalidDocumentError;\n\nexports.stringifyDocument = stringifyDocument;\nexports.parseDocument = parseDocument;\nexports.InvalidDocumentError = InvalidDocumentError;\n\n// Re-exports\nexports.YAMLException = jsyaml.YAMLException;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sharing/format.js\n ** module id = 5\n ** module chunks = 1\n **/","'use strict';\n\nvar isBrowserIEorEdge = require('./util').isBrowserIEorEdge;\n/* global localStorage:false, window:false */\n\n///////////////////////\n// Key-Value Storage //\n///////////////////////\n\nvar canUseLocalStorage = (function () {\n  // from modernizr v3.3.1 (modernizr.com)\n  var mod = 'modernizr';\n  try {\n    localStorage.setItem(mod, mod);\n    localStorage.removeItem(mod);\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n// RAM-only fallback\nvar RAMStorage = (function () {\n  var obj = {};\n  return Object.freeze({\n    get length() { return Object.keys(obj).length; },\n    key: function (n) { return (n in Object.keys(obj)) ? Object.keys(obj)[n] : null; },\n    getItem: function (key) { return {}.hasOwnProperty.call(obj, key) ? obj[key] : null; },\n    setItem: function (key, val) { obj[key] = String(val); },\n    removeItem: function (key) { delete obj[key]; },\n    clear: function () { obj = {}; }\n  });\n})();\n\nvar KeyValueStorage = (function () {\n  var s = canUseLocalStorage ? localStorage : RAMStorage;\n\n  // workaround IE/Edge firing events on its own window\n  var fromOwnWindow = isBrowserIEorEdge\n    ? function () { return window.document.hasFocus(); }\n    : function () { return false; };\n\n  return {\n    read  : s.getItem.bind(s),\n    write : s.setItem.bind(s),\n    remove: s.removeItem.bind(s),\n    // Registers a listener for StorageEvents from other tabs/windows.\n    addStorageListener: canUseLocalStorage\n      ? function (listener) {\n        window.addEventListener('storage', function (e) {\n          if (fromOwnWindow()) {\n            return;\n          }\n          if (e.storageArea === localStorage) {\n            listener(e);\n          }\n        });\n      }\n      : function () {},\n    removeStorageListener: canUseLocalStorage\n      ? window.removeEventListener.bind(window, 'storage')\n      : function () {}\n  };\n})();\n\n\nexports.canUseLocalStorage = canUseLocalStorage;\nexports.KeyValueStorage = KeyValueStorage;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/storage.js\n ** module id = 7\n ** module chunks = 1\n **/","module.exports = Promise;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Promise\"\n ** module id = 8\n ** module chunks = 1\n **/","'use strict';\n\nvar KeyValueStorage = require('./storage').KeyValueStorage,\n    examples = require('./examples'),\n    util = require('./util'),\n    _ = require('lodash/fp');\n\n/**\n * Document model (storage).\n * @param {string} docID Each document ID in a key-value store should be unique.\n *                       An ID is typically a timestamp. It should not contain '.'.\n */\nfunction TMDocument(docID) {\n  var preset = examples.get(docID);\n  Object.defineProperties(this, {\n    id:     { value: docID },\n    prefix: { value: 'doc.' + docID },\n    isExample: { value: preset ? true : false }\n  });\n  // fall back to reading presets for example documents\n  if (preset) {\n    Object.defineProperties(this, {\n      sourceCode: useFallbackGet(preset, this, 'sourceCode'),\n      // names are read-only\n      positionTable: useFallbackGet(preset, this, 'positionTable'),\n      name: {\n        get: function () { return preset.name; },\n        set: function () {}, // don't err when removing (set = null)\n        enumerable: true\n      }\n    });\n  }\n}\n\nfunction useFallbackGet(preset, obj, prop) {\n  var proto = Object.getPrototypeOf(obj);\n  var desc = Object.getOwnPropertyDescriptor(proto, prop);\n  var get = desc.get;\n  desc.get = function () {\n    return util.coalesce(get.call(obj), preset[prop]);\n  };\n  return desc;\n}\n\n// internal method.\nTMDocument.prototype.path = function (path) {\n  return [this.prefix, path].join('.');\n};\n\n(function () {\n  var store = KeyValueStorage;\n  var read = store.read.bind(store);\n  var write = function (key, val) {\n    if (val != null) {\n      store.write(key, val);\n    } else {\n      store.remove(key);\n    }\n  };\n  // var remove = store.remove.bind(store);\n  function stringProp(path) {\n    return {\n      get: function () { return read(this.path(path)); },\n      set: function (val) { write(this.path(path), val); },\n      enumerable: true\n    };\n  }\n\n  var propDescriptors = {\n    sourceCode: stringProp('diagram.sourceCode'),\n    positionTable: {\n      get: function () {\n        return util.applyMaybe(parsePositionTable,\n          read(this.path('diagram.positions')));\n      },\n      set: function (val) {\n        write(this.path('diagram.positions'),\n          util.applyMaybe(stringifyPositionTable, val));\n      },\n      enumerable: true\n    },\n    editorSourceCode: stringProp('editor.sourceCode'),\n    name: stringProp('name')\n  };\n  Object.defineProperties(TMDocument.prototype, propDescriptors);\n  TMDocument.prototype.dataKeys = Object.keys(propDescriptors);\n})();\n\n// IDEA: bypass extra parse & stringify cycle for positions\nTMDocument.prototype.copyFrom = function (other) {\n  this.dataKeys.forEach(function (key) {\n    this[key] = other[key];\n  }, this);\n  return this;\n};\n\nTMDocument.prototype.delete = function () {\n  this.copyFrom({});\n};\n\n// Cross-tab/window storage sync\n\n/**\n * Checks whether a storage key is for a document's name.\n * @return {?string} The document ID if true, otherwise null.\n */\nTMDocument.IDFromNameStorageKey = function (string) {\n  var result = /^doc\\.([^.]+)\\.name$/.exec(string);\n  return result && result[1];\n};\n\n/**\n * Registers a listener for document changes caused by other tabs/windows.\n * The listener receives the document ID and the property name that changed.\n * @param {Function} listener\n */\nTMDocument.addOutsideChangeListener = function (listener) {\n  var re = /^doc\\.([^.]+)\\.(.+)$/;\n\n  KeyValueStorage.addStorageListener(function (e) {\n    var matches = re.exec(e.key);\n    if (matches) {\n      listener(matches[1], matches[2]);\n    }\n  });\n};\n\n/////////////////////////\n// Position table JSON //\n/////////////////////////\n\n// JSON -> Object\nvar parsePositionTable = JSON.parse;\n\n// PositionTable -> JSON\nvar stringifyPositionTable = _.flow(\n  _.mapValues(truncateCoords(2)),\n  JSON.stringify\n);\n\n// Truncate .x .y .px .py to 2 decimal places, to save space.\nfunction truncateCoords(decimalPlaces) {\n  var multiplier = Math.pow(10, decimalPlaces);\n  function truncate(value) {\n    return Math.round(value * multiplier)/multiplier;\n  }\n\n  return function (val) {\n    var result =  _(val).pick(['x','y','px','py']).mapValues(truncate).value();\n    result.fixed = val.fixed;\n    return result;\n  };\n}\n\nmodule.exports = TMDocument;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/TMDocument.js\n ** module id = 9\n ** module chunks = 1\n **/","'use strict';\n\nvar parseDocument = require('./sharing/format').parseDocument;\nvar fromPairs = require('lodash/fp').fromPairs;\n\n\nfunction requireExample(name) {\n  return require('raw!./examples/' + name + '.yaml');\n}\n\nvar examplePairs = [\n  'repeat01',\n  'binaryIncrement',\n  'divisibleBy3',\n  'copy1s',\n  'divisibleBy3Base10',\n  'matchThreeLengths',\n  'matchBinaryStrings',\n  'palindrome',\n  'busyBeaver3',\n  'busyBeaver4',\n  'powersOfTwo',\n  'lengthMult',\n  'binaryAdd',\n  'unaryMult',\n  'binaryMult'\n].map(function (id) {\n  // parse each string into a document\n  var doc = parseDocument(requireExample(id));\n  doc.id = id;\n\n  return [id, doc];\n});\nvar examples = Object.freeze(fromPairs(examplePairs));\n\n\nfunction isExampleID(docID) {\n  return {}.hasOwnProperty.call(examples, docID);\n}\n\nfunction get(docID) {\n  return isExampleID(docID) ? examples[docID] : null;\n}\n\nvar list = examplePairs.map(function (pair) { return pair[1]; });\n\n\nexports.hasID = isExampleID;\nexports.get = get;\nexports.list = list;\nexports.firsttimeDocID = 'binaryIncrement';\nexports.blankTemplate = requireExample('_template');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/examples.js\n ** module id = 12\n ** module chunks = 1\n **/","'use strict';\n\nvar TM = require('./TuringMachine'),\n    jsyaml = require('js-yaml'),\n    _ = require('lodash');\n\n/**\n * Thrown when parsing a string that is valid as YAML but invalid\n * as a machine specification.\n *\n * Examples: unrecognized synonym, no start state defined,\n * transitioning to an undeclared state.\n *\n * A readable message is generated based on the details (if any) provided.\n * @param {string} reason  A readable error code.\n *   As an error code, this should be relatively short and not include runtime values.\n * @param {?Object} details Optional details. Possible keys:\n *                          problemValue, state, key, synonym, info, suggestion\n */\nfunction TMSpecError(reason, details) {\n  this.name = 'TMSpecError';\n  this.stack = (new Error()).stack;\n\n  this.reason = reason;\n  this.details = details || {};\n}\nTMSpecError.prototype = Object.create(Error.prototype);\nTMSpecError.prototype.constructor = TMSpecError;\n\n// generate a formatted description in HTML\nObject.defineProperty(TMSpecError.prototype, 'message', {\n  get: function () {\n    var header = this.reason;\n    var details = this.details;\n\n    function code(str) { return '<code>' + str + '</code>'; }\n    function showLoc(state, symbol, synonym) {\n      if (state != null) {\n        if (symbol != null) {\n          return ' in the transition from state ' + code(state) + ' and symbol ' + code(symbol);\n        } else {\n          return ' for state ' + code(state);\n        }\n      } else if (synonym != null) {\n        return ' in the definition of synonym ' + code(synonym);\n      }\n      return '';\n    }\n    var problemValue = details.problemValue ? ' ' + code(details.problemValue) : '';\n    var location = showLoc(details.state, details.symbol, details.synonym);\n    var sentences = ['<strong>' + header + problemValue + '</strong>' + location\n      , details.info, details.suggestion]\n      .filter(_.identity)\n      .map(function (s) { return s + '.'; });\n    if (location) { sentences.splice(1, 0, '<br>'); }\n    return sentences.join(' ');\n  },\n  enumerable: true\n});\n\n// type TransitionTable = {[key: string]: ?{[key: string]: string} }\n// type TMSpec = {blank: string, start state: string, table: TransitionTable}\n\n// IDEA: check with flow (flowtype.org)\n// throws YAMLException on YAML syntax error\n// throws TMSpecError for an invalid spec (eg. no start state, transitioning to an undefined state)\n// string -> TMSpec\nfunction parseSpec(str) {\n  var obj = jsyaml.safeLoad(str);\n  // check for required object properties.\n  // auto-convert .blank and 'start state' to string, for convenience.\n  if (obj == null) { throw new TMSpecError('The document is empty',\n    {info: 'Every Turing machine requires a <code>blank</code> tape symbol,' +\n    ' a <code>start state</code>, and a transition <code>table</code>'}); }\n  var detailsForBlank = {suggestion:\n    'Examples: <code>blank: \\' \\'</code>, <code>blank: \\'0\\'</code>'};\n  if (obj.blank == null) {\n    throw new TMSpecError('No blank symbol was specified', detailsForBlank);\n  }\n  obj.blank = String(obj.blank);\n  if (obj.blank.length !== 1) {\n    throw new TMSpecError('The blank symbol must be a string of length 1', detailsForBlank);\n  }\n  obj.startState = obj['start state'];\n  delete obj['start state'];\n  if (obj.startState == null) {\n    throw new TMSpecError('No start state was specified',\n    {suggestion: 'Assign one using <code>start state: </code>'});\n  }\n  obj.startState = String(obj.startState);\n  // parse synonyms and transition table\n  checkTableType(obj.table); // parseSynonyms assumes a table object\n  var synonyms = parseSynonyms(obj.synonyms, obj.table);\n  obj.table = parseTable(synonyms, obj.table);\n  // check for references to non-existent states\n  if (!(obj.startState in obj.table)) {\n    throw new TMSpecError('The start state has to be declared in the transition table');\n  }\n\n  return obj;\n}\n\nfunction checkTableType(val) {\n  if (val == null) {\n    throw new TMSpecError('Missing transition table',\n    {suggestion: 'Specify one using <code>table:</code>'});\n  }\n  if (typeof val !== 'object') {\n    throw new TMSpecError('Transition table has an invalid type',\n    {problemValue: typeof val,\n    info: 'The transition table should be a nested mapping from states to symbols to instructions'});\n  }\n}\n\n// (any, Object) -> ?SynonymMap\nfunction parseSynonyms(val, table) {\n  if (val == null) {\n    return null;\n  }\n  if (typeof val !== 'object') {\n    throw new TMSpecError('Synonyms table has an invalid type',\n      {problemValue: typeof val,\n      info: 'Synonyms should be a mapping from string abbreviations to instructions'\n        + ' (e.g. <code>accept: {R: accept}</code>)'});\n  }\n  return _.mapValues(val, function (actionVal, key) {\n    try {\n      return parseInstruction(null, table, actionVal);\n    } catch (e) {\n      if (e instanceof TMSpecError) {\n        e.details.synonym = key;\n        if (e.reason === 'Unrecognized string') {\n          e.details.info = 'Note that a synonym cannot be defined using another synonym';\n        }\n      }\n      throw e;\n    }\n  });\n}\n\n// (?SynonymMap, {[key: string]: string}) -> TransitionTable\nfunction parseTable(synonyms, val) {\n  return _.mapValues(val, function (stateObj, state) {\n    if (stateObj == null) {\n      // case: halting state\n      return null;\n    }\n    if (typeof stateObj !== 'object') {\n      throw new TMSpecError('State entry has an invalid type',\n      {problemValue: typeof stateObj, state: state,\n      info: 'Each state should map symbols to instructions. An empty map signifies a halting state.'});\n    }\n    return _.mapValues(stateObj, function (actionVal, symbol) {\n      try {\n        return parseInstruction(synonyms, val, actionVal);\n      } catch (e) {\n        if (e instanceof TMSpecError) {\n          e.details.state = state;\n          e.details.symbol = symbol;\n        }\n        throw e;\n      }\n    });\n  });\n}\n\n// omits null/undefined properties\n// (?string, direction, ?string) -> {symbol?: string, move: direction, state?: string}\nfunction makeInstruction(symbol, move, state) {\n  return Object.freeze(_.omitBy({symbol: symbol, move: move, state: state},\n    function (x) { return x == null; }));\n}\n\nfunction checkTarget(table, instruct) {\n  if (instruct.state != null && !(instruct.state in table)) {\n    throw new TMSpecError('Undeclared state', {problemValue: instruct.state,\n    suggestion: 'Make sure to list all states in the transition table and define their transitions (if any)'});\n  }\n  return instruct;\n}\n\n// throws if the target state is undeclared (not in the table)\n// type SynonymMap = {[key: string]: TMAction}\n// (SynonymMap?, Object, string | Object) -> TMAction\nfunction parseInstruction(synonyms, table, val) {\n  return checkTarget(table, function () {\n    switch (typeof val) {\n      case 'string': return parseInstructionString(synonyms, val);\n      case 'object': return parseInstructionObject(val);\n      default: throw new TMSpecError('Invalid instruction type',\n        {problemValue: typeof val,\n          info: 'An instruction can be a string (a direction <code>L</code>/<code>R</code> or a synonym)'\n            + ' or a mapping (examples: <code>{R: accept}</code>, <code>{write: \\' \\', L: start}</code>)'});\n    }\n  }());\n}\n\nvar moveLeft = Object.freeze({move: TM.MoveHead.left});\nvar moveRight = Object.freeze({move: TM.MoveHead.right});\n\n// case: direction or synonym\nfunction parseInstructionString(synonyms, val) {\n  if (val === 'L') {\n    return moveLeft;\n  } else if (val === 'R') {\n    return moveRight;\n  }\n  // note: this order prevents overriding L/R in synonyms, as that would\n  // allow inconsistent notation, e.g. 'R' and {R: ..} being different.\n  if (synonyms && synonyms[val]) { return synonyms[val]; }\n  throw new TMSpecError('Unrecognized string',\n    {problemValue: val,\n    info: 'An instruction can be a string if it\\'s a synonym or a direction'});\n}\n\n// type ActionObj = {write?: any, L: ?string} | {write?: any, R: ?string}\n// case: ActionObj\nfunction parseInstructionObject(val) {\n  var symbol, move, state;\n  if (val == null) { throw new TMSpecError('Missing instruction'); }\n  // prevent typos: check for unrecognized keys\n  (function () {\n    var badKey;\n    if (!Object.keys(val).every(function (key) {\n      badKey = key;\n      return key === 'L' || key === 'R' || key === 'write';\n    })) {\n      throw new TMSpecError('Unrecognized key',\n      {problemValue: badKey,\n      info: 'An instruction always has a tape movement <code>L</code> or <code>R</code>, '\n        + 'and optionally can <code>write</code> a symbol'});\n    }\n  })();\n  // one L/R key is required, with optional state value\n  if ('L' in val && 'R' in val) {\n    throw new TMSpecError('Conflicting tape movements',\n    {info: 'Each instruction needs exactly one movement direction, but two were found'});\n  }\n  if ('L' in val) {\n    move = TM.MoveHead.left;\n    state = val.L;\n  } else if ('R' in val) {\n    move = TM.MoveHead.right;\n    state = val.R;\n  } else {\n    throw new TMSpecError('Missing movement direction');\n  }\n  // write key is optional, but must contain a char value if present\n  if ('write' in val) {\n    var writeStr = String(val.write);\n    if (writeStr.length === 1) {\n      symbol = writeStr;\n    } else {\n      throw new TMSpecError('Write requires a string of length 1');\n    }\n  }\n  return makeInstruction(symbol, move, state);\n}\n\nexports.TMSpecError = TMSpecError;\nexports.parseSpec = parseSpec;\n// re-exports\nexports.YAMLException = jsyaml.YAMLException;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/parser.js\n ** module id = 13\n ** module chunks = 1\n **/","'use strict';\n\nvar $ = require('jquery');\nvar Promise = require('bluebird'); // eslint-disable-line no-shadow\n\nPromise.config({\n  cancellation: true\n});\n\n// On success, 'resolve' is called with the response data.\n// On failure, 'reject' is called with {xhr: jqXHR, status: string, error: string}.\n// To abort the request, use .cancel (from bluebird). Neither is called in that case.\n// jqXHR -> Promise\nfunction promisifyAjax(xhr) {\n  return new Promise(function (resolve, reject, onCancel) {\n    xhr.then(resolve, function (jqXHR, textStatus, errorThrown) {\n      reject({xhr: jqXHR, status: textStatus, error: errorThrown});\n    });\n    onCancel && onCancel(function () {\n      try { xhr.abort(); } catch (e) {/* */}\n    });\n  });\n}\n\n// GistID -> Promise\n// @see promisifyAjax\nfunction getGist(gistID) {\n  return promisifyAjax($.ajax({\n    url: 'https://api.github.com/gists/' + gistID,\n    type: 'GET',\n    dataType: 'json',\n    accepts: 'application/vnd.github.v3+json' // specify API version for stability\n  }));\n}\n\n// https://developer.github.com/v3/gists/#create-a-gist\n// @see promisifyAjax\n// {files: {[filename: string]: {content: string}},\n//  description?: string, public?: boolean} -> Promise\nfunction createGist(payload) {\n  // return Promise.delay(1000, {id: 'offlinetesting'});\n  return promisifyAjax($.ajax({\n    url: 'https://api.github.com/gists',\n    type: 'POST',\n    data: JSON.stringify(payload),\n    // headers: {Authorization: 'token DEVTOKEN'},\n    dataType: 'json', // response datatype\n    accepts: 'application/vnd.github.v3+json' // specify API version for stability\n  }));\n}\n\nexports.getGist = getGist;\nexports.createGist = createGist;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sharing/gist.js\n ** module id = 14\n ** module chunks = 1\n **/","'use strict';\n\n/* eslint-env browser */\nvar CheckboxTable = require('./CheckboxTable');\nvar FileReaderPromise = require('./FileReaderPromise');\nvar format = require('./format');\nvar getGist = require('./gist').getGist;\n\nvar $ = require('jquery');\nvar _ = require('lodash/fp');\nvar d3 = require('d3');\nvar Promise = require('bluebird');  // eslint-disable-line no-shadow\n\n\nfunction decodeFormURLComponent(str) {\n  return decodeURIComponent(str.replace('+', ' '));\n}\n\n/**\n * https://url.spec.whatwg.org/#urlencoded-parsing\n */\nfunction queryParams(queryString) {\n  function decode(str) {\n    return str ? decodeFormURLComponent(str) : '';\n  }\n  var result = {};\n  queryString.split('&').forEach(function (str) {\n    var pair = str.split('=');\n    result[decode(pair[0])] = decode(pair[1]);\n  });\n  return result;\n}\n\n///////////////////\n// Import Dialog //\n///////////////////\n\n// requires an existing dialog in the DOM\nfunction ImportDialog(dialogNode) {\n  this.node = dialogNode;\n  this.titleNode = dialogNode.querySelector('.modal-header .modal-title');\n  this.bodyNode = dialogNode.querySelector('.modal-body');\n  this.footerNode = dialogNode.querySelector('.modal-footer');\n  this.cancelButtonNode = d3.select(this.footerNode).text('')\n    .append('button')\n      .attr({type: 'button', class: 'btn btn-default', 'data-dismiss': 'modal'})\n      .text('Cancel')\n    .node();\n  this.$dialog = $(dialogNode)\n    .one('hide.bs.modal', this.__onClose.bind(this));\n}\n\n// internal event handler.\nImportDialog.prototype.__onClose = function () {\n  this.onClose();\n  // use .empty to clean up $.on used in CheckboxTable\n  $(this.bodyNode).empty();\n  $(this.footerNode).empty();\n};\n\n// configurable\nImportDialog.prototype.onClose = function () {\n};\n\nImportDialog.prototype.show = function () {\n  this.$dialog.modal({backdrop: 'static', keyboard: false});\n};\n\nImportDialog.prototype.close = function () {\n  this.$dialog.modal('hide');\n};\n\nImportDialog.prototype.setBodyChildNodes = function (nodes) {\n  this.bodyNode.textContent = '';\n  this.bodyNode.appendChild(joinNodes(nodes));\n};\n\nfunction appendPanel(div, titleHTML) {\n  var panel = div.append('div')\n      .attr('class', 'panel panel-default');\n  panel.append('div')\n      .attr('class', 'panel-heading')\n    .append('h5')\n      .attr('class', 'panel-title')\n      .html(titleHTML);\n  return panel;\n}\n\nvar emptySelection = Object.freeze(d3.selectAll([]));\n\n// (D3Selection, {title: string, data: [string]}) -> void\nfunction appendListPanel(container, data) {\n  var panel = emptySelection;\n  if (data.data && data.data.length) {\n    panel = appendPanel(container, data.title);\n    panel.append('div')\n        .attr('class', 'panel-body')\n      .append('ul')\n        .attr('class', 'list-inline')\n      .selectAll('li')\n        .data(data.data)\n      .enter().append('li')\n        .text(_.identity);\n  }\n  return panel;\n}\n\n// ( D3Selection, {title: string, headers: [string],\n//  data: [[string | (D3Selection -> void)]]} ) -> void\nfunction appendTablePanel(container, data) {\n  var panel = emptySelection;\n  if (data.data && data.data.length) {\n    panel = appendPanel(container, data.title);\n    panel.append('table')\n        .attr('class', 'table')\n        .call(function (table) {\n          // headers\n          table.append('thead')\n            .append('tr').selectAll('th').data(data.headers)\n            .enter().append('th').text(_.identity);\n          // contents\n          table.append('tbody').selectAll('tr')\n              .data(data.data)\n            .enter().append('tr').selectAll('td')\n              .data(_.identity)\n            .enter().append('td').each(/* @this td */ function (d) {\n              var td = d3.select(this);\n              if (typeof d === 'function') {\n                d(td);\n              } else {\n                td.text(d);\n              }\n            });\n        });\n  }\n  return panel;\n}\n\n// NonDocumentFiles -> boolean\nvar isEmptyNonDocs = _.every(_.isEmpty);\n\n// (D3Selection, NonDocumentFiles, ?string) -> void\nfunction listNondocuments(dialogBody, nondocs, disclosureTitle) {\n  if (isEmptyNonDocs(nondocs)) {\n    return;\n  }\n  // Disclosure triangle\n  var collapseId = 'nondocument-files';\n  dialogBody.append('a')\n      .attr({\n        href: '#'+collapseId,\n        class: 'disclosure-triangle collapsed',\n        role: 'button',\n        'data-toggle': 'collapse'\n      })\n      .text(disclosureTitle ? disclosureTitle : 'Show other files');\n  var container = dialogBody.append('div')\n      .attr({\n        id: collapseId,\n        class: 'collapse'\n      });\n  // Errors by type, most important first\n  appendTablePanel(container, {\n    title: 'Unexpected error',\n    headers: ['Filename', 'Error'],\n    data: nondocs.otherError.map(function functionName(d) {\n      return [d.filename, errorString(d.error) ];\n    })\n  }).classed('panel-danger', true);\n  appendTablePanel(container, {\n    title: 'Not suitable for import',\n    headers: ['Filename', 'Reason'],\n    data: nondocs.badDoc.map(function (d) {\n      return [d.filename, d.error.message];\n    })\n  });\n  appendTablePanel(container, {\n    title: 'Not valid as YAML',\n    headers: ['Filename', 'Syntax error'],\n    data: nondocs.badYAML.map(function (d) {\n      return [d.filename,\n        function (td) { td.append('pre').text(d.error.message); } ];\n    })\n  });\n  // TODO: document largest allowed filesize; limit export likewise\n  appendListPanel(container, {\n    title: 'File is too large',\n    data: nondocs.tooLarge\n  });\n  appendListPanel(container, {\n    title: 'Different file extension (not <code>.yaml</code>/<code>.yml</code>)',\n    data: nondocs.wrongType\n  });\n}\n\n// deal with objects like DOMError (whose .toString gives \"[object FileError]\")\nfunction errorString(reason) {\n  return reason instanceof Error\n    ? String(reason)\n    : reason.message || reason.name || String(reason);\n}\n\n//////////////////////\n// Document Parsing //\n//////////////////////\n\n/* Interface for Document Parsing\n  type GistFile = {\n    filename: string,\n    size: number,\n    truncated: boolean,\n    content: string\n  };\n  type TMData = {source code: string};\n  type DocFile = {filename: string, size: number, document: TMData};\n\n  type Filename = string;\n  type ErrorTuple = {filename: Filename, error: Error | YAMLException};\n  type NonDocumentFiles = {\n    wrongType:  [Filename],\n    tooLarge:   [Filename],\n    badYAML:    [ErrorTuple],\n    badDoc:     [ErrorTuple],\n    otherError: [ErrorTuple]\n  };\n  type ParseResult = {documentFiles: [DocFile], nonDocumentFiles: NonDocumentFiles};\n */\n\n// Parse each file into a document or a categorized error.\n// Local files are read only if they have the right extension and size.\n// NB. make sure to convert FileList to an actual Array.\n// The promise resolves with ParseResult.\n// (number, [GistFile | File]) -> Promise\nfunction parseFiles(sizelimit, files) {\n  var docfiles = [];\n  var nondocs = {wrongType: [], tooLarge: [], badYAML: [], badDoc: [], otherError: []};\n\n  return Promise.each(files, function (file) {\n    var name = file.filename || file.name; // eslint-disable-line no-shadow\n    if (name.search(/\\.ya?ml$/) === -1) {\n      nondocs.wrongType.push(name);\n    } else if (file.truncated || file.size > sizelimit) {\n      nondocs.tooLarge.push(name);\n    } else {\n      return Promise.resolve(file.content != null ? file.content\n        : FileReaderPromise.readAsText(file))\n      .then(function (content) {\n        docfiles.push({\n          filename: name,\n          size: file.size,\n          document: format.parseDocument(content)\n        });\n      }).catch(function (e) {\n        var tuple = {filename: name, error: e};\n        if (e instanceof format.YAMLException) {\n          nondocs.badYAML.push(tuple);\n        } else if (e instanceof format.InvalidDocumentError) {\n          nondocs.badDoc.push(tuple);\n        } else {\n          nondocs.otherError.push(tuple);\n        }\n      });\n    }\n  }).return({documentFiles: docfiles, nonDocumentFiles: nondocs});\n}\n\n/////////////////////\n// Document Import //\n/////////////////////\n\nfunction showSizeKB(n) {\n  // example: 12.0 KB\n  return (Math.ceil(10*n/1024)/10).toFixed(1) + ' KB';\n}\n\n// {docFiles: [DocFile], nonDocumentFiles: NonDocumentFiles,\n//  dialog: ImportDialog, citeNode?: Node, importDocuments: [TMData] -> void} -> void\nfunction pickMultiple(args) {\n  var docfiles = args.documentFiles,\n      nondocs = args.nonDocumentFiles,\n      citeNode = args.citeNode,\n      dialog = args.dialog,\n      importDocuments = args.importDocuments;\n  // Dialog body\n  var dialogBody = d3.select(dialog.bodyNode).text('');\n  dialogBody.append('p').call(function (p) {\n    p.append('strong').text('Select documents to import');\n    if (citeNode) {\n      p.node().appendChild(document.createTextNode(' from '));\n      p.node().appendChild(citeNode);\n    }\n  });\n  var ctable = new CheckboxTable({\n    table: dialogBody.append('table')\n      .attr({class: 'table table-hover checkbox-table'}),\n    headers: ['Filename', 'Size'],\n    data: docfiles.map(function (doc) {\n      return [doc.filename, showSizeKB(doc.size)];\n    })\n  });\n  listNondocuments(dialogBody, nondocs);\n  // Dialog footer\n  var importButton = d3.select(dialog.footerNode).append('button')\n      .attr({type: 'button', class: 'btn btn-primary', 'data-dismiss': 'modal'})\n      .property('disabled', true)\n      .text('Import')\n      .on('click', /* @this button */ function () {\n        d3.select(this).on('click', null); // prevent double import; like .one()\n        var names = d3.set(ctable.getCheckedValues());\n        importDocuments(docfiles\n          .filter(function (file) { return names.has(file.filename); })\n          .map(_.property('document'))\n        );\n      })\n    .node();\n  ctable.onChange = function () {\n    importButton.disabled = ctable.isCheckedEmpty();\n  };\n}\n\n// {nonDocumentFiles: NonDocumentFiles, dialog: ImportDialog, citeLink?: Node} -> void\nfunction pickNone(args) {\n  var nondocs = args.nonDocumentFiles,\n      dialog = args.dialog,\n      citeLink = args.citeLink;\n\n  d3.select(dialog.bodyNode).text('').call(function (body) {\n    body.append('p').append('strong').text(!isEmptyNonDocs(nondocs)\n        ? 'None of the files are suitable for import.'\n        : 'No files were selected.');\n    if (citeLink) {\n      body.append('p').text('Requested URL: ').node().appendChild(citeLink);\n    }\n    listNondocuments(body, nondocs, 'Show details');\n  });\n  dialog.cancelButtonNode.textContent = 'Close';\n}\n\n// Intermingle text and nodes.\n// [Node | string] -> DocumentFragment\nfunction joinNodes(nodes) {\n  var result = document.createDocumentFragment();\n  nodes.forEach(function (node) {\n    if (typeof node === 'string') {\n      result.appendChild(document.createTextNode(node));\n    } else {\n      result.appendChild(node);\n    }\n  });\n  return result;\n}\n\nfunction wrapTag(tagName, node) {\n  var tag = document.createElement(tagName);\n  tag.appendChild(node);\n  return tag;\n}\n\n// Create a link with text <q>`gist description`</q> if given, otherwise gist `gistID`.\n// {gistID: string, description?: string} -> HTMLAnchorElement | HTMLQuoteElement\nfunction gistDescriptionLink(args) {\n  var link = externalLink({\n    href: 'https://gist.github.com/' + args.gistID,\n    textContent: args.description || ('gist ' + args.gistID)\n  });\n  return args.description ? wrapTag('q', link) : link;\n}\n\n// {href: string, textContent?: string} -> HTMLAnchorElement\nfunction externalLink(args) {\n  var link = document.createElement('a');\n  link.href = args.href;\n  link.target = '_blank';\n  link.textContent = args.textContent || args.href;\n  return link;\n}\n\n// The returned promise resolves/cancels when the dialog is closed:\n// • resolves if loading (before import) finished and the user cancelled anyway\n// • cancels if files were still loading and not yet displayed (eg. fetch, parse)\n// ({gistID: string, dialogNode: Node, importDocument: TMData -> void} |\n// {files: FileList, dialogNode: Node, importDocument: TMData -> void}) -> Promise\nfunction importCommon(args) {\n  var gistID = args.gistID,\n      dialogNode = args.dialogNode,\n      importDocument = args.importDocument;\n\n  var dialog = new ImportDialog(dialogNode);\n  var citeLink;\n  var citeNode;\n  // prevent accidentally exceeding quota\n  var MAX_FILESIZE = 400 * 1024;\n  // Start fetch, show dialog\n  var filesPromise = (function () {\n    if (gistID != null) {\n      dialog.titleNode.textContent = 'Import from GitHub gist';\n      citeLink = externalLink({href: 'https://gist.github.com/' + gistID});\n      dialog.setBodyChildNodes(['Retrieving ', citeLink, '…']);\n      return getGist(gistID).then(function (data) {\n        citeNode = gistDescriptionLink({\n          gistID: gistID,\n          description: data.description\n        });\n        dialog.setBodyChildNodes(['Processing ', citeLink, '…']);\n        return _.values(data.files);\n      });\n    } else {\n      dialog.titleNode.textContent = 'Import from files';\n      dialog.setBodyChildNodes(['Processing files…']);\n      return Promise.resolve(_.toArray(args.files));\n    }\n  }());\n  dialog.show();\n  // Parse, pick, import\n  var promise = filesPromise\n  .then(parseFiles.bind(undefined, MAX_FILESIZE))\n  .then(function (parsed) {\n    var docfiles = parsed.documentFiles;\n    switch (docfiles.length) {\n      case 0:\n        pickNone({\n          nonDocumentFiles: parsed.nonDocumentFiles,\n          dialog: dialog,\n          citeLink: citeLink\n        });\n        return;\n      case 1:\n        importDocument(docfiles[0].document);\n        dialog.close();\n        return;\n      default:\n        pickMultiple({\n          documentFiles: docfiles,\n          nonDocumentFiles: parsed.nonDocumentFiles,\n          dialog: dialog,\n          citeNode: citeNode,\n          importDocuments: function importDocuments(docs) {\n            docs.concat().reverse().map(importDocument);\n          }\n        });\n    }\n  })\n  .catch(function (reason) {\n    dialog.setBodyChildNodes([messageForError(reason)]\n      .concat(citeLink ? ['Requested URL: ', citeLink] : [])\n    );\n    dialog.cancelButtonNode.textContent = 'Close';\n  });\n  var waitForDialog = new Promise(function (resolve) {\n    dialog.onClose = function () {\n      promise.cancel();\n      resolve();\n    };\n  });\n  return promise.return(waitForDialog);\n}\n\n// {gistID: string, dialogNode: Node, importDocument: TMData -> void} -> Promise\nvar importGist = importCommon;\n\n// {files: FileList, dialogNode: Node, importDocument: TMData -> void} -> Promise\nvar importLocalFiles = importCommon;\n\nfunction createElementHTML(tagName, innerHTML) {\n  var element = document.createElement(tagName);\n  element.innerHTML = innerHTML;\n  return element;\n}\n\n// ({xhr: jqXHR} | Error) -> Node\nfunction messageForError(reason) {\n  var xhr = reason.xhr;\n  if (xhr) {\n    // case: couldn't fetch\n    return createElementHTML('p', (function () {\n      switch (reason.status) {\n        case 'abort':\n          return [''];\n        case 'timeout':\n          return [\n            '<strong>The request timed out.</strong>',\n            'You can check your connection and try again.'\n          ];\n        default:\n        // case: HTTP error\n          if (xhr.status === 404) {\n            return [\n              '<strong>No GitHub gist exists with that ID.</strong>',\n              'It’s possible the ID is incorrect, or the gist was deleted.'\n            ];\n          } else if (xhr.status === 0) {\n            return ['GitHub could not be reached. Your Internet connection may be offline.'];\n          } else {\n            return [\n              'The import failed because of a <strong>connection error</strong>.',\n              'HTTP status code: ' + xhr.status + ' ' + xhr.statusText\n            ];\n          }\n      }\n    }()).join('<br>'));\n  } else {\n    // case: other error\n    var pre = document.createElement('pre');\n    pre.textContent = errorString(reason);\n    return joinNodes([\n      createElementHTML('p', 'An unexpected error occurred:'), pre]);\n  }\n}\n\n// Import a gist via ?import-gist=gistID and remove the query string from the URL.\n// Call this once the DOM is ready (document.readyState === 'interactive').\n// {dialogNode: Node, importDocument: TMData -> void} -> void\nfunction runImport(args) {\n  function removeQuery() {\n    try {\n      history.replaceState(null, null, location.pathname);\n    } catch (e) {\n      // ignore\n    }\n  }\n\n  var params = queryParams(location.search.substring(1));\n  var gistID = params['import-gist'];\n  if (gistID) {\n    importGist(_.assign({gistID: gistID}, args))\n    .finally(removeQuery);\n  }\n}\n\nexports.importGist = importGist;\nexports.importLocalFiles = importLocalFiles;\nexports.runImport = runImport;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sharing/import.js\n ** module id = 15\n ** module chunks = 1\n **/","module.exports = ace;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ace\"\n ** module id = 17\n ** module chunks = 1\n **/","module.exports = jsyaml;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jsyaml\"\n ** module id = 18\n ** module chunks = 1\n **/","module.exports = \"input: '${2}'\\nblank: '${3: }'\\nstart state: ${4:start}\\ntable:\\n  ${4}:\\n    ${5}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/_template.yaml\n ** module id = 21\n ** module chunks = 1\n **/","module.exports = \"name: binary addition\\nsource code: |\\n  # Adds two binary numbers together.\\n\\n  # Format: Given input a+b where a and b are binary numbers,\\n  # leaves c b on the tape, where c = a+b.\\n  # Example: '11+1' => '100 1'.\\n  input: '1011+11001'\\n  blank: ' '\\n  start state: right\\n  table:\\n    # Start at the second number's rightmost digit.\\n    right:\\n      [0,1,+]: R\\n      ' ': {L: read}\\n\\n    # Add each digit from right to left:\\n    # read the current digit of the second number,\\n    read:\\n      0: {write: c, L: have0}\\n      1: {write: c, L: have1}\\n      +: {write: ' ', L: rewrite}\\n    # and add it to the next place of the first number,\\n    # marking the place (using O or I) as already added.\\n    have0: {[0,1]: L, +: {L: add0}}\\n    have1: {[0,1]: L, +: {L: add1}}\\n    add0:\\n      [0,' ']: {write: O, R: back0}\\n      1      : {write: I, R: back0}\\n      [O,I]  : L\\n    add1:\\n      [0,' ']: {write: I, R: back1}\\n      1      : {write: O, L: carry}\\n      [O,I]  : L\\n    carry:\\n      [0,' ']: {write: 1, R: back1}\\n      1      : {write: 0, L}\\n    # Then, restore the current digit, and repeat with the next digit.\\n    back0:\\n      [0,1,O,I,+]: R\\n      c: {write: 0, L: read}\\n    back1:\\n      [0,1,O,I,+]: R\\n      c: {write: 1, L: read}\\n\\n    # Finish: rewrite place markers back to 0s and 1s.\\n    rewrite:\\n      O: {write: 0, L}\\n      I: {write: 1, L}\\n      [0,1]: L\\n      ' ': {R: done}\\n    done:\\n\\n\\n  # Exercise:\\n\\n  # • Generate the Fibonacci sequence in binary, listed from right to left:\\n  #   ...1101 1000 101 11 10 1 1 0\\n  #   Hint: prefix the current number with a +, copy the previous number\\n  #   and place it left of the +, run the adder, and repeat.\\n  #   Example: '1 0' => '+1 0' => '0+1 0' => '1 1 0' => '+1 1 0' => ...\\npositions:\\n  right:   {x: 300, y: 130}\\n  rewrite: {x: 500, y: 130}\\n  done:    {x: 620, y: 130}\\n\\n  back0:  {x: 250, y: 250}\\n  read:   {x: 400, y: 250}\\n  back1:  {x: 550, y: 250}\\n  carry:  {x: 650, y: 250}\\n\\n  add0:   {x: 150, y: 400}\\n  have0:  {x: 300, y: 400}\\n  have1:  {x: 500, y: 400}\\n  add1:   {x: 650, y: 400}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/binaryAdd.yaml\n ** module id = 22\n ** module chunks = 1\n **/","module.exports = \"name: binary increment\\nsource code: |\\n  # Adds 1 to a binary number.\\n  input: '1011'\\n  blank: ' '\\n  start state: right\\n  table:\\n    # scan to the rightmost digit\\n    right:\\n      [1,0]: R\\n      ' '  : {L: carry}\\n    # then carry the 1\\n    carry:\\n      1      : {write: 0, L}\\n      [0,' ']: {write: 1, L: done}\\n    done:\\n\\n\\n  # Exercises:\\n\\n  # • Modify the machine to always halt on the leftmost digit\\n  #   (regardless of the number's length).\\n  #   Hint: add a state between carry and done.\\n\\n  # • Make a machine that adds 2 instead of 1.\\n  #   Hint: 2 is '10' in binary, so the last digit is unaffected.\\n  #   Alternative hint: chain together two copies of the machine from\\n  #   the first exercise (renaming the states of the second copy).\\n\\n  # • Make a machine to subtract 1.\\n  #   To simplify things, assume the input is always greater than 0.\\npositions:\\n  right: {x: 230, y: 250}\\n  carry: {x: 400, y: 250}\\n  done: {x: 570, y: 250}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/binaryIncrement.yaml\n ** module id = 23\n ** module chunks = 1\n **/","module.exports = \"name: binary multiplication\\nsource code: |\\n  # Multiplies two binary numbers together.\\n\\n  # Examples: '11*11' => '1001', '111*110' => '101010'.\\n  input: '11*101' # 3*5 = 15 (1111 in binary)\\n  blank: ' '\\n  start state: start\\n  table:\\n    # Prefix the input with a '+', and go to the rightmost digit.\\n    start:\\n      [0,1]: {L: init}\\n    init:\\n      ' ': {write: '+', R: right}\\n    right:\\n      [0,1,'*']: R\\n      ' ': {L: readB}\\n\\n    # Read and erase the last digit of the multiplier.\\n    # If it's 1, add the current multiplicand.\\n    # In any case, double the multiplicand afterwards.\\n    readB:\\n      0: {write: ' ', L: doubleL}\\n      1: {write: ' ', L: addA}\\n    addA:\\n      [0,1]: L\\n      '*': {L: read} # enter adder\\n    # Double the multiplicand by appending a 0.\\n    doubleL:\\n      [0,1]: L\\n      '*': {write: 0, R: shift}\\n    double: # return from adder\\n      [0,1,+]: R\\n      '*': {write: 0, R: shift}\\n    # Make room by shifting the multiplier right 1 cell.\\n    shift:\\n      0: {write: '*', R: shift0}\\n      1: {write: '*', R: shift1}\\n      ' ': {L: tidy} # base case: multiplier = 0\\n    shift0:\\n      0:   {R: shift0}\\n      1:   {write: 0, R: shift1}\\n      ' ': {write: 0, R: right}\\n    shift1:\\n      0:   {write: 1, R: shift0}\\n      1:   {R: shift1}\\n      ' ': {write: 1, R: right}\\n\\n    tidy:\\n      [0,1]: {write: ' ', L}\\n      +: {write: ' ', L: done}\\n    done:\\n\\n  # This is the 'binary addition' machine almost verbatim.\\n  # It's adjusted to keep the '+'\\n  # and to lead to another state instead of halting.\\n    read:\\n      0: {write: c, L: have0}\\n      1: {write: c, L: have1}\\n      +: {L: rewrite} # keep the +\\n    have0: {[0,1]: L, +: {L: add0}}\\n    have1: {[0,1]: L, +: {L: add1}}\\n    add0:\\n      [0,' ']: {write: O, R: back0}\\n      1      : {write: I, R: back0}\\n      [O,I]  : L\\n    add1:\\n      [0,' ']: {write: I, R: back1}\\n      1      : {write: O, L: carry}\\n      [O,I]  : L\\n    carry:\\n      [0,' ']: {write: 1, R: back1}\\n      1      : {write: 0, L}\\n    back0:\\n      [0,1,O,I,+]: R\\n      c: {write: 0, L: read}\\n    back1:\\n      [0,1,O,I,+]: R\\n      c: {write: 1, L: read}\\n    rewrite:\\n      O: {write: 0, L}\\n      I: {write: 1, L}\\n      [0,1]: L\\n      ' ': {R: double} # when done, go to the 'double' state\\n\\n\\n  # Remark:\\n  # We can view the machine as expressing a recursive function:\\n\\n  #   multiply(a, b) = mult(0, a, b)\\n\\n  #   mult(acc, a, 0     ) = acc\\n  #   mult(acc, a, 2k + 0) = mult(acc    , 2a, k)   where k ≠ 0\\n  #   mult(acc, a, 2k + 1) = mult(acc + a, 2a, k)\\n\\n  # where a, b, and k are natural numbers.\\n\\n  # Each reduction maintains the invariant\\n  #   mult(acc, a, b) = acc + a * b\\n  # Note that mult's third argument (b) is always decreasing,\\n  # so mult is guaranteed to halt.\\n  # Eventually b reaches 0 and the result is simply the accumulator.\\npositions:\\n  start:  {x: 80 , y: 70}\\n  init:   {x: 190, y: 70}\\n  tidy:   {x: 730, y: 70}\\n  done:   {x: 730, y: 180}\\n\\n  right:  {x: 300, y: 115}\\n  shift:  {x: 600, y: 115}\\n  shift1: {x: 450, y: 70}\\n  shift0: {x: 450, y: 160}\\n\\n  readB:  {x: 300, y: 215}\\n  addA:   {x: 160, y: 215}\\n  doubleL: {x: 550, y: 215}\\n\\n  rewrite: {x: 363, y: 300}\\n  double: {x: 650, y: 300}\\n\\n  back0:  {x: 160, y: 370}\\n  read:   {x: 300, y: 370}\\n  back1:  {x: 440, y: 370}\\n  carry:  {x: 540, y: 370}\\n\\n  add0:   {x:  60, y: 470}\\n  have0:  {x: 200, y: 470}\\n  have1:  {x: 400, y: 470}\\n  add1:   {x: 540, y: 470}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/binaryMult.yaml\n ** module id = 24\n ** module chunks = 1\n **/","module.exports = \"name: 3-state busy beaver\\nsource code: |\\n  # A 3-state 2-symbol busy beaver for most non-blank symbols.\\n  # It takes 13 steps and leaves 6 non-blank symbols on the tape.\\n\\n  # What's a \\\"busy beaver\\\"?\\n  #   Suppose every possible Turing machine with n states and k symbols\\n  #   (for instance, 3 states and 2 symbols) were started on\\n  #   a blank tape with no input.\\n  #   Some of the machines would never halt. Out of the ones that do halt,\\n  #   a machine that leaves the most non-blank symbols on the tape\\n  #   is called a busy beaver.\\n  blank: '0'\\n  start state: A\\n  table:\\n    A:\\n      0: {write: 1, R: B}\\n      1: {L: C}\\n    B:\\n      0: {write: 1, L: A}\\n      1: R\\n    C:\\n      0: {write: 1, L: B}\\n      1: {R: H}\\n    H:\\n\\n  # An alternative criterion is halting after the most steps.\\n  # This busy beaver takes the most steps (21) but only prints 5 1's:\\n    # A:\\n    #   0: {write: 1, R: B}\\n    #   1: {R: H}\\n    # B:\\n    #   0: {write: 1, L: B}\\n    #   1: {write: 0, R: C}\\n    # C:\\n    #   0: {write: 1, L}\\n    #   1: {L: A}\\n    # H:\\n\\n\\n  # Exercise:\\n\\n  # • Consider Turing machines that have n states and k symbols.\\n  #   Instead of a missing instruction, halting is denoted by\\n  #   a transition to a special \\\"halt\\\" state (for a total of n+1 states).\\n  #   How many different transition functions are possible?\\n\\n  #   Hint: Each instruction writes a symbol, moves left or right,\\n  #   and goes to a state.\\n  #   There is one instruction per combination of non-halt state & symbol.\\n\\n\\n\\n  #   Answer: (2k(n+1))^(nk)\\npositions:\\n  A: {x: 320, y: 296.188}\\n  B: {x: 400, y: 157.624}\\n  C: {x: 480, y: 296.188}\\n  H: {x: 400, y: 376.188}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/busyBeaver3.yaml\n ** module id = 25\n ** module chunks = 1\n **/","module.exports = \"name: 4-state busy beaver\\nsource code: |\\n  # A 4-state 2-symbol busy beaver\\n  # that halts after 107 steps, leaving 13 1's on the tape.\\n  # It takes the most steps *and* prints the most 1's.\\n  blank: 0\\n  start state: A\\n  table:\\n    A: {0: {write: 1, R: B}, 1:           {L: B}}\\n    B: {0: {write: 1, L: A}, 1: {write: 0, L: C}}\\n    C: {0: {write: 1, R: H}, 1:           {L: D}}\\n    D: {0: {write: 1, R   }, 1: {write: 0, R: A}}\\n    H:\\n\\n\\n  # Finding a busy beaver requires considering every n-state k-symbol\\n  # machine and proving either that it halts with no more non-blank symbols\\n  # or that it never halts at all.\\n\\n  # Even with strategies to reduce the search space—\\n  # including normalization, accelerated simulation, and automated proofs—\\n  # there are still machines that show surprising complexity\\n  # and require individual analysis.\\n\\n  # This 4-state busy beaver was proven by Allen Brady in 1983.\\n  # Busy beavers for 5 states and above are as yet unknown.\\n  # At the time of writing, the current 5-state 2-symbol contender\\n  # takes 47,176,870 steps to halt, and the 6-state contender\\n  # takes over 7.4 * 10^36534 steps\\n  # (http://www.logique.jussieu.fr/~michel/bbc.html).\\n  # \\\"Given that 5-state 2-symbol halting Turing machines can compute\\n  # Collatz-like congruential functions, it may be very hard to find\\n  # [the next busy beaver]\\\" (https://oeis.org/A060843).\\n\\n\\n  # An entertaining read on busy beavers and their profoundness:\\n\\n  # • \\\"Who Can Name the Bigger Number?\\\"\\n  #   http://www.scottaaronson.com/writings/bignumbers.html\\npositions:\\n  # square with side length 160\\n  A: {x: 320, y: 170}\\n  B: {x: 480, y: 170}\\n\\n  C: {x: 480, y: 330}\\n  D: {x: 320, y: 330}\\n  H: {x: 620, y: 330}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/busyBeaver4.yaml\n ** module id = 26\n ** module chunks = 1\n **/","module.exports = \"name: copy 1s\\nsource code: |\\n  # Copies a string of consecutive 1s.\\n  input: '111'\\n  blank: 0\\n  start state: each\\n  table:\\n    # mark the current 1 by erasing it\\n    each:\\n      0: {R: H}\\n      1: {write: 0, R: sep}\\n    # skip to the separator\\n    sep:\\n      0: {R: add}\\n      1: R\\n    # skip to the end of the copy and write a 1\\n    add:\\n      0: {write: 1, L: sepL}\\n      1: R\\n    # return to the separator\\n    sepL:\\n      0: {L: next}\\n      1: L\\n    # return to the erased 1, restore it, and then advance to the next 1\\n    next:\\n      0: {write: 1, R: each}\\n      1: L\\n    H:\\n\\n\\n  # Exercises:\\n\\n  # • Edit the machine to copy the string indefinitely,\\n  #   i.e. given the input '11', produce 11011011011...\\n  #   Hint: this can be done by modifying only one transition.\\n\\n  # • Make a machine to output the endless sequence 1011011101111011111...\\npositions:\\n  each: {x: 400   , y: 100}\\n  sep:  {x: 400.01, y: 250}\\n  add:  {x: 400.02, y: 400}\\n  sepL: {x: 250   , y: 250}\\n  next: {x: 250.01, y: 100}\\n  H:    {x: 550   , y: 100}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/copy1s.yaml\n ** module id = 27\n ** module chunks = 1\n **/","module.exports = \"name: divisible by 3\\nsource code: |\\n  # Checks if a binary number is divisible by 3.\\n  input: '1001' # try '1111' (15), '10100' (20), '111001' (57)\\n  blank: ' '\\n  # How it works:\\n\\n  # Consider reading a binary number, say 10011 (19),\\n  # from left to right one digit at a time.\\n  # Each time a digit is read, the new value equals the new digit\\n  # plus the old value shifted left one place (multiplied by 2).\\n\\n  # Digits  Value\\n  # -------------\\n  #         0\\n  # 1       1\\n  # 10      2\\n  # 100     4\\n  # 1001    9\\n  # 10011   19\\n\\n  # Now instead of tracking the entire number, just track the remainder.\\n  # It works the same way.\\n  start state: q0\\n  table:\\n    q0:\\n      0: R       # 2*0 + 0 = 0\\n      1: {R: q1} # 2*0 + 1 = 1\\n      ' ': {R: accept}\\n    q1:\\n      0: {R: q2} # 2*1 + 0 = 2\\n      1: {R: q0} # 2*1 + 1 = 3\\n    q2:\\n      0: {R: q1} # 2*2 + 0 = 4\\n      1: {R: q2} # 2*2 + 1 = 5\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Modify the machine to check if n-1 is divisible by 3,\\n  #   where n is the input. That is, accept the binary of 1, 4, 7, 10, ...\\n  #   Hint: this can be done without modifying the tape (no 'write').\\n\\n  # • Round the number up to the nearest multiple of 3.\\n  #   Hint: do one pass right to find the remainder, then another pass left\\n  #   to add. See the 'binary increment' example for how to add.\\n\\n  # • Round the number down to the nearest multiple of 3.\\npositions:\\n  q0: {x: 230, y: 250}\\n  q1: {x: 400, y: 250}\\n  q2: {x: 570, y: 250}\\n  accept: {x: 230.01, y: 380}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/divisibleBy3.yaml\n ** module id = 28\n ** module chunks = 1\n **/","module.exports = \"name: divisible by 3 (base 10)\\nsource code: |\\n  # Checks if a base 10 number is divisible by 3.\\n  input: 4728 # try 42, 57, 1337, 5328, 7521, 314159265\\n  blank: ' '\\n  # This uses the same idea as the base 2 version.\\n  #\\n  # To make things more interesting, we derive the step relation:\\n  # Let x be the number left of the tape head,\\n  #     d the digit under the head, and\\n  #     x' the number up to and including the head.\\n  # Then\\n  #   x' = 10x + d .\\n  # Notice 10 ≡ 1 (mod 3). Therefore\\n  #   x' ≡ x + d (mod 3) .\\n  # Each step simply adds the new digit's remainder mod 3.\\n  start state: q0\\n  table:\\n    q0:\\n      [0,3,6,9]: R     # 0 + 0 ≡ 0 (mod 3)\\n      [1,4,7]: {R: q1} # 0 + 1 ≡ 1\\n      [2,5,8]: {R: q2} # 0 + 2 ≡ 2\\n      ' ': {R: accept}\\n    q1:\\n      [0,3,6,9]: R     # 1 + 0 ≡ 1\\n      [1,4,7]: {R: q2} # 1 + 1 ≡ 2\\n      [2,5,8]: {R: q0} # 1 + 2 ≡ 0\\n    q2:\\n      [0,3,6,9]: R     # 2 + 0 ≡ 2\\n      [1,4,7]: {R: q0} # 2 + 1 ≡ 0\\n      [2,5,8]: {R: q1} # 2 + 2 ≡ 1\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Check for divisibility by 5.\\n  #   Hint: only 2 states (besides accept) are required.\\n\\n  # • Check for divisibility by 4.\\n  #   Hint: use 4 states (besides accept).\\npositions:\\n  # centered equilateral triangle with side length 250\\n  q0: {x: 275, y: 322.1688}\\n  q1: {x: 400, y: 105.6624}\\n  q2: {x: 525, y: 322.1688}\\n  accept: {x: 275.01, y: 430}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/divisibleBy3Base10.yaml\n ** module id = 29\n ** module chunks = 1\n **/","module.exports = \"name: multiplied lengths\\nsource code: |\\n  # Decides the language { a^(i)b^(j)c^(k) | i*j = k and i,j,k ≥ 1 }.\\n  # (a's followed by b's then c's,\\n  # where the number of a's multiplied by the number of b's\\n  # equals the number of c's.)\\n  input: aabbbcccccc # try abc, b, aabcbc, aabcc, aabbbbcccccccc\\n  blank: ' '\\n  start state: start\\n\\n  table:\\n    # Check for the form a^(i)b^(j)c^(k) where i,j,k ≥ 1.\\n    start:  {        a: {R: a+}}\\n    a+:     {a: R,   b: {R: b+}}\\n    b+:     {b: R,   c: {R: c+}}\\n    c+:     {c: R, ' ': {L: left}}\\n    left:\\n      [a,b,c]: L\\n      ' ': {R: eachA}\\n    # Then check that i*j = k.\\n    #   The approach is two nested loops:\\n    #   For each 'a':\\n    #     For each 'b':\\n    #       Mark one 'c'\\n    #   At the end, check that all c's are marked.\\n    eachA:\\n      a: {write: ' ', R: eachB}\\n      b: {R: scan}\\n    eachB:\\n      a: R\\n      b: {write: B, R: markC}\\n      C: {L: nextA}\\n    markC:\\n      [b,C]: R\\n      c: {write: C, L: nextB}\\n    nextB:\\n      [b,C]: L\\n      B: {R: eachB}\\n    nextA:\\n      a: L\\n      B: {write: b, L}\\n      ' ': {R: eachA}\\n\\n    scan:\\n      [b,C]: R\\n      ' ': {R: accept}\\n    accept:\\npositions:\\n  start:  {x: 180, y: 40}\\n  a+:     {x: 180, y: 180}\\n  b+:     {x: 180, y: 320}\\n  c+:     {x: 180, y: 460}\\n  left:   {x: 290, y: 320}\\n\\n  accept: {x: 400, y: 40}\\n  eachA:  {x: 400, y: 180}\\n  eachB:  {x: 400, y: 320}\\n  markC:  {x: 400, y: 460}\\n\\n  scan:   {x: 560, y: 180}\\n  nextA:  {x: 560, y: 320}\\n  nextB:  {x: 560, y: 460}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/lengthMult.yaml\n ** module id = 30\n ** module chunks = 1\n **/","module.exports = \"name: equal strings\\nsource code: |\\n  # Decides the language { w#w | w ∈ {0,1}* }\\n  # (two equal binary strings separated by '#')\\n  input: '01001#01001' # try '#', '1#10', '10#1', '10#10'\\n  blank: ' '\\n  # Two strings are equal if they are both the empty string,\\n  # or they start with the same symbol and are equal thereafter.\\n  start state: start\\n  table:\\n    start:\\n      # Inductive case: start with the same symbol.\\n      0: {write: ' ', R: have0}\\n      1: {write: ' ', R: have1}\\n      # Base case: empty string.\\n      '#': {R: check}\\n    have0:\\n      [0,1]: R\\n      '#': {R: match0}\\n    have1:\\n      [0,1]: R\\n      '#': {R: match1}\\n    match0:\\n      x: R\\n      0: {write: x, L: back}\\n    match1:\\n      x: R\\n      1: {write: x, L: back}\\n    back:\\n      [0,1,'#',x]: L\\n      ' ': {R: start}\\n    check:\\n      x: R\\n      ' ': {R: accept}\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Accept if the second string is the bitwise complement\\n  #   (1s and 0s swapped) of the first, e.g. accept '1101#0010'.\\n\\n  # • Check that a binary string has the same number of 0s and 1s;\\n  #   eg., accept '001110' but reject '10010'.\\n\\n  # • Check if two strings are different.\\n  #   Example: accept '00#001' and '0101#0111', but reject '1001#1001'.\\npositions:\\n  accept: {x: 80 , y: 250}\\n  check:  {x: 190, y: 250}\\n  # regular hexagon with side length 150\\n  start:  {x: 300, y: 250}\\n  back:   {x: 600, y: 250}\\n  have1:  {x: 375, y: 120.10}\\n  match1: {x: 525, y: 120.10}\\n  have0:  {x: 375, y: 379.90}\\n  match0: {x: 525, y: 379.90}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/matchBinaryStrings.yaml\n ** module id = 31\n ** module chunks = 1\n **/","module.exports = \"name: three equal lengths\\nsource code: |\\n  # Decides the language { aⁿbⁿcⁿ | n ≥ 1 }, that is,\\n  # accepts a's followed by b's then c's of the same length.\\n  input: aabbcc # try bac, aabc, aabcc, aabcbc\\n  blank: ' '\\n  # Mark the first a, b, and c on each pass (by capitalizing them).\\n  # All a's must precede all b's, which must precede all c's.\\n  # When there are no more a's,\\n  # all input symbols should have been marked.\\n  start state: qA\\n  table:\\n    qA:\\n      a: {write: A, R: qB}\\n      B: {R: scan}\\n    qB:\\n      [a,B]: R\\n      b: {write: B, R: qC}\\n    qC:\\n      [b,C]: R\\n      c: {write: C, L: back}\\n    back:\\n      [a,B,b,C]: L\\n      A: {R: qA}\\n    scan:\\n      [B,C]: R\\n      ' ': {R: accept}\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Suppose a ledger starts from 0 and gains one dollar for each +\\n  #   and loses one for each -. Reading left to right,\\n  #   check that the account never goes into the negative.\\n  #   Examples: accept '+-++' and '++-+--', reject '-++' and '++---+'.\\n\\n  # • Check parentheses for proper nesting,\\n  #   e.g. accept '()(()()())' but reject '(()))(' and '(()('.\\npositions:\\n  qA: {x: 240, y: 250}\\n  qB: {x: 400, y: 250}\\n  qC: {x: 560, y: 250}\\n  back:   {x: 400, y: 370}\\n  scan:   {x: 320, y: 150}\\n  accept: {x: 480, y: 150}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/matchThreeLengths.yaml\n ** module id = 32\n ** module chunks = 1\n **/","module.exports = \"name: palindrome\\nsource code: |\\n  # Accepts palindromes made of the symbols 'a' and 'b'\\n  input: 'abba' # try a, ab, bb, babab\\n  blank: ' '\\n  start state: start\\n  synonyms:\\n    accept: {R: accept}\\n    reject: {R: reject}\\n  # A palindrome is either the empty string, a single symbol,\\n  # or a (shorter) palindrome with the same symbol added to both ends.\\n  table:\\n    start:\\n      a: {write: ' ', R: haveA}\\n      b: {write: ' ', R: haveB}\\n      ' ': accept # empty string\\n    haveA:\\n      [a,b]: R\\n      ' ': {L: matchA}\\n    haveB:\\n      [a,b]: R\\n      ' ': {L: matchB}\\n    matchA:\\n      a: {write: ' ', L: back} # same symbol at both ends\\n      b: reject\\n      ' ': accept # single symbol\\n    matchB:\\n      a: reject\\n      b: {write: ' ', L: back} # same symbol at both ends\\n      ' ': accept # single symbol\\n    back:\\n      [a,b]: L\\n      ' ': {R: start}\\n    accept:\\n    reject:\\n\\n\\n  # Exercise:\\n\\n  # • Modify the machine to include 'c' in the symbol alphabet,\\n  #   so it also works for strings like 'cabbac'.\\npositions:\\n  haveA:  {x: 240, y: 185}\\n  start:  {x: 400, y: 185}\\n  haveB:  {x: 560, y: 185}\\n\\n  matchA: {x: 240, y: 315}\\n  back:   {x: 400, y: 315}\\n  matchB: {x: 560, y: 315}\\n\\n  accept: {x: 400, y: 55}\\n  reject: {x: 400, y: 445}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/palindrome.yaml\n ** module id = 33\n ** module chunks = 1\n **/","module.exports = \"name: powers of two\\nsource code: |\\n  # Matches strings of 0s whose length is a power of two.\\n\\n  # This example comes from the textbook\\n  #   \\\"Introduction to the Theory of Computation\\\" (3rd edition, 2012)\\n  #   by Michael Sipser\\n  # The states have been renamed (from q1, q2, etc.)\\n  # to make it easier to understand.\\n  input: '0000' # try '0', '000', '00000000'\\n  blank: ' '\\n  start state: zero\\n  synonyms:\\n    accept: {R: accept}\\n    reject: {R: reject}\\n  # The idea: divide the length by 2 repeatedly until it reaches 1.\\n\\n  # To do this, cross off every other 0, one pass at a time.\\n  # If any pass reads an odd number of 0s (a remainder), reject right away.\\n  # Otherwise if every pass halves the length cleanly,\\n  # the length must be a power of two (1*2^n for n ≥ 0).\\n\\n  # Note that since the first 0 is never crossed off, we can simply\\n  # erase it on the first pass and start the count from 1 from then on.\\n  table:\\n    zero:\\n      0  : {write: ' ', R: one}\\n      ' ': reject\\n    # Base case: accept length of 1 = 2^0.\\n    one:\\n      0  : {write: x, R: even}\\n      ' ': accept\\n      x  : R\\n    # Inductive case: divide by 2 and check for no remainder.\\n    even:\\n      0  : {R: odd}\\n      ' ': {L: back} # return for another pass\\n      x  : R\\n    odd: # odd and > 1\\n      0  : {write: x, R: even}\\n      ' ': reject # odd number of 0s on this pass\\n      x  : R\\n    back:\\n      ' ': {R: one}\\n      [0,x]: L\\n    accept:\\n    reject:\\npositions:\\n  zero:   {x: 200, y: 200}\\n  one:    {x: 400, y: 200}\\n  even:   {x: 600, y: 200}\\n\\n  odd:    {x: 600, y: 385}\\n  back:   {x: 500, y: 125}\\n  accept: {x: 400, y: 300}\\n  reject: {x: 200, y: 385}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/powersOfTwo.yaml\n ** module id = 34\n ** module chunks = 1\n **/","module.exports = \"name: repeat 0 1\\nsource code: |\\n  # This is the first example machine given by Alan Turing in his 1936 paper\\n  #   \\\"On Computable Numbers, with an Application to\\n  #    the Entscheidungsproblem\\\".\\n  # It simply writes the endless sequence 0 1 0 1 0 1...\\n  blank: ' '\\n  start state: b\\n  table:\\n    b:\\n      ' ': {write: 0, R: c}\\n    c:\\n      ' ':           {R: e}\\n    e:\\n      ' ': {write: 1, R: f}\\n    f:\\n      ' ':           {R: b}\\n\\n\\n  # (Turing uses the convention of leaving a gap after each output cell,\\n  # reserving it for marking the cell. For instance, on a tape that\\n  # contains '0 1x0 0 1 1y1y0y', x marks the leftmost 1 and y marks 110.)\\npositions:\\n  b: {x: 300, y: 200, fixed: false}\\n  c: {x: 450, y: 150, fixed: false}\\n  e: {x: 500, y: 300, fixed: false}\\n  f: {x: 350, y: 350, fixed: false}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/repeat01.yaml\n ** module id = 35\n ** module chunks = 1\n **/","module.exports = \"name: unary multiplication\\nsource code: |\\n  # Multiplies together two unary numbers separated by a '*'.\\n  # (Unary is like tallying. Here '||*|||' means 2 times 3.)\\n  input: '||*|||' # try '*', '|*|||', '||||*||'\\n  blank: ' '\\n\\n  # The idea:\\n  #   multiply(0, b) = 0\\n  #   multiply(a, b) = b + multiply(a-1, b)   when a > 0\\n  start state: eachA\\n  table:\\n    # For each 1 in a, add a copy of b.\\n    eachA:\\n      '|': {write: ' ', R: toB}  # Inductive case: a > 0.\\n      '*': {R: skip}             # Base case:      a = 0.\\n    toB:\\n      '|': R\\n      '*': {R: eachB} # enter copier\\n    nextA: # return from copier\\n      ' ': {write: '|', R: eachA}\\n      ['|','*']: L\\n\\n    skip:\\n      '|': R\\n      ' ': {R: done}\\n    done:\\n\\n    # This is the 'copy 1s' machine, with ' ' as 0 and '|' as 1.\\n    eachB:\\n      ' ': {L: nextA}\\n      '|': {write: ' ', R: sep}\\n    sep:\\n      ' ': {R: add}\\n      '|': R\\n    add:\\n      ' ': {write: '|', L: sepL}\\n      '|': R\\n    sepL:\\n      ' ': {L: nextB}\\n      '|': L\\n    nextB:\\n      ' ': {write: '|', R: eachB}\\n      '|': L\\n\\npositions:\\n  eachA:  {x: 400, y:  50}\\n  toB:    {x: 400, y: 150}\\n  eachB:  {x: 400, y: 250}\\n  sep:   {x: 400, y: 350}\\n  add:   {x: 400, y: 450}\\n\\n  sepL:  {x: 280, y: 350}\\n  nextB:  {x: 280, y: 250}\\n\\n  nextA:  {x: 280, y: 90}\\n  skip:   {x: 520, y: 90}\\n  done:   {x: 520, y: 190}\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/examples/unaryMult.yaml\n ** module id = 36\n ** module chunks = 1\n **/","'use strict';\n\n/* global document */\nvar KeyValueStorage = require('./storage').KeyValueStorage;\nvar TMDocument = require('./TMDocument');\nvar d3 = require('d3');\nvar defaults = require('lodash/fp').defaults; // NB. 2nd arg takes precedence\n\n/**\n * Document menu controller.\n *\n * The view is fully determined by a 3-tuple: ([ID], ID -> Name, currentID).\n * @constructor\n * @param {Object}  args                  argument object\n * @param {HTMLSelectElement}\n *                  args.menu\n * @param {?Node}  [args.group=args.menu] Node to add documents to.\n * @param {string}  args.storagePrefix\n * @param {?(TMDocument -> HTMLOptionElement)}\n *                  args.makeOption       Customize rendering for each document entry.\n * @param {?string} args.firsttimeDocID   Document to open on the first visit.\n */\nfunction DocumentMenu(args) {\n  var menu = args.menu,\n      group = args.group || menu,\n      storagePrefix = args.storagePrefix,\n      firsttimeDocID = args.firsttimeDocID;\n\n  if (!menu) {\n    throw new TypeError('DocumentMenu: missing parameter: menu element');\n  } else if (!storagePrefix) {\n    throw new TypeError('DocumentMenu: missing parameter: storage prefix');\n  }\n  if (args.makeOption) {\n    this.optionFromDocument = args.makeOption;\n  }\n  this.menu = menu;\n  this.group = group;\n  this.group.innerHTML = '';\n  this.__storagePrefix = storagePrefix;\n\n  // Load document entries (non-examples)\n  this.doclist = new DocumentList(storagePrefix + '.list');\n  this.render();\n  // Re-open last-opened document\n  this.selectDocID(this.getSavedCurrentDocID() || firsttimeDocID);\n\n  // Listen for selection changes\n  var self = this;\n  this.menu.addEventListener('change', function () {\n    self.onChange(self.currentDocument, {type: 'open'});\n  });\n\n  // Listen for storage changes in other tabs/windows\n  KeyValueStorage.addStorageListener(function (e) {\n    var docID;\n    var option, newOption;\n\n    if (e.key === self.doclist.storageKey) {\n      // case: [ID] list changed\n      self.doclist.readList();\n      self.render();\n    } else if ( (docID = TMDocument.IDFromNameStorageKey(e.key)) ) {\n      // case: single document renamed: (ID -> Name) changed\n      option = self.findOptionByDocID(docID);\n      if (option) {\n        // replace the whole <option>, to be consistent with .optionFromDocument\n        option.parentNode.replaceChild(\n          newOption = self.optionFromDocument(new TMDocument(docID)),\n          option\n        );\n        newOption.selected = option.selected;\n        d3.select(newOption).datum( d3.select(option).datum() );\n      }\n    }\n  });\n}\n\nObject.defineProperties(DocumentMenu.prototype, {\n  currentOption: {\n    get: function () {\n      return this.menu.options[this.menu.selectedIndex];\n    },\n    enumerable: true\n  },\n  currentDocument: {\n    get: function () {\n      var opt = this.currentOption;\n      return opt ? new TMDocument(opt.value) : null;\n    },\n    enumerable: true\n  }\n});\n\nDocumentMenu.prototype.render = function () {\n  var currentDocID = this.currentOption ? this.currentOption.value : null;\n\n  var option = d3.select(this.group).selectAll('option')\n    .data(this.doclist.list, function (entry) { return entry.id; });\n\n  option.exit().remove();\n\n  var self = this;\n  option.enter().insert(function (entry) {\n    return self.optionFromDocument(new TMDocument(entry.id));\n  });\n\n  // If current document was deleted, switch to another document\n  if (this.currentOption.value !== currentDocID) {\n    // fallback 1: saved current docID\n    if (!this.selectDocID(this.getSavedCurrentDocID(), {type: 'delete'})) {\n      // fallback 2: whatever is now selected\n      this.onChange(this.currentDocument, {type: 'delete'});\n    }\n  }\n};\n\n// Returns the <option> whose 'value' attribute is docID.\nDocumentMenu.prototype.findOptionByDocID = function (docID) {\n  return this.menu.querySelector('option[value=\"' + docID.replace(/\"/g, '\\\\\"') + '\"]');\n};\n\n// Selects (switches the active item to) the given docID. Returns true on success.\nDocumentMenu.prototype.selectDocID = function (docID, opts) {\n  try {\n    this.findOptionByDocID(docID).selected = true;\n  } catch (e) {\n    return false;\n  }\n  this.onChange(this.currentDocument, opts);\n  return true;\n};\n\n// Saves the current (selected) docID to storage.\nDocumentMenu.prototype.saveCurrentDocID = function () {\n  var docID = this.currentOption && this.currentOption.value;\n  if (docID) {\n    KeyValueStorage.write(this.__storagePrefix + '.currentDocID', docID);\n  }\n};\n\n// Returns the saved current docID, otherwise null.\nDocumentMenu.prototype.getSavedCurrentDocID = function () {\n  return KeyValueStorage.read(this.__storagePrefix + '.currentDocID');\n};\n\n// Configurable methods\n\nDocumentMenu.prototype.optionFromDocument = function (doc) {\n  var option = document.createElement('option');\n  option.value = doc.id;\n  option.text = doc.name || 'untitled';\n  return option;\n};\n\n// Called when the current document ID changes\n// through user action (<select>) or this class's API.\n// The callback receives the new value of .currentDocument,\n// along with the options object (whose .type\n// is 'duplicate', 'delete', or 'open').\nDocumentMenu.prototype.onChange = function () {\n};\n\n// Internal Helpers\n\n// prepend then select\nDocumentMenu.prototype.__prepend = function (doc, opts) {\n  var option = this.optionFromDocument(doc);\n  this.group.insertBefore(option, this.group.firstChild);\n  if (opts && opts.select) {\n    this.menu.selectedIndex = option.index;\n    this.onChange(doc, opts);\n  }\n  return doc;\n};\n\n// Methods not about Current Document\n\nDocumentMenu.prototype.newDocument = function (opts) {\n  return this.__prepend(this.doclist.newDocument(), defaults({type: 'open'}, opts));\n};\n\n// Methods about Current Document\n\nDocumentMenu.prototype.duplicate = function (doc, opts) {\n  return this.__prepend(this.doclist.duplicate(doc), defaults({type: 'duplicate'}, opts));\n};\n\nDocumentMenu.prototype.rename = function (name) {\n  this.currentDocument.name = name;\n  this.currentOption.text = name;\n};\n\n// required invariant: one option is always selected.\n// returns true if the current entry was removed from the list.\nDocumentMenu.prototype.delete = function (opts) {\n  this.currentDocument.delete();\n  var index = this.menu.selectedIndex;\n  var didDeleteEntry = this.doclist.deleteIndex(index);\n  if (didDeleteEntry) {\n    this.currentOption.remove();\n    this.menu.selectedIndex = index;\n    this.onChange(this.currentDocument, defaults({type: 'delete'}, opts));\n  }\n  return didDeleteEntry;\n};\n\n/////////////////////\n// Document List   //\n// (model/storage) //\n/////////////////////\n\n\n// for custom documents.\nfunction DocumentList(storageKey) {\n  this.storageKey = storageKey;\n  this.readList();\n}\n\n// () -> string\nDocumentList.newID = function () {\n  return String(Date.now());\n};\n\n// internal methods.\nDocumentList.prototype.add = function (docID) {\n  this.__list.unshift({id: docID});\n  this.writeList();\n};\nDocumentList.prototype.readList = function () {\n  this.__list = JSON.parse(KeyValueStorage.read(this.storageKey)) || [];\n};\nDocumentList.prototype.writeList = function () {\n  KeyValueStorage.write(this.storageKey, JSON.stringify(this.__list));\n};\n\nDocumentList.prototype.newDocument = function () {\n  var newID = DocumentList.newID();\n  this.add(newID);\n  return new TMDocument(newID);\n};\n\nDocumentList.prototype.duplicate = function (doc) {\n  return this.newDocument().copyFrom(doc);\n};\n\n/**\n * Behaves like list.splice(index, 1).\n * @param  {number} index index of the element to delete\n * @return {boolean} true if an element was removed, false otherwise (index out of bounds)\n */\nDocumentList.prototype.deleteIndex = function (index) {\n  var deleted = this.__list.splice(index, 1);\n  this.writeList();\n  return (deleted.length > 0);\n};\n\nObject.defineProperties(DocumentList.prototype, {\n  list: {\n    get: function () { return this.__list; },\n    enumerable: true\n  }\n});\n\nmodule.exports = DocumentMenu;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/DocumentMenu.js\n ** module id = 37\n ** module chunks = 1\n **/","'use strict';\nvar TMSimulator = require('./TMSimulator'),\n    parser = require('./parser'),\n    util = require('./util'),\n    ace = require('ace-builds/src-min-noconflict'),\n    d3 = require('d3');\nvar TMSpecError = parser.TMSpecError;\nvar YAMLException = parser.YAMLException;\nvar UndoManager = ace.require('ace/undomanager').UndoManager;\n\n/**\n * For editing and displaying a TMDocument.\n * The controller coordinates the interactions between\n *   1. simulator\n *   2. code editor\n *   3. storage\n *\n * All container and button params are required.\n * @param {Object} containers\n *   Empty containers to use (contents will likely be replaced).\n * @param {HTMLDivElement} containers.simulator\n * @param {HTMLDivElement} containers.editorAlerts\n * @param {HTMLDivElement} containers.editor\n * @param {Object} buttons Buttons to use.\n * @param {HTMLButtonElement} buttons.simulator.run\n * @param {HTMLButtonElement} buttons.simulator.step\n * @param {HTMLButtonElement} buttons.simulator.reset\n * @param {HTMLButtonElement} buttons.editor.load For loading the editor source\n * @param {HTMLButtonElement} buttons.editor.revert For reverting the editor source\n * @param {TMDocument} document The document to load from and save to.\n */\nfunction TMDocumentController(containers, buttons, document) {\n  this.simulator = new TMSimulator(containers.simulator, buttons.simulator);\n\n  // Set up ace editor //\n  var editor = ace.edit(containers.editor);\n  editor.session.setOptions({\n    mode: 'ace/mode/yaml',\n    tabSize: 2,\n    useSoftTabs: true\n  });\n  editor.setOptions({\n    minLines: 15,\n    maxLines: 50\n  });\n  // suppress warning about\n  // \"Automatically scrolling cursor into view after selection change\"\n  editor.$blockScrolling = Infinity;\n\n  var editorButtons = buttons.editor;\n  var self = this;\n  editorButtons.load\n      .addEventListener('click', function () {\n        self.loadEditorSource();\n        // save whenever \"Load\" is pressed\n        self.save();\n        self.editor.focus();\n      });\n  editorButtons.revert\n      .addEventListener('click', function () {\n        self.revertEditorSource();\n        self.editor.focus();\n      });\n\n  Object.defineProperties(this, {\n    __document: {\n      value: {editor: {}}, // dummy document that gets replaced\n      writable: true\n    },\n    buttons   : { value: buttons },\n    containers: { value: containers },\n    editor    : { value: editor, enumerable: true }\n  });\n  this.openDocument(document);\n}\n\nTMDocumentController.prototype.getDocument = function () {\n  return this.__document;\n};\n\n// set the backing document, without saving/loading or affecting the views.\nTMDocumentController.prototype.setBackingDocument = function (doc) {\n  this.__document = doc;\n};\n\n// save the current document, then open another one.\n// does nothing if the document ID is the same.\nTMDocumentController.prototype.openDocument = function (doc) {\n  if (this.getDocument().id === doc.id) { return; } // same document\n  this.save();\n  return this.forceLoadDocument(doc);\n};\n\n// (low-level) load the document. current data is discarded without saving.\n// this can be used to switch from a deleted document or reload a document.\nTMDocumentController.prototype.forceLoadDocument = function (doc, keepUndoHistory) {\n  this.setBackingDocument(doc);\n  var diagramSource = doc.sourceCode;\n  var editorSource = doc.editorSourceCode;\n  // init //\n  this.simulator.clear();\n  this.setEditorValue(editorSource == null ? diagramSource : editorSource);\n  // prevent undo-ing to the previous document. note: .reset() doesn't work\n  if (!keepUndoHistory) {\n    this.editor.session.setUndoManager(new UndoManager());\n  }\n\n  if (editorSource == null) {\n    // case: synced: load straight from editor.\n    this.loadEditorSource();\n  } else {\n    // case: not synced: editor has separate contents.\n    this.isSynced = false;\n    try {\n      this.simulator.sourceCode = diagramSource;\n      this.simulator.positionTable = doc.positionTable;\n    } catch (e) {\n      this.showCorruptDiagramAlert(true);\n    }\n  }\n};\n\nTMDocumentController.prototype.save = function () {\n  var doc = this.getDocument();\n  if (this.hasValidDiagram) {\n    // sidenote: deleting first can allow saving when space would otherwise be full\n    doc.editorSourceCode = this.isSynced ? undefined : this.editor.getValue();\n    doc.sourceCode = this.simulator.sourceCode;\n    doc.positionTable = this.simulator.positionTable;\n  } else {\n    if (doc.editorSourceCode == null) {\n      // case 1: editor was synced with the diagram.\n      //  only edit doc.sourceCode until it's fixed;\n      //  don't worsen the problem to case 2.\n      doc.sourceCode = this.editor.getValue();\n    } else {\n      // case 2: editor has separate contents.\n      //  this is more confusing, as there are two \"source code\" values to contend with.\n      doc.editorSourceCode = this.editor.getValue();\n    }\n  }\n};\n\n/**\n * Set the editor contents.\n * • Converts null to '', since editor.setValue(null) crashes.\n * • Clears the editor alerts.\n * @param {?string} str\n */\nTMDocumentController.prototype.setEditorValue = function (str) {\n  this.editor.setValue(util.coalesce(str, ''), -1 /* put cursor at start */);\n  this.setAlertErrors([]);\n};\n\n/////////////////////////\n// Error/Alert Display //\n/////////////////////////\n\nfunction aceAnnotationFromYAMLException(e) {\n  return {\n    row: e.mark.line,\n    column: e.mark.column,\n    text: 'Not valid YAML (possibly caused by a typo):\\n' + e.message,\n    type: 'error'\n  };\n}\n\nTMDocumentController.prototype.setAlertErrors = function (errors) {\n  var self = this;\n  var alerts = d3.select(self.containers.editorAlerts).selectAll('.alert')\n    .data(errors, function (e) { return String(e); }); // key by error description\n\n  alerts.exit().remove();\n\n  alerts.enter()\n    .append('div')\n      .attr('class', 'alert alert-danger')\n      .attr('role', 'alert')\n      .each(/** @this div */ function (e) {\n        var div = d3.select(this);\n        if (e instanceof YAMLException) {\n          var annot = aceAnnotationFromYAMLException(e);\n          var lineNum = annot.row + 1; // annotation lines start at 0; editor starts at 1\n          var column = annot.column;\n          div.append('strong')\n              .text('Syntax error on ')\n            .append('a')\n              .text('line ' + lineNum)\n              .on('click', function () {\n                self.editor.gotoLine(lineNum, column, true);\n                self.editor.focus();\n                // prevent scrolling, especially href=\"#\" scrolling to the top\n                d3.event.preventDefault();\n              })\n              .attr('href', '#' + self.containers.editor.id);\n          div.append('br');\n          // aside: text nodes aren't elements so they need to be wrapped (e.g. in span)\n          // https://github.com/mbostock/d3/issues/94\n          div.append('span').text('Possible reason: ' + e.reason);\n        } else if (e instanceof TMSpecError) {\n          div.html(e.message);\n        } else {\n          div.html('<strong>Unexpected error</strong>: ' + e);\n        }\n      });\n  self.editor.session.setAnnotations(\n    errors\n    .map(function (e) {\n      return (e instanceof YAMLException) ? aceAnnotationFromYAMLException(e) : null;\n    })\n    .filter(function (x) { return x; })\n  );\n};\n\n\n//////////////////////////////\n// Syncing diagram & editor //\n//////////////////////////////\n\n// Sync Status\n\n// This method can be overridden as necessary.\n// The default implementation toggles Bootstrap 3 classes.\nTMDocumentController.prototype.setLoadButtonSuccess = function (didSucceed) {\n  d3.select(this.buttons.editor.load)\n      .classed({\n        'btn-success': didSucceed,\n        'btn-primary': !didSucceed\n      });\n};\n\n// internal. whether the editor and diagram source code are in sync, and the diagram is valid.\n// Updates \"Load machine\" button display.\n// for future reference: .isSynced cannot be moved to TMDocument because it requires knowledge from the simulator.\nObject.defineProperty(TMDocumentController.prototype, 'isSynced', {\n  set: function (isSynced) {\n    isSynced = Boolean(isSynced);\n    if (this.__isSynced !== isSynced) {\n      this.__isSynced = isSynced;\n      this.setLoadButtonSuccess(isSynced);\n      if (isSynced) {\n        // changes cause desync\n        var onChange = function () {\n          this.isSynced = false;\n          this.editor.removeListener('change', onChange);\n        }.bind(this);\n        this.editor.on('change', onChange);\n      }\n    }\n  },\n  get: function () { return this.__isSynced; }\n});\n\n// public API for isSynced\nTMDocumentController.prototype.getIsSynced = function () {\n  return Boolean(this.isSynced);\n};\n\n// Load & Revert\n\n// internal. used to detect when an imported document is corrupted.\nObject.defineProperty(TMDocumentController.prototype, 'hasValidDiagram', {\n  get: function () {\n    return Boolean(this.simulator.sourceCode);\n  }\n});\n\n/**\n * Show/hide the notice that the diagram's source code is invalid;\n * use this when the editor has contents of its own (so it can't display the diagram's source).\n *\n * This happens for imported documents that were corrupted.\n * It can also happen if the value in storage is tampered with.\n * @param  {boolean} show true to display immediately, false to hide.\n */\nTMDocumentController.prototype.showCorruptDiagramAlert = function (show) {\n  function enquote(s) { return '<q>' + s + '</q>'; }\n  var div = d3.select(this.simulator.container);\n  if (show) {\n    var revertName = this.buttons.editor.revert.textContent.trim();\n    div.html('')\n      .append('div')\n        .attr('class', 'alert alert-danger')\n        .html('<h4>This imported document has an error</h4>' +\n          [ 'The diagram was not valid and could not be displayed.'\n          , 'You can either load a new diagram from the editor, or attempt to recover this one'\n          , 'using ' + enquote(revertName) + ' (which will replace the current editor contents).'\n          ].join('<br>')\n        );\n  } else {\n    div.selectAll('.alert').remove();\n  }\n};\n\n// Sync from editor to diagram\nTMDocumentController.prototype.loadEditorSource = function () {\n  // load to diagram, and report any errors\n  var errors = (function () {\n    try {\n      var isNewDiagram = !this.hasValidDiagram;\n      this.simulator.sourceCode = this.editor.getValue();\n      if (isNewDiagram) {\n        // loaded new, or recovery succeeded => close error notice, restore positions\n        this.showCorruptDiagramAlert(false);\n        this.simulator.positionTable = this.getDocument().positionTable;\n      }\n      // .toJSON() is the only known way to preserve the cursor/selection(s)\n      // this.__loadedEditorSelection = this.editor.session.selection.toJSON();\n      return [];\n    } catch (e) {\n      return [e];\n    }\n  }.call(this));\n  this.isSynced = (errors.length === 0);\n  this.setAlertErrors(errors);\n};\n\n// Sync from diagram to editor\nTMDocumentController.prototype.revertEditorSource = function () {\n  this.setEditorValue(this.hasValidDiagram\n    ? this.simulator.sourceCode\n    : this.getDocument().sourceCode);\n\n  if (this.hasValidDiagram) {\n    this.isSynced = true;\n  } else {\n    // show errors when reverting to a corrupted diagram\n    this.loadEditorSource();\n  }\n  // if (this.__loadedEditorSelection) {\n  //   this.editor.session.selection.fromJSON(this.__loadedEditorSelection);\n  // }\n};\n\nmodule.exports = TMDocumentController;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/TMDocumentController.js\n ** module id = 38\n ** module chunks = 1\n **/","'use strict';\n\nvar parseSpec = require('./parser').parseSpec,\n    TMViz = require('./TMViz'),\n    watchInit = require('./watch').watchInit,\n    values = require('lodash').values;\n\n/**\n * Turing machine simulator component.\n *\n * Contains a state diagram, tape diagram, and button controls.\n * @param {[type]} container [description]\n * @param {[type]} buttons   [description]\n */\nfunction TMSimulator(container, buttons) {\n  this.container = container;\n  this.buttons = buttons;\n\n  var self = this;\n  buttons.step\n      .addEventListener('click', function () {\n        self.machine.isRunning = false;\n        self.machine.step(); // each step click corresponds to 1 machine step\n      });\n  buttons.run\n      .addEventListener('click', function () {\n        self.machine.isRunning = !self.machine.isRunning;\n      });\n  buttons.reset\n      .addEventListener('click', function () {\n        self.machine.reset();\n      });\n  buttons.all = values(buttons);\n\n  this.clear();\n}\n\nTMSimulator.prototype.clear = function () {\n  this.sourceCode = null;\n};\n\nObject.defineProperties(TMSimulator.prototype, {\n  /**\n   * The machine's source code.\n   * • Setting a new source code will attempt to persist the state node positions.\n   * • To set a new machine, first call .clear(), then set the source code.\n   */\n  sourceCode: {\n    get: function () {\n      return this.__sourceCode;\n    },\n    // throws if sourceCode has errors\n    set: function (sourceCode) {\n      if (this.machine) {\n        this.machine.isRunning = false; // important\n        this.machine.stateviz.force.stop();\n      }\n      if (sourceCode == null) {\n        // clear display\n        this.machine = null;\n        this.container.innerHTML = '';\n      } else {\n        // parse & check, then set\n        var spec = parseSpec(sourceCode);\n        if (this.machine) {\n          // case: update\n          // copy & restore positions, clear & load contents\n          var posTable = this.machine.positionTable;\n          this.clear();\n          this.machine = new TMViz(this.container, spec, posTable);\n        } else {\n          // case: load new\n          this.machine = new TMViz(this.container, spec);\n        }\n      }\n      this.__sourceCode = sourceCode;\n    },\n    enumerable: true\n  },\n  positionTable: {\n    get: function () {\n      return this.machine && this.machine.positionTable;\n    },\n    set: function (posTable) {\n      if (this.machine && posTable) {\n        this.machine.positionTable = posTable;\n      }\n    },\n    enumerable: true\n  },\n  machine: {\n    get: function () {\n      return this.__machine;\n    },\n    set: function (machine) {\n      this.__machine = machine;\n      this.rebindButtons();\n    }\n  }\n});\n\n/////////////\n// Buttons //\n/////////////\n\n/**\n * The innerHTML for the \"Run\" button.\n * The default value can be overridden.\n * @type {string}\n */\nTMSimulator.prototype.htmlForRunButton =\n  '<span class=\"glyphicon glyphicon-play\" aria-hidden=\"true\"></span><br>Run';\nTMSimulator.prototype.htmlForPauseButton =\n  '<span class=\"glyphicon glyphicon-pause\" aria-hidden=\"true\"></span><br>Pause';\n\n// bind: .disabled for Step and Run, and .innerHTML (Run/Pause) for Run\nfunction rebindStepRun(stepButton, runButton, runHTML, pauseHTML, machine) {\n  function onHaltedChange(isHalted) {\n    stepButton.disabled = isHalted;\n    runButton.disabled = isHalted;\n  }\n  function onRunningChange(isRunning) {\n    runButton.innerHTML = isRunning ? pauseHTML : runHTML;\n  }\n  watchInit(machine, 'isHalted', function (prop, oldval, isHalted) {\n    onHaltedChange(isHalted);\n    return isHalted;\n  });\n  watchInit(machine, 'isRunning', function (prop, oldval, isRunning) {\n    onRunningChange(isRunning);\n    return isRunning;\n  });\n}\n\n// internal method.\nTMSimulator.prototype.rebindButtons = function () {\n  var buttons = this.buttons;\n  var enable = (this.machine != null);\n  if (enable) {\n    rebindStepRun(buttons.step, buttons.run,\n      this.htmlForRunButton, this.htmlForPauseButton, this.machine);\n  }\n  buttons.all.forEach(function (b) { b.disabled = !enable; });\n};\n\nmodule.exports = TMSimulator;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/TMSimulator.js\n ** module id = 39\n ** module chunks = 1\n **/","var map = {\n\t\"./_template.yaml\": 21,\n\t\"./binaryAdd.yaml\": 22,\n\t\"./binaryIncrement.yaml\": 23,\n\t\"./binaryMult.yaml\": 24,\n\t\"./busyBeaver3.yaml\": 25,\n\t\"./busyBeaver4.yaml\": 26,\n\t\"./copy1s.yaml\": 27,\n\t\"./divisibleBy3.yaml\": 28,\n\t\"./divisibleBy3Base10.yaml\": 29,\n\t\"./lengthMult.yaml\": 30,\n\t\"./matchBinaryStrings.yaml\": 31,\n\t\"./matchThreeLengths.yaml\": 32,\n\t\"./palindrome.yaml\": 33,\n\t\"./powersOfTwo.yaml\": 34,\n\t\"./repeat01.yaml\": 35,\n\t\"./unaryMult.yaml\": 36\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 40;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/examples ./~/raw-loader!^\\.\\/.*\\.yaml$\n ** module id = 40\n ** module chunks = 1\n **/","'use strict';\n/**\n * Displays a table of keyboard shortcuts.\n */\n\nvar d3 = require('d3');\n\nfunction identity(x) { return x; }\n\n/**\n * Renders a table, using three layers of list nesting: tbody, tr, td.\n * @param  {[ [[HTML]] ]}     data\n * @param  {HTMLTableElement} table\n * @return {D3Selection}            D3 selection of the <tbody> elements\n */\nfunction renderTable(data, table) {\n  var tbody = d3.select(table).selectAll('tbody')\n      .data(data)\n    .enter().append('tbody');\n\n  var tr = tbody.selectAll('tr')\n      .data(identity)\n    .enter().append('tr');\n\n  tr.selectAll('td')\n      .data(identity)\n    .enter().append('td')\n      .html(identity);\n\n  return tbody;\n}\n\n\n// type Key = string;\n// type KeyList = [Key];\n\n// Key -> Key\nfunction abbreviateKey(key) {\n  switch (key) {\n    case 'Command': return 'Cmd';\n    case 'Option':  return 'Opt';\n    case 'Up':      return '↑';\n    case 'Down':    return '↓';\n    case 'Left':    return '←';\n    case 'Right':   return '→';\n    default:        return key;\n  }\n}\n\n// KeyList -> HTML\nfunction keylistToHTML(keys) {\n  return keys.map(function (key) {\n    return '<kbd>' + key + '</kbd>';\n  }).join('-');\n}\n\n// Commands -> String -> KeyList\nfunction createGetKeylist(commands) {\n  var platform = commands.platform;\n  // workaround: some ace keybindings for Mac use Alt instead of Option\n  var altToOption = platform !== 'mac' ? identity : function (key) {\n    return (key === 'Alt') ? 'Option' : key;\n  };\n\n  return function getKeylist(name) {\n    return commands.commands[name].bindKey[platform].split('-').map(altToOption);\n  };\n}\n\n\n// Fills a <table> with some default keyboard shortcuts.\nfunction main(commands, table) {\n  var getKeylist = createGetKeylist(commands);\n\n  return renderTable(entries.map(function (group) {\n    return group.map(function (d) {\n      return [\n        keylistToHTML(getKeylist(d.name).map(abbreviateKey)),\n        d.desc\n      ];\n    });\n  }), table);\n}\n\nvar entries = [\n  [\n    { name: 'save', desc: 'Load machine<br> <small>Save changes and load the machine.</small>' }\n  ], [\n    { name: 'togglecomment', desc: 'Toggle comment' },\n    { name: 'indent', desc: 'Indent selection' },\n    { name: 'outdent', desc: 'Unindent selection' }\n  ], [\n    { name: 'movelinesup', desc: 'Move line up' },\n    { name: 'movelinesdown', desc: 'Move line down' },\n    { name: 'duplicateSelection', desc: 'Duplicate line/selection' }\n  ], [\n    { name: 'selectMoreAfter', desc: 'Add next occurrence to selection<br> <small>Like a quick “find”. Useful for renaming things.</small>' },\n    { name: 'find', desc: 'Find' },\n    { name: 'replace', desc: 'Find and Replace' }\n  ]\n];\n\n\nexports.main = main;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/kbdshortcuts.js\n ** module id = 41\n ** module chunks = 1\n **/","'use strict';\n\n// var d3 = require('d3');\nvar $ = require('jquery'); // for event delegation\n\nfunction identity(x) { return x; }\nfunction head(array) { return array[0]; }\n\n/**\n * A <table> that includes a checkbox in front of each row,\n * and a header checkbox to (de)select all rows.\n * @param {D3Selection<HTMLTableElement>} args.table empty table to use\n * @param {[string]}    [args.headers] column headers\n * @param {[[string]]}  [args.data]    table data\n */\nfunction CheckboxTable(args) {\n  this.table = args.table;\n  this.headerRow = this.table.append('thead').append('tr');\n  this.tbody = this.table.append('tbody');\n  // header checkbox (selects/deselects all checkboxes)\n  var self = this;\n  this.headerCheckbox = this.headerRow\n    .append('th')\n      .attr('class', 'checkbox-cell')\n    .append('input')\n      .attr('type', 'checkbox')\n      .on('click', /* @this checkbox */ function () {\n        self.getCheckboxes().property('checked', this.checked);\n        self.onChange();\n      });\n  $(this.tbody.node()).on('click', 'tr', /* @this tr */ function (e) {\n    // treat whole <tr> as click zone\n    if (e.target.tagName !== 'INPUT') {\n      var box = this.querySelector('input[type=\"checkbox\"]');\n      box.checked = !box.checked;\n    }\n    // update header checkbox\n    self.refresh();\n    self.onChange();\n  });\n  // content\n  args.headers && this.setHeaders(args.headers);\n  args.data && this.setData(args.data);\n}\n\n/**\n * Set the column headers.\n * @param {[string]} headers\n */\nCheckboxTable.prototype.setHeaders = function (headers) {\n  var th = this.headerRow\n    .selectAll('th:not(.checkbox-cell)')\n      .data(headers);\n  th.exit().remove();\n  th.enter().append('th');\n  th.text(identity);\n};\n\n/**\n * Set the table body data.\n *\n * Each row begins with a checkbox whose .value is the first cell.\n * Rows are keyed by the first cell when updating data.\n * @param {[[string]]} data\n * @return this\n */\nCheckboxTable.prototype.setData = function (data) {\n  var tr = this.tbody.selectAll('tr')\n      .data(data, head);\n  tr.exit().remove();\n  tr.enter()\n    .append('tr')\n  // checkbox at the start of each row\n    .append('td')\n      .attr('class', 'checkbox-cell')\n    .append('input')\n      .attr({\n        type: 'checkbox',\n        value: head\n      });\n  tr.order();\n  // row cells\n  var td = tr.selectAll('td:not(.checkbox-cell)')\n      .data(identity);\n  td.exit().remove();\n  td.enter().append('td');\n  td.text(identity);\n\n  return this;\n};\n\nCheckboxTable.prototype.getCheckboxes = function () {\n  return this.tbody.selectAll('input[type=\"checkbox\"]');\n};\n\nCheckboxTable.prototype.getCheckedValues = function () {\n  return this.tbody.selectAll('input[type=\"checkbox\"]:checked')[0]\n    .map(function (x) { return x.value; });\n};\n\nCheckboxTable.prototype.isCheckedEmpty = function () {\n  var headerBox = this.headerCheckbox.node();\n  return !(headerBox.checked || headerBox.indeterminate);\n};\n\n/**\n * Refresh the header checkbox (called after a row checkbox is toggled).\n */\nCheckboxTable.prototype.refresh = function () {\n  var headerBox = this.headerCheckbox.node();\n  var boxes = this.getCheckboxes();\n\n  var total = boxes.size();\n  var checked = boxes.filter(':checked').size();\n  if (checked === 0) {\n    headerBox.checked = false;\n  } else if (checked === total) {\n    headerBox.checked = true;\n  }\n  headerBox.indeterminate = (0 < checked && checked < total);\n};\n\n// configurable. called after a click toggles a row or header checkbox.\nCheckboxTable.prototype.onChange = function () {\n};\n\nmodule.exports = CheckboxTable;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sharing/CheckboxTable.js\n ** module id = 42\n ** module chunks = 1\n **/","'use strict';\n\n/* global FileReader:false */\nvar Promise = require('bluebird'); // eslint-disable-line no-shadow\n\n// arguments are forwarded to FileReader.readAsText\n// (Blob, ?encoding) -> Promise\nfunction readAsText() {\n  var args = arguments;\n  return new Promise(function (resolve, reject, onCancel) {\n    var reader = new FileReader();\n    reader.addEventListener('load', function () {\n      resolve(reader.result);\n    });\n    reader.addEventListener('error', function () {\n      reject(reader.error);\n    });\n    onCancel && onCancel(function () {\n      try { reader.abort(); } catch (e) {/* */}\n    });\n\n    reader.readAsText.apply(reader, args);\n  });\n}\n\nexports.readAsText = readAsText;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sharing/FileReaderPromise.js\n ** module id = 43\n ** module chunks = 1\n **/","'use strict';\n\n/* eslint-env browser */\nvar format = require('./format');\nvar createGist = require('./gist').createGist;\nvar Clipboard = require('clipboard');\nvar $ = require('jquery'); // for bootstrap tooltip\n\n// https://github.com/Modernizr/Modernizr/blob/master/feature-detects/a/download.js\nvar canUseDownloadAttribute =\n  !window.externalHost && 'download' in document.createElement('a');\n\n// can copy to clipboard programmatically?\nvar canUseCopyCommand = (function () {\n  try {\n    return document.queryCommandSupported('copy');\n  } catch (e) {\n    return false;\n  }\n}());\n\n// Add event handlers to select an HTMLInputElement's text on focus.\nfunction addSelectOnFocus(element) {\n  element.addEventListener('focus', function selectAll(e) {\n    e.target.select();\n  });\n  // Safari workaround\n  element.addEventListener('mouseup', function (e) {\n    e.preventDefault();\n  });\n}\n\n// Show a one-time tooltip.\n// NB. an existing title attribute overrides the tooltip options.\nfunction showTransientTooltip($element, options) {\n  $element.tooltip(options)\n    .tooltip('show')\n    .one('hidden.bs.tooltip', function () {\n      $element.tooltip('destroy');\n    });\n}\n\nfunction showCopiedTooltip(element) {\n  showTransientTooltip($(element), {title: 'Copied!', placement: 'bottom'});\n}\n\n\n///////////////////////\n// Share with GitHub //\n///////////////////////\n\n/**\n * Generate a new gist and display a shareable link.\n * @param  {HTMLElement} container  Container to use for displaying the link.\n * @param  {HTMLButtonElement} button\n * @param  {string} filename\n * @param  {string} contents  The file contents.\n * @return {Promise}          Cancellable promise to create the gist.\n */\nfunction generateGist(container, button, filename, contents) {\n  var oldButtonText = button.textContent;\n  button.textContent = 'Loading…';\n  button.disabled = true;\n\n  var payload = {\n    files: {},\n    description: 'Turing machine for http://turingmachine.io',\n    public: true\n  };\n  payload.files[filename] = {content: contents};\n\n  return createGist(payload).then(function (response) {\n    // Show link on success\n    var id = response.id;\n    showGeneratedGist(container, 'http://turingmachine.io/?import-gist=' + id);\n  }).catch(function (reason) {\n    // Alert error on failure\n    var message = (function () {\n      var xhr = reason.xhr;\n      try {\n        return 'Response from GitHub: “' + xhr.responseJSON.message + '”';\n      } catch (e) {\n        if (xhr.status > 0) {\n          return 'HTTP status code: ' + xhr.status + ' ' + xhr.statusText;\n        } else {\n          return 'GitHub could not be reached.\\nYour Internet connection may be offline.';\n        }\n      }\n    }());\n    alert('Could not create new gist.\\n\\n' + message);\n\n    button.disabled = false;\n    button.textContent = oldButtonText;\n  });\n}\n\nfunction showGeneratedGist(container, url) {\n  container.innerHTML =\n    '<input id=\"sharedPermalink\" type=\"url\" class=\"form-control\" readonly>' +\n    '<button type=\"button\" class=\"btn btn-default\" data-clipboard-target=\"#sharedPermalink\">' +\n    '<span class=\"glyphicon glyphicon-copy\" aria-hidden=\"true\"></span>' +\n    '</button>';\n  var urlInput = container.querySelector('input');\n  urlInput.value = url;\n  urlInput.size = url.length + 2;\n  addSelectOnFocus(urlInput);\n  urlInput.focus();\n}\n\nfunction createGenerateGistButton(container) {\n  container.innerHTML =\n  '<button type=\"button\" class=\"btn btn-default\">Create permalink</button>' +\n  '<p class=\"help-block\">This will create and link to a new' +\n    ' <a href=\"https://help.github.com/articles/creating-gists/#creating-an-anonymous-gist\"' +\n    ' target=\"_blank\">read-only</a> GitHub gist.' +\n  '</p>';\n  return container.querySelector('button');\n}\n\n\n///////////////////\n// Download file //\n///////////////////\n\n// Create a link button if canUseDownloadAttribute, otherwise a link with instructions.\nfunction createDownloadLink(filename, contents) {\n  var link = document.createElement('a');\n  link.href = 'data:text/x-yaml;charset=utf-8,' + encodeURIComponent(contents);\n  link.target = '_blank';\n  link.download = filename;\n\n  if (canUseDownloadAttribute) {\n    link.textContent = 'Download document';\n    link.className = 'btn btn-primary';\n    return link;\n  } else {\n    link.textContent = 'Right-click here and choose “Save target as…” or “Download Linked File As…”';\n    var p = document.createElement('p');\n    p.innerHTML = ', <br>then name the file to end with <code>.yaml</code>';\n    p.insertBefore(link, p.firstChild);\n    return p;\n  }\n}\n\n\n////////////\n// Common //\n////////////\n\nfunction init(args) {\n  var $dialog = args.$dialog,\n      getCurrentDocument = args.getCurrentDocument,\n      getIsSynced = args.getIsSynced,\n      gistContainer = args.gistContainer,\n      downloadContainer = args.downloadContainer,\n      textarea = args.textarea;\n\n  if (canUseDownloadAttribute) {\n    $dialog.addClass('download-attr');\n  }\n  if (!canUseCopyCommand) {\n    $dialog.addClass('no-copycommand');\n  }\n  gistContainer.className = 'form-group form-inline';\n  addSelectOnFocus(textarea);\n\n  function setupDialog() {\n    var doc = getCurrentDocument();\n    var filename = doc.name + '.yaml';\n    var contents = format.stringifyDocument(doc);\n    var gistPromise;\n\n    // warn about unsynced changes\n    var $alert;\n    if (!getIsSynced()) {\n      $alert = $(\n        '<div class=\"alert alert-warning\" role=\"alert\">' +\n        'The code editor has <strong>unsynced changes</strong> and might not correspond with the diagram.<br>' +\n        'Click <q>Load machine</q> to try to sync them. Otherwise, two sets of code will be exported.' +\n        '</div>'\n      ).prependTo($dialog.find('.modal-body'));\n    }\n\n    createGenerateGistButton(gistContainer).addEventListener('click', function (e) {\n      gistPromise = generateGist(gistContainer, e.target, filename, contents);\n    });\n\n    // \"Download document\" button link\n    downloadContainer.appendChild(createDownloadLink(filename, contents));\n    // <textarea> for document contents\n    textarea.value = contents;\n\n    var clipboard = new Clipboard('[data-clipboard-target]');\n    clipboard.on('success', function (e) {\n      showCopiedTooltip(e.trigger);\n      e.clearSelection();\n    });\n\n    // return cleanup function\n    return function () {\n      if (gistPromise) {\n        try { gistPromise.cancel(); } catch (e) {/* */}\n      }\n      if ($alert) { $alert.remove(); }\n      gistContainer.textContent = '';\n      downloadContainer.textContent = '';\n      textarea.value = '';\n      clipboard.destroy();\n    };\n  }\n\n  $dialog.on('show.bs.modal', function () {\n    var cleanup = setupDialog();\n    $dialog.one('hidden.bs.modal', cleanup);\n  });\n  $dialog.on('shown.bs.modal', function () {\n    // workaround \"Copy to clipboard\" .focus() scrolling down to <textarea>\n    // note: doesn't work when <textarea> is completely out of view\n    textarea.setSelectionRange(0,0);\n  });\n}\n\nexports.init = init;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sharing/export-panel.js\n ** module id = 44\n ** module chunks = 1\n **/","'use strict';\n\n/* global document: false */\nvar docimport = require('./import');\nvar format = require('./format');\nvar _ = require('lodash/fp');\nvar d3 = require('d3');\n\n// Init the import panel and attach event handlers\n// {$dialog: jQuery, gistIDForm: HTMLFormElement, importArgs: Object} -> void\nfunction init(args) {\n  var $dialog = args.$dialog,\n      gistIDForm = args.gistIDForm,\n      importArgs = args.importArgs;\n\n  function hideDialog() {\n    $dialog.modal('hide');\n    // Workaround needed for opening another modal before a modal is done hiding.\n    // Without this, the <body> scrolls instead of the modal:\n    // modal2.show locks body scroll => modal1.hidden unlocks body scroll\n    // while modal2 is still open.\n    var nextDialog = importArgs.dialogNode;\n    $dialog.one('hidden.bs.modal', function () {\n      if (nextDialog.classList.contains('in')) {\n        document.body.classList.add('modal-open');\n      }\n    });\n  }\n\n  // Panel: From GitHub gist\n  gistIDForm.addEventListener('submit', function (e) {\n    e.preventDefault();\n    hideDialog();\n\n    var gistID = gistIDForm.querySelector('input[type=\"text\"]').value;\n    docimport.importGist(_.assign({gistID: gistID}, importArgs));\n  });\n\n  // Panel: From files\n  (function () {\n    // TODO: factor out element IDs and containers into interface\n    var panelBody = document.querySelector('#importFilesPanel > .panel-body');\n    // <input type=\"file\">\n    var fileInput = panelBody.querySelector('input[type=\"file\"]');\n    var importFilesButton = document.getElementById('importFilesButton');\n    importFilesButton.addEventListener('click', function () {\n      hideDialog();\n      docimport.importLocalFiles(_.assign({files: fileInput.files}, importArgs));\n    });\n    // <textarea>\n    var textarea = panelBody.querySelector('textarea');\n    var importContentsButton = document.getElementById('importContentsButton');\n    importContentsButton.parentNode.style.position = 'relative';\n    importContentsButton.addEventListener('click', function (e) {\n      if (importDocumentContents(\n        { containers: {status: e.target.parentNode, details: panelBody },\n          importDocument: importArgs.importDocument },\n        textarea.value\n      )) {\n        textarea.select();\n      }\n    });\n  }());\n}\n\n///////////////////////////////\n// Import from pasted string //\n///////////////////////////////\n\n// () -> HTMLButtonElement\nfunction createCloseIcon() {\n  return d3.select(document.createElement('button'))\n      .attr({class: 'close', 'aria-label': 'Close'})\n      .html('<span aria-hidden=\"true\">&times;</span>')\n    .node();\n}\n\n// Show import outcome (success/failure) and error (if any)\n// ({status: HTMLElement, details: HTMLElement}, ?Error) -> void\nfunction showImportContentOutcome(containers, error) {\n  var statusContainer = d3.select(containers.status),\n      detailsContainer = d3.select(containers.details);\n  statusContainer.selectAll('[role=\"alert\"]').remove();\n  detailsContainer.selectAll('.alert').remove();\n  var status = statusContainer.append('span')\n      .attr({role: 'alert'})\n      .style({\n        position: 'absolute', left: 0, width: '40%', // center between left and button\n        top: '50%', transform: 'translateY(-60%)' // center vertically\n      });\n\n  // () -> string\n  function showErrorDetails() {\n    var details = detailsContainer.append('div')\n        .attr({role: 'alert', class: 'alert alert-danger'})\n        .style('margin-top', '1em');\n    details.append(createCloseIcon)\n        .attr('data-dismiss', 'alert')\n        .on('click', function () {\n          status.remove(); // dismiss details => also dismiss status\n        });\n    if (error instanceof format.YAMLException) {\n      details.append('h4').text('Not valid YAML'); // only \".alert h4\" has margin-top: 0\n      details.append('pre').text(error.message);\n    } else if (error instanceof format.InvalidDocumentError) {\n      details.append('span')\n          .text(error.message.replace(/\\.?$/, '.')); // add period if missing\n    } else {\n      details.append('h4').text('Unexpected error');\n      details.append('pre').text(String(error));\n      return 'Import failed';\n    }\n    return 'Not a valid document';\n  }\n\n  if (error) {\n    var statusSummary = showErrorDetails();\n    status.attr({class: 'text-danger'})\n        .html('<span class=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span> '\n                + statusSummary);\n  } else {\n    status.attr({class: 'text-success'})\n        .html('<span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span> '\n                + 'Import succeeded')\n      .transition()\n        .delay(2500)\n        .duration(2000)\n        .style('opacity', 0)\n        .remove();\n  }\n}\n\n// returns true if import succeeded\nfunction importDocumentContents(opts, content) {\n  var containers = opts.containers,\n      importDocument = opts.importDocument;\n\n  var error = (function () {\n    try {\n      importDocument(format.parseDocument(content));\n    } catch (e) {\n      return e;\n    }\n  }());\n  showImportContentOutcome(containers, error);\n  return (error == null);\n}\n\nexports.init = init;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sharing/import-panel.js\n ** module id = 45\n ** module chunks = 1\n **/","module.exports = Clipboard;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Clipboard\"\n ** module id = 50\n ** module chunks = 1\n **/"],"sourceRoot":""}